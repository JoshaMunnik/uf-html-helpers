var lib;(()=>{"use strict";class e{constructor(){}static getOrFail(e,t){if(t in e)return e[t];throw new Error(`Missing ${t} in object`)}static getOrFailAs(t,s){return e.getOrFail(t,s)}static get(e,t,s){return t in e?e[t]:s}static getAs(e,t,s){return t in e?e[t]:s}static set(e,t,s){t in e&&(e[t]=s)}static setOrFail(e,t,s){if(!(t in e))throw new Error(`Missing ${t} in object`);e[t]=s}static getAttachedAs(e,t,s){return t in e||(e[t]=s()),e[t]}static equalProperties(t,s,n=!1){for(let r in s)if(s.hasOwnProperty(r)){if(!t.hasOwnProperty(r))return!1;switch(typeof s[r]){case"object":if(!e.equalProperties(t[r],s[r],n))return!1;break;case"string":let i=t[r],o=s[r];if(n&&(i=i.toLowerCase(),o=o.toLowerCase()),i!==o)return!1;break;default:if(t[r]!==s[r])return!1}}return!0}static backupProperties(t,s){const n=Array.isArray(t)?[]:{};for(const r in s)if(s.hasOwnProperty(r)&&t.hasOwnProperty(r)){let i=s[r];n[r]="object"==typeof i?e.backupProperties(t[r],s[r]):t[r]}return n}static applyProperties(t,s){for(const n in s)if(s.hasOwnProperty(n)&&t.hasOwnProperty(n)){const r=s[n];"function"==typeof r?r(t,n):"object"==typeof r?e.applyProperties(t[n],s[n]):t[n]=s[n]}return t}static deepCopy(e){const t={};return Object.keys(e).forEach((s=>{const n=e[s];t[s]="object"==typeof n?this.deepCopy(n):n})),t}static contains(e,...t){return t.findIndex((t=>e.hasOwnProperty(t)))>=0}static combineObjects(t,s=!0,n="__init"){if(0===t.length)return{};const r={},i=[];return t.forEach((t=>e.copyProperties(t,r,n,i))),i.length&&e.callMethods(r,i,s?void 0:n),r}static copyProperty(e,t,s){const n=Object.getOwnPropertyDescriptor(t,e);n&&(n.get||n.set)?Object.defineProperty(s,e,n):s[e]=t[e]}static copyProperties(t,s,n,r){if(n&&!r)throw new Error("Missing separator list while a separator name was specified");Object.getOwnPropertyNames(t).forEach((i=>{n&&i===n?r.push(t[i]):e.copyProperty(i,t,s)}))}static callMethods(e,t,s){const n=()=>t.forEach((t=>t.call(e)));s?e[s]=n:n()}static instanceOf(e,t){if("function"!=typeof t)return!1;try{return e instanceof t}catch(e){return!1}}}const t="ufDisplayBackup";class s{constructor(){}static escapeHtml(e){return e.replace(/[&<>"'\n\t\r]/g,(e=>this.s_escapeHtmlMap.get(e)))}static convertToPlain(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}static addClasses(e,t){e&&t&&t.split(" ").forEach((t=>e.classList.add(t.trim())))}static removeClasses(e,t){e&&t&&t.split(" ").forEach((t=>e.classList.remove(t.trim())))}static toggleClasses(e,t,s){e&&t&&t.split(" ").forEach((t=>e.classList.toggle(t.trim(),s)))}static addAndRemoveClasses(e,t,s){this.addClasses(e,t),this.removeClasses(e,s)}static addListener(e,t,s){const n="string"==typeof e?document.querySelector(e):e;if(null==n)return()=>{};const r=t.split(" ").filter((e=>e.trim().length>0));return r.forEach((e=>n.addEventListener(e,s))),()=>{r.forEach((e=>n.removeEventListener(e,s)))}}static addBodyListener(e,t,s){const n=t.split(" ").filter((e=>e.trim().length>0)),r=t=>{if(null==t.target||!(t.target instanceof HTMLElement))return;const n=t.target.closest(e);if(!n)return;const r=s(n);r instanceof Function?r(t):"handleEvent"in r&&r.handleEvent(t)};return n.forEach((e=>document.body.addEventListener(e,r,!0))),()=>n.forEach((e=>document.body.removeEventListener(e,r,!0)))}static addListeners(e,t,n){const r="string"==typeof e?document.querySelectorAll(e):e,i=[];return r.forEach((e=>i.push(s.addListener(e,t,n(e))))),()=>i.forEach((e=>e()))}static getAttribute(e,t,s=""){var n,r;return null!==(r=null===(n=e.attributes.getNamedItem(t))||void 0===n?void 0:n.value)&&void 0!==r?r:s}static hasAttribute(e,t){return null!=e.attributes.getNamedItem(t)}static get(e,t){const s="string"==typeof e?(t||document).querySelector(e):e;if(null==s)throw new Error(`Can not find element for ${e}`);return s}static getForId(e){const t=document.getElementById(e);if(null==t)throw new Error(`Can not find element for ${e}`);return t}static fadeIn(e,t=400){e.style.opacity="0",e.style.transition=`opacity ${t}ms`,setTimeout((()=>e.style.opacity="1"),0)}static fadeOut(e,t=400){e.style.opacity="1",e.style.transition=`opacity ${t}ms`,setTimeout((()=>e.style.opacity="0"),0)}static createAs(e){const t=(new DOMParser).parseFromString(e,"text/html").body.firstChild;return t.remove(),t}static empty(e){for(;e.firstChild;)e.removeChild(e.firstChild)}static getFirstParent(e,t){for(let s=e.parentElement;s;s=s.parentElement)if(s.matches(t))return s;return null}static getParents(e,t){const s=[];for(let n=e.parentElement;n;n=n.parentElement)t&&!n.matches(t)||s.push(n);return s}static show(s,n){s.style.display=null!=n?n:e.getAttachedAs(s,t,(()=>"block"))}static hide(s){e.getAttachedAs(s,t,(()=>s.style.display)),s.style.display="none"}static copyAttributes(e,t,s){const n=s||document;for(const s in t){const r=e.getAttribute(s);if(null===r)continue;const i=n.querySelectorAll(t[s]);i&&i.forEach((e=>{this.assignValue(e,r)||(e instanceof HTMLImageElement?e.src=r:e instanceof HTMLElement&&(e.innerText=r))}))}}static getAttributeNames(e){const t=[];for(let s=0;s<e.attributes.length;s++){const n=e.attributes[s];t.push(n.name)}return t}static buildDataAttributesMap(e){const t={};for(let s=0;s<e.attributes.length;s++){const n=e.attributes[s].name;n.startsWith("data-uf-")||n.startsWith("data-")&&(t[n]=`[${n}]`)}return t}static reload(){window.history.replaceState&&window.history.replaceState(null,"",window.location.href),window.location.href=window.location.href}static assignValue(e,t){if(e instanceof HTMLInputElement)"checkbox"===e.type||"radio"===e.type?e.checked="true"===t||"1"===t||"checked"===t:(e.value=t,e.dispatchEvent(new InputEvent("input")));else if(e instanceof HTMLTextAreaElement)e.value=t,e.dispatchEvent(new InputEvent("input"));else{if(!(e instanceof HTMLSelectElement))return!1;e.value=t}return e.dispatchEvent(new Event("change")),!0}static isVisible(e,t=!0){const s=window.getComputedStyle(e);return"none"!==s.display&&"hidden"!==s.visibility&&"0"!==s.opacity&&((0!==e.offsetWidth||0!==e.offsetHeight)&&(!t||!e.parentElement||this.isVisible(e.parentElement)))}static getForAttribute(e,t=null,s){let n=e;null!==t&&(n+=`="${t}"`);const r=(s||document).querySelector(`[${n}]`);if(null==r)throw new Error(`Can not find element for attribute ${n}`);return r}static findForAttribute(e,t=null,s){let n=e;return null!==t&&(n+=`="${t}"`),(s||document).querySelector(`[${n}]`)}static findAllForAttribute(e,t=null,s){let n=e;return null!==t&&(n+=`="${t}"`),(s||document).querySelectorAll(`[${n}]`)}static insertAfter(e,t,s){s.nextElementSibling?e.insertBefore(t,s.nextElementSibling):e.appendChild(t)}}s.s_escapeHtmlMap=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["\n","<br/>"],["\t",""],["\r",""]]);class n{static get ClickEvent(){return this.s_isTouchSupported?"touchstart":"click"}static get DownEvent(){return this.s_isTouchSupported?"touchstart":"mousedown"}static get UpEvent(){return this.s_isTouchSupported?"touchend":"mouseup"}static get MoveEvent(){return this.s_isTouchSupported?"touchmove":"mousemove"}static get isTouchSupported(){return this.s_isTouchSupported}static get isAudioSupported(){return"Audio"in window}static get hasLocalStorage(){return"localStorage"in window}static get isMobileSafari(){const e=window.navigator.userAgent,t=/iPhone|iPad|iPod/i.test(e),s=/WebKit/i.test(e);return t&&s&&!/CriOS/i.test(e)}static get isIOS(){const e=window.navigator.userAgent;return/iPhone|iPad|iPod/i.test(e)&&!/IEMobile/i.test(e)}static get isAndroid(){const e=window.navigator.userAgent;return/Android/i.test(e)&&!/IEMobile/i.test(e)}static get isMobileWindows(){const e=window.navigator.userAgent;return/IEMobile/i.test(e)}static get isInternetExplorer(){const e=window.navigator.userAgent;return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}static getPageXY(e){if(e instanceof TouchEvent)if(e.touches){const t=e.touches[0];if(t)return{pageX:t.pageX,pageY:t.pageY}}else if(e.changedTouches){const t=e.changedTouches[0];if(t)return{pageX:t.pageX,pageY:t.pageY}}if(e instanceof MouseEvent)return{pageX:e.pageX,pageY:e.pageY};throw new Error("Can not determine pageX and pageY from event.")}static getParameterByName(e){e=e.replace(/\[/,"\\[").replace(/\]/,"\\]");const t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}static getCssRule(e){const t=e.toLowerCase();if(document.styleSheets)for(const e of document.styleSheets){let s,n=0;do{if(s=e.cssRules?e.cssRules[n]:e.rules[n],s&&s.selectorText.toLowerCase()===t)return s;n++}while(s)}return!1}static getIEVersion(){const e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>=0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>=0){const t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}const s=e.indexOf("Edge/");return s>=0&&parseInt(e.substring(s+5,e.indexOf(".",s)),10)}static getAndroidVersion(){if(this.isAndroid){const e=navigator.userAgent.match(/Android [\d+\.]{2,5}/i);return null!==e&&e[0].replace("Android ","")}return!1}static isClicked(e,t){const s=t.target;return e===s||e.contains(s)}static animate(e,t,n){const r=s.get(e),i=e=>{e.target===r&&(r.removeEventListener("animationend",i),s.removeClasses(r,t),n&&n())};r.addEventListener("animationend",i),s.addClasses(r,t)}static transition(e,t,n){const r=s.get(e),i=e=>{e.target===r&&(r.removeEventListener("transitionend",i),n&&n())};r.addEventListener("transitionend",i),s.toggleClasses(r,t)}static getBackgroundImageUrl(e){const t=s.get(e).style.backgroundImage;if(t){const e=t.match(/^url\(["']?(.+?)["']?\)$/);return e&&e.length>1&&e[1]?e[1]:null}return null}static findParent(e,t){for(let n=s.get(e).parentElement;n;n=n.parentElement)if(t(n))return n;return null}static atBottom(e){const t=s.get(e);return t.scrollTop+t.clientHeight>=t.scrollHeight-10}static scrollToBottom(e){const t=s.get(e);t.scrollTop=t.scrollHeight}static loadImage(e,t,s){const n=new Image;return t&&n.addEventListener("load",(()=>t(n))),s&&n.addEventListener("error",(()=>s(n))),n.src=e,n}}var r,i,o,a,l,c,u;n.s_isTouchSupported=!!("ontouchstart"in window||"msMaxTouchPoints"in window.navigator||window.navigator.maxTouchPoints),function(e){e.Showing="showing",e.Visible="visible",e.Hiding="hiding",e.Hidden="hidden"}(r||(r={})),function(e){e.floater="data-uf-floater"}(i||(i={})),function(e){e.Adjacent="adjacent",e.Overlap="overlap",e.Relative="relative"}(o||(o={})),function(e){e.None="none",e.Show="show",e.Toggle="toggle"}(a||(a={})),function(e){e.None="none",e.Always="always",e.Tree="tree",e.Outside="outside"}(l||(l={})),function(e){e.None="none",e.Fade="fade",e.SlideVertical="slide-vertical",e.SlideHorizontal="slide-horizontal",e.Custom="custom"}(c||(c={}));class h{constructor(e={}){this.m_options={screenX:.5,screenY:.5,element:null,positionX:o.Adjacent,positionY:o.Overlap,floaterX:0,floaterY:0,elementX:0,elementY:0,width:null,height:null,autoShow:a.Toggle,autoHide:l.Outside,transition:c.None,inBounds:!1,content:"",onInitialized:null,onShown:null,onHidden:null,customShow:null,customHide:null,canHide:null},this.m_floaterElement=s.createAs(`<div style="overflow: hidden; position: absolute; left: 0; top: 0; pointer-events: all; z-index: 99999; visibility: hidden; width: max-content; height: max-content" ${i.floater}="1"></div>`),this.m_contentElement=s.createAs('<div style="position: relative; left: 0; top: 0; width: max-content; height: max-content"></div>'),this.m_elements=null,this.m_selectedElement=null,this.m_nextElement=null,this.m_state=r.Hidden,this.m_floaterWidth=0,this.m_floaterHeight=0,this.m_contentWidth=0,this.m_contentHeight=0,this.m_enabled=!0,this.m_removeListeners=[],this.m_removeElementListeners=[],this.m_transitionTimer=null,this.m_options=Object.assign(this.m_options,e),this.m_contentElement.append(this.m_options.content),this.m_floaterElement.append(this.m_contentElement),document.body.append(this.m_floaterElement),setTimeout((()=>{this.copyDimensions(),this.m_floaterElement.remove(),this.hideFloaterElement(),this.m_removeListeners.push(s.addListener(document,"mouseup touchend touchcancel",(e=>this.handleDocumentUp(e))),s.addListener(window,"resize",(()=>this.handleWindowResize()))),this.m_options.onInitialized&&this.m_options.onInitialized(this)}),1),this.refreshElements()}destroy(){this.destroyElements(),this.removeListeners(),this.removeElementListeners(),this.m_floaterElement.remove()}setOptions(e){this.m_options=Object.assign(this.m_options,e),this.refreshElements(),this.refreshContent()}hide(){return this.hideFloater()}show(){this.showFloater(null)}positionAndShow(e){this.setOptions({element:e}),this.show()}updatePosition(){this.visible&&this.updateFloaterPosition()}refreshContent(){this.visible&&(s.empty(this.m_contentElement),this.m_contentElement.append(this.m_options.content),setTimeout((()=>{this.copyDimensions(),this.updateFloaterPosition()})))}get visible(){return this.m_state!==r.Hidden}get enabled(){return this.m_enabled}set enabled(e){this.m_enabled=e}get width(){return this.m_options.width||this.m_floaterWidth}get height(){return this.m_options.height||this.m_floaterHeight}get contentWidth(){return this.m_contentWidth}get contentHeight(){return this.m_contentHeight}removeListeners(){this.m_removeListeners.forEach((e=>e())),this.m_removeListeners.length=0}removeElementListeners(){console.debug("removeElementListeners"),this.m_removeElementListeners.forEach((e=>e())),this.m_removeElementListeners.length=0}addElementListeners(e){s.getParents(e).forEach((e=>this.m_removeElementListeners.push(s.addListener(e,"scroll",(()=>this.handleScrolling()))))),this.m_removeElementListeners.push(s.addListener(window,"scroll",(()=>this.handleScrolling())))}showFloaterElementWithTransition(){if(this.m_options.transition===c.Custom&&this.m_options.customShow)this.m_options.customShow(this.m_floaterElement,(()=>this.handleShowDone()));else switch(this.m_options.transition){case c.Fade:this.showFloaterElementFade();break;case c.SlideVertical:this.showFloaterElementVerticalSlide();break;case c.SlideHorizontal:this.showFloaterElementHorizontalSlide();break;default:this.showFloaterElementImmediately()}}hideFloaterElementWithTransition(){if(this.m_options.transition===c.Custom&&this.m_options.customHide)this.m_options.customHide(this.m_floaterElement,(()=>this.handleHideDone()));else switch(this.m_options.transition){case c.Fade:this.hideFloaterElementFade();break;case c.SlideVertical:this.hideFloaterElementVerticalSlide();break;case c.SlideHorizontal:this.hideFloaterElementHorizontalSlide();break;default:this.hideFloaterElementImmediately()}}showFloaterElementImmediately(){this.showFloaterElement(),setTimeout((()=>this.handleShowDone()))}hideFloaterElementImmediately(){this.hideFloaterElement(),setTimeout((()=>this.handleHideDone()))}showFloaterElementFade(){this.showFloaterElement(),this.m_floaterElement.style.transition="",this.m_floaterElement.style.opacity="0",setTimeout((()=>{this.m_floaterElement.style.transition="opacity 0.15s",this.m_floaterElement.style.opacity="1"}),10),this.m_transitionTimer=setTimeout((()=>{this.handleShowDone()}),160)}hideFloaterElementFade(){this.m_floaterElement.style.transition="",this.m_floaterElement.style.opacity="1",this.m_floaterElement.style.transition="opacity 0.15s",this.m_floaterElement.style.opacity="0",this.m_transitionTimer=setTimeout((()=>{this.hideFloaterElement(),this.handleHideDone()}),150)}showFloaterElementVerticalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="0 -100%",setTimeout((()=>{this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="0 0"}),10),this.m_transitionTimer=setTimeout((()=>{this.handleShowDone()}),160)}hideFloaterElementVerticalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="0 0",this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="0 -100%",this.m_transitionTimer=setTimeout((()=>{this.handleHideDone()}),150)}showFloaterElementHorizontalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="-100% 0",setTimeout((()=>{this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="0 0"}),10),this.m_transitionTimer=setTimeout((()=>{this.handleShowDone()}),160)}hideFloaterElementHorizontalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="0 0",this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="-100% 0",this.m_transitionTimer=setTimeout((()=>{this.handleHideDone()}),150)}hideFloaterElement(){this.m_floaterElement.style.display="none"}showFloaterElement(){this.m_floaterElement.style.display="block"}updateFloaterPosition(){this.m_selectedElement?this.updatePositionForElement():this.updatePositionInDocument()}updatePositionForElement(){const e=this.m_selectedElement.getBoundingClientRect(),t=this.m_options.width||this.m_floaterWidth,s=this.m_options.height||this.m_floaterHeight,n=document.documentElement.clientWidth,r=document.documentElement.clientHeight;let i=this.getFloaterPosition(this.m_options.positionX,n,e.left,e.width,this.m_options.elementX,t,this.m_options.floaterX),o=this.getFloaterPosition(this.m_options.positionY,r,e.top,e.height,this.m_options.elementY,s,this.m_options.floaterY);this.m_options.inBounds&&(i=Math.max(0,Math.min(n-t,i)),o=Math.max(0,Math.min(r-s,o))),this.m_floaterElement.style.left=`${i}px`,this.m_floaterElement.style.top=`${o}px`,this.m_options.width&&(this.m_floaterElement.style.width=`${this.m_options.width}px`),this.m_options.height&&(this.m_floaterElement.style.height=`${this.m_options.height}px`)}getFloaterPosition(e,t,s,n,r,i,a){switch(e){case o.Overlap:return s+i>=t-10?n+s-i-r:s+r;case o.Adjacent:return s+n+i>=t-10?s-i-r:s+n+r;default:return s+n*r-i*a}}updatePositionInDocument(){const e=this.m_options.width||this.m_floaterElement.offsetWidth,t=this.m_options.height||this.m_floaterElement.offsetHeight,s=document.documentElement.clientWidth,n=document.documentElement.clientHeight;this.m_floaterElement.style.left="number"==typeof this.m_options.screenX?(s-e)*this.m_options.screenX+"px":this.m_options.screenX,this.m_floaterElement.style.top="number"==typeof this.m_options.screenY?(n-t)*this.m_options.screenY+"px":this.m_options.screenY,this.m_options.width&&(this.m_floaterElement.style.width=`${this.m_options.width}px`),this.m_options.height&&(this.m_floaterElement.style.height=`${this.m_options.height}px`)}refreshElements(){this.destroyElements(),this.m_options.element&&this.m_options.autoShow!==a.None&&(this.m_elements=Array.isArray(this.m_options.element)?this.m_options.element:[s.get(this.m_options.element)])}destroyElements(){this.m_elements&&(this.removeElementListeners(),this.m_elements=null,this.m_floaterElement&&h.s_floaterToElementMap.delete(this.m_floaterElement))}copyDimensions(){this.m_floaterWidth=this.m_floaterElement.offsetWidth,this.m_floaterHeight=this.m_floaterElement.offsetHeight,this.m_options.content instanceof HTMLElement&&(this.m_contentWidth=this.m_options.content.offsetWidth,this.m_contentHeight=this.m_options.content.offsetHeight)}showFloater(e){this.m_state!==r.Visible&&this.m_state!==r.Showing&&(this.stopTransitionTimer(),e&&(this.addElementListeners(e),this.m_selectedElement=e,h.s_floaterToElementMap.set(this.m_floaterElement,e)),this.m_floaterElement.style.visibility="hidden",this.showFloaterElement(),null==h.s_container.parentElement&&document.body.append(h.s_container),h.s_container.append(this.m_floaterElement),this.updateFloaterPosition(),this.m_floaterElement.style.visibility="visible",this.hideFloaterElement(),this.m_state=r.Showing,this.showFloaterElementWithTransition())}moveFloater(e){this.m_state===r.Visible||this.m_state===r.Showing?(this.m_nextElement=e,this.hideFloater()):this.showFloater(e)}hideFloater(e=null){return this.m_state===r.Hidden||this.m_state===r.Hiding||!(this.m_options.canHide&&!this.m_options.canHide(e))&&(this.stopTransitionTimer(),this.m_state=r.Hiding,setTimeout((()=>this.hideFloaterElementWithTransition())),!0)}isRelated(e){for(;;){const t=s.getParents(e,`[${i.floater}]`);if(0===t.length)return!1;const n=t[0];if(!h.s_floaterToElementMap.has(n))return!1;if(n===this.m_floaterElement)return!0;e=h.s_floaterToElementMap.get(n)}}findClickedElement(e){if(!this.m_elements)return null;for(const t of this.m_elements)if(n.isClicked(t,e))return t;return null}stopTransitionTimer(){this.m_transitionTimer&&(clearTimeout(this.m_transitionTimer),this.m_transitionTimer=null)}handleShowDone(){this.m_state=r.Visible,this.m_options.onShown&&this.m_options.onShown()}handleHideDone(){this.m_floaterElement.remove(),h.s_container.hasChildNodes()||h.s_container.remove(),this.m_state=r.Hidden,this.m_options.onHidden&&this.m_options.onHidden(),this.m_selectedElement&&(this.removeElementListeners(),this.m_selectedElement=null,h.s_floaterToElementMap.delete(this.m_floaterElement)),this.m_nextElement&&(this.showFloater(this.m_nextElement),this.m_nextElement=null)}handleDocumentUp(e){if(!this.m_enabled)return;const t=this.findClickedElement(e);if(t)switch(this.m_state){case r.Hidden:case r.Hiding:return void this.showFloater(t);case r.Visible:case r.Showing:return void(t==this.m_selectedElement?this.m_options.autoShow===a.Toggle&&this.hideFloater(e):this.moveFloater(t))}this.m_state===r.Hidden||this.m_options.autoHide!==l.Always&&(this.m_options.autoHide!==l.Outside||n.isClicked(this.m_floaterElement,e)||null!=this.m_selectedElement&&n.isClicked(this.m_selectedElement,e))&&(this.m_options.autoHide!==l.Tree||this.isRelated(e.target))||this.hideFloater(e)}handleWindowResize(){this.m_state!=r.Hidden&&this.updateFloaterPosition()}handleScrolling(){this.m_state!=r.Hidden&&this.updateFloaterPosition()}}h.s_container=s.createAs('<div style="position: fixed; top: 0; left: 0; pointer-events: none;"></div>'),h.s_floaterToElementMap=new Map,function(e){e.dataOver="data-uf-over",e.dataDisabled="data-uf-disabled"}(u||(u={}));var d;!function(e){e.Idle="Idle",e.Preloading="Preloading",e.Preloaded="Preloaded",e.Loading="Loading",e.Playing="Playing",e.Stopped="Stopped"}(d||(d={}));class m{constructor(){}static get(e){return e?e instanceof jQuery?e:$(e):e}static addEventNamespace(e,t){return e.split(" ").map((e=>e.indexOf(t)<0?e+"."+t:e)).join(" ")}}class g{constructor(e,t,s){this.m_valid=!0,this.m_visual={normalClass:"",errorClass:"",errorElements:[],hideElements:[],updateCallback:null,dependentProperties:[]},this.m_ignoreDataChange=!1,this.m_removeListeners=[],this.m_element=e,this.m_visual=Object.assign(this.m_visual,t),this.m_property=s}addRemoveListenerCallback(e){this.m_removeListeners.push(e)}destroy(){this.m_removeListeners.forEach((e=>e())),this.m_removeListeners.length=0}resetBinding(){this.m_visual.normalClass&&s.addClasses(this.m_element,this.m_visual.normalClass),this.m_visual.errorClass&&s.removeClasses(this.m_element,this.m_visual.errorClass),this.m_visual.updateCallback&&this.m_visual.updateCallback(!0)}isFieldActive(){return!0}getInputValue(e){var t;switch(e.type.toLowerCase()){case"checkbox":return e.checked;case"radio":return(null===(t=document.querySelector(`input[name=${e.name}]:checked`))||void 0===t?void 0:t.value)||"";default:return e.value}}getFieldValue(){switch(this.m_element.tagName.toLowerCase()){case"input":return this.getInputValue(this.m_element);case"select":case"textarea":return this.m_element.value;default:return this.m_element.innerHTML}}setInputValue(e,t){switch(e.type.toLowerCase()){case"checkbox":e.checked=!!t;break;case"radio":const s=this.m_element.getAttribute("name");document.querySelectorAll(`input[name=${s}]`).forEach((e=>e.value=t.toString()));break;default:e.value=t.toString()}}setFieldValue(e){switch(this.m_element.tagName.toLowerCase()){case"input":this.setInputValue(this.m_element,e);break;case"select":case"textarea":this.m_element.value=e.toString();break;default:this.m_element.innerHTML=e.toString()}}updateFieldVisual(){this.m_valid?(this.m_visual.errorClass&&s.removeClasses(this.m_element,this.m_visual.errorClass),this.m_visual.normalClass&&s.addClasses(this.m_element,this.m_visual.normalClass),this.m_visual.errorElements.forEach((e=>{const t=this.getErrorVisual(e);t.properties.delete(this.m_property),0===t.properties.size&&s.hide(t.element)}))):(this.m_visual.normalClass&&s.removeClasses(this.m_element,this.m_visual.normalClass),this.m_visual.errorClass&&s.addClasses(this.m_element,this.m_visual.errorClass),this.m_visual.errorElements.forEach((e=>{const t=this.getErrorVisual(e);0===t.properties.size&&s.show(t.element),t.properties.add(this.m_property)}))),this.m_visual.updateCallback&&this.m_visual.updateCallback(this.m_valid)}hideHideElements(){this.m_visual.hideElements.forEach((e=>m.get(e).hide()))}updateValid(e){this.m_element instanceof HTMLInputElement||this.m_element instanceof HTMLSelectElement?e&&(e=this.m_element.checkValidity()):this.m_element instanceof HTMLTextAreaElement&&e&&(e=this.m_element.checkValidity()),this.m_valid=e}noDataChange(e){try{this.m_ignoreDataChange=!0,e()}finally{this.m_ignoreDataChange=!1}}static resetErrorVisuals(){g.s_errorElements.forEach((e=>{s.hide(e.element),e.properties.clear()}))}get valid(){return this.m_valid}get element(){return this.m_element}get ignoreDataChange(){return this.m_ignoreDataChange}get visual(){return this.m_visual}get property(){return this.m_property}getErrorVisual(e){const t=s.get(e);if(!g.s_errorElements.has(t)){const e={element:t,properties:new Set};return g.s_errorElements.set(t,e),e}return g.s_errorElements.get(t)}}g.s_errorElements=new Map;class p{constructor(){}static get(e,t,s){if(e.has(t))return e.get(t);const n=s();return e.set(t,n),n}}class f{constructor(){this.m_singleEvents=new Map,this.m_groupedEvents=new Map}static get instance(){return f.s_instance||(f.s_instance=new f),f.s_instance}addListenerForGroup(e,t,n,r){const i=p.get(this.m_groupedEvents,e,(()=>[])),o=s.addListener(t,n,r);i.push(o)}addListenersForGroup(e,t,n,r){const i=p.get(this.m_groupedEvents,e,(()=>[])),o=s.addListeners(t,n,r);i.push(o)}removeAllForGroup(e){if(!this.m_groupedEvents.has(e))return;const t=this.m_groupedEvents.get(e);this.m_groupedEvents.delete(e),t.forEach((e=>e()))}addSingle(e,t,n){this.removeSingle(e,t);p.get(this.m_singleEvents,e,(()=>new Map)).set(t,(()=>s.addListener(e,t,n)))}removeSingle(e,t){const s=this.m_singleEvents.get(e);if(!s)return;const n=s.get(t);n&&(n(),s.delete(t),s.size>0||this.m_singleEvents.delete(e))}}var E,_,v,y,b,w;f.s_instance=null,function(e){e.DisplayValue="data-uf-display-value",e.ShowClasses="data-uf-show-classes",e.HideClasses="data-uf-hide-classes"}(E||(E={})),function(e){e.Self="_self",e.Parent="_parent",e.Next="_next",e.Previous="_previous",e.Grandparent="_grandparent",e.Dialog="_dialog"}(_||(_={}));class S{constructor(){this.m_isInitialized=!1}scan(){}init(){document.addEventListener("DOMContentLoaded",(()=>this.handleDomContentLoaded()))}addSourceAndTargetElements(e,t,s,n=null,r=null,i=""){document.querySelectorAll("["+e+"]").forEach((o=>this.addSourceElement(e,o,t,s,n,r,i)))}showElement(t,n){const r=s.getAttribute(t,E.ShowClasses),i=s.getAttribute(t,E.HideClasses);if(r||i)return void s.addAndRemoveClasses(t,n?r:i,n?i:r);const o=s.getAttribute(t,E.DisplayValue,"auto");if("disabled"==o)return;const a=e.getAttachedAs(t,"UFDisplayValue",(()=>"auto"==o?t.style.display:o));t.style.display=n?a:"none"}processDataAttributeWithPostfix(e,t,s=20){document.querySelectorAll(`[${e}]`).forEach((e=>t(e,"")));for(let n=1;n<=s;n++){const s=`-${n}`;document.querySelectorAll(`[${e}${s}]`).forEach((e=>t(e,s)))}}getTargetElements(e,t){var s,n;switch(t){case"":case _.Self:return[e];case _.Parent:return this.buildListFromOneElement(e.parentElement);case _.Next:return this.buildListFromOneElement(e.nextElementSibling);case _.Previous:return this.buildListFromOneElement(e.previousElementSibling);case _.Grandparent:return this.buildListFromOneElement(null!==(n=null===(s=e.parentElement)||void 0===s?void 0:s.parentElement)&&void 0!==n?n:null);case _.Dialog:return this.buildListFromOneElement(e.closest("dialog"));default:return[...document.querySelectorAll(t)]}}addSourceElement(e,t,n,r,i,o,a=""){const l=s.getAttribute(t,e);if(!l)return;document.querySelectorAll(l).forEach((e=>this.addTargetElement(t,e,n,r,i,o,a)))}addTargetElement(e,t,s,n,r,i,o=""){s.includes(t)||(s.push(t),r&&i&&(o?f.instance.addListenerForGroup(o,t,r,(()=>i(t))):t.addEventListener(r,(()=>i(t))))),n.add(t,e)}buildListFromOneElement(e){return e?[e]:[]}handleDomContentLoaded(){this.m_isInitialized||(this.m_isInitialized=!0,this.scan())}}!function(e){e.NoFilter="data-uf-no-filter",e.FilterTable="data-uf-filter-table",e.HeaderRow="data-uf-header-row",e.RowNoMatch="data-uf-row-no-match"}(v||(v={}));class C extends S{scan(){f.instance.removeAllForGroup(v.FilterTable);const e=document.createElement("style");e.innerHTML=`[${v.RowNoMatch}] { display: none !important; }`,document.head.appendChild(e);document.querySelectorAll("input["+v.FilterTable+"]").forEach((e=>this.initFilterInput(e)))}initFilterInput(e){const t=e.getAttribute(v.FilterTable);if(!t)return;const s=document.querySelectorAll(t);if(!s.length)return;const n=new Map;s.forEach((e=>n.set(e,this.getAllowedColumns(e)))),f.instance.addListenerForGroup(v.FilterTable,e,"input",(()=>this.applyFilter(e.value,n)))}getAllowedColumns(e){const t=[],s=e.querySelector("tr["+v.HeaderRow+"]");return s&&s.querySelectorAll("th").forEach((e=>{t.push(null==e.attributes.getNamedItem(v.NoFilter))})),t}applyFilter(e,t){const s=e.toLowerCase();t.forEach(((e,t)=>this.applyFilterToTable(t,s,e)))}applyFilterToTable(e,t,s){e.querySelectorAll("tr").forEach((e=>{if(null!=e.attributes.getNamedItem(v.HeaderRow))return;let n=!1,r=0;e.querySelectorAll("td").forEach((e=>{(r>=s.length||s[r])&&null==e.attributes.getNamedItem(v.NoFilter)&&e.textContent&&(n||(n=e.textContent.toLowerCase().indexOf(t)>=0)),r++})),n?e.removeAttribute(v.RowNoMatch):e.attributes.setNamedItem(document.createAttribute(v.RowNoMatch))})),e.dispatchEvent(new Event(C.RowsChangedEvent))}}C.RowsChangedEvent="rowsChanged";class A{constructor(){this.m_map=new Map}add(e,t){this.m_map.has(e)||this.m_map.set(e,new Set),this.m_map.get(e).add(t)}remove(e,t){if(this.m_map.has(e)){const s=this.m_map.get(e);s.delete(t),0===s.size&&this.m_map.delete(e)}}removeValue(e){const t=this.findKey(e);t&&this.remove(t,e)}clear(){this.m_map.clear()}get(e){if(this.m_map.has(e)){const t=this.m_map.get(e);return Array.from(t)}return[]}getKeys(){return Array.from(this.m_map.keys())}has(e){return this.m_map.has(e)}hasValue(e,t){return this.m_map.has(e)&&this.m_map.get(e).has(t)}isEmpty(){return 0===this.m_map.size}findKey(e){for(const t of this.m_map.keys())if(this.hasValue(t,e))return t;return null}get keyCount(){return this.m_map.size}get valueTotalCount(){let e=0;return this.m_map.forEach((t=>e+=t.size)),e}}!function(e){e.ClickStylingSelector="data-uf-click-styling-selector",e.ClickStylingClasses="data-uf-click-styling-classes"}(y||(y={}));!function(e){e.DetailsCollapse="data-uf-details-collapse",e.DetailsExpand="data-uf-details-expand"}(b||(b={}));class T extends S{constructor(){super(...arguments),this.m_clickableElements=[],this.m_collapsableElements=new A,this.m_expandableElements=new A}scan(){super.scan(),this.clear(),this.addSourceAndTargetElements(b.DetailsCollapse,this.m_clickableElements,this.m_collapsableElements,"click",(e=>this.handleCollapseClick(e)),b.DetailsCollapse),this.addSourceAndTargetElements(b.DetailsExpand,this.m_clickableElements,this.m_expandableElements,"click",(e=>this.handleExpandClick(e)),b.DetailsCollapse)}clear(){f.instance.removeAllForGroup(b.DetailsCollapse),this.m_clickableElements.length=0,this.m_collapsableElements.clear(),this.m_expandableElements.clear()}handleCollapseClick(e){this.m_collapsableElements.has(e)&&this.m_collapsableElements.get(e).forEach((e=>e.open=!1))}handleExpandClick(e){this.m_expandableElements.has(e)&&this.m_expandableElements.get(e).forEach((e=>e.open=!0))}}!function(e){e.ShowDialog="data-uf-show-dialog"}(w||(w={}));class F extends S{scan(){f.instance.removeAllForGroup(w.ShowDialog),f.instance.addListenersForGroup(w.ShowDialog,"["+w.ShowDialog+"]","click",(e=>()=>this.handleShowDialogClick(e)))}getDialog(e){const t=s.getAttribute(e,w.ShowDialog);if(!t)return null;const n=s.get(t);return n||console.error(`Dialog not found: ${t}`),n}handleShowDialogClick(e){const t=this.getDialog(e);if(!t)return;const n=s.buildDataAttributesMap(e);s.copyAttributes(e,n,t),t.showModal()}}var x,L,I,k,H,N,P,M,D;!function(e){e.EventAction="data-uf-event-action",e.EventEvents="data-uf-event-events",e.EventTarget="data-uf-event-target",e.EventData="data-uf-event-data",e.EventAttribute="data-uf-event-attribute",e.EventState="data-uf-event-state",e.EventKey="data-uf-event-key",e.EventPreventDefault="data-uf-event-prevent-default",e.ClickAction="data-uf-click-action",e.ClickTarget="data-uf-click-target",e.ClickData="data-uf-click-data",e.ClickAttribute="data-uf-click-attribute",e.LoadAction="data-uf-load-action",e.LoadTarget="data-uf-load-target",e.LoadData="data-uf-load-data",e.LoadAttribute="data-uf-load-attribute"}(x||(x={})),function(e){e.RemoveFromDom="remove-from-dom",e.Hide="hide",e.Show="show",e.Toggle="toggle",e.ToggleClass="toggle-class",e.RemoveFromClass="remove-from-class",e.AddToClass="add-to-class",e.ShowModal="show-modal",e.ShowNonModal="show-non-modal",e.Close="close",e.SetAttribute="set-attribute",e.Reload="reload",e.SetValue="set-value",e.SetText="set-text",e.SetHtml="set-html"}(L||(L={}));class O extends S{constructor(){super(...arguments),this.m_hasLoaded=!1}scan(){f.instance.removeAllForGroup(x.EventAction),this.processDataAttributeWithPostfix(x.EventAction,((e,t)=>this.processEventElement(e,t))),this.processDataAttributeWithPostfix(x.ClickAction,((e,t)=>this.processClickableElement(e,t))),this.m_hasLoaded||(this.processDataAttributeWithPostfix(x.LoadAction,((e,t)=>this.processLoadElement(e,t))),this.m_hasLoaded=!0)}processEventElement(e,t=""){const n=s.getAttribute(e,x.EventAction+t),r=s.getAttribute(e,x.EventEvents+t),i=s.getAttribute(e,x.EventTarget+t),o=s.getAttribute(e,x.EventData+t),a=s.getAttribute(e,x.EventAttribute+t),l=s.getAttribute(e,x.EventState+t),c=s.getAttribute(e,x.EventKey+t),u=s.hasAttribute(e,x.EventPreventDefault+t);r&&n&&f.instance.addListenerForGroup(x.EventAction,e,r,(t=>this.performActionForEvent(t,e,n,i,o,a,l,c,u)))}processClickableElement(e,t=""){const n=s.getAttribute(e,x.ClickAction+t),r=s.getAttribute(e,x.ClickTarget+t),i=s.getAttribute(e,x.ClickData+t),o=s.getAttribute(e,x.ClickAttribute+t);n&&f.instance.addListenerForGroup(x.EventAction,e,"click",(()=>this.performAction(e,n,r,i,o)))}processLoadElement(e,t=""){const n=s.getAttribute(e,x.LoadAction+t),r=s.getAttribute(e,x.LoadTarget+t),i=s.getAttribute(e,x.LoadData+t),o=s.getAttribute(e,x.LoadAttribute+t);n&&this.performAction(e,n,r,i,o)}performActionForEvent(e,t,s,n,r,i,o,a,l){if(e instanceof ToggleEvent){if(o&&o!==e.newState)return}else if(e instanceof KeyboardEvent&&a!==e.key)return;this.performAction(t,s,n,r,i),l&&e.preventDefault()}performAction(e,t,s,n,r){""===s&&(s=t===L.Close?"_dialog":"_self");this.getTargetElements(e,s).forEach((e=>this.performActionOnElement(e,t,n,r)))}performActionOnElement(e,t,n,r){switch(t){case L.RemoveFromDom:e.remove();break;case L.Hide:this.showElement(e,!1);break;case L.Show:this.showElement(e,!0);break;case L.Toggle:this.showElement(e,"none"===e.style.display);break;case L.ToggleClass:e.classList.toggle(n);break;case L.RemoveFromClass:e.classList.remove(n);break;case L.AddToClass:e.classList.add(n);break;case L.ShowModal:e instanceof HTMLDialogElement&&e.showModal();break;case L.ShowNonModal:e instanceof HTMLDialogElement&&e.show();break;case L.Close:e instanceof HTMLDialogElement&&e.close();break;case L.SetAttribute:e.setAttribute(r,n);break;case L.Reload:s.reload();break;case L.SetValue:s.assignValue(e,n);break;case L.SetText:e.innerText=n;break;case L.SetHtml:e.innerHTML=n}}}!function(e){e.NoFilter="data-uf-no-filter",e.FilterInput="data-uf-filter-input",e.NoMatch="data-uf-filter-no-match",e.Group="data-uf-filter-group",e.Container="data-uf-filter-container"}(I||(I={}));class G extends S{scan(){f.instance.removeAllForGroup(I.FilterInput),G.s_styledAdded||(this.addStyle(),G.s_styledAdded=!0),this.initFilterInputs()}initFilterInputs(){document.querySelectorAll("input["+I.FilterInput+"]").forEach((e=>this.initFilterInput(e)))}initFilterInput(e){const t=e.getAttribute(I.FilterInput);if(!t)return;const n=document.querySelectorAll(t),r=[],i=[];n.forEach((e=>{r.push(this.getFilterableChildren(e)),i.push(...s.findAllForAttribute(I.Container,null,e))})),f.instance.addListenerForGroup(I.FilterInput,e,"input",(()=>this.applyFilter(e.value,r,i)))}getFilterableChildren(e){const t=e.querySelectorAll(`:not([${I.NoFilter}])`),s=new Map,n=[];return t.forEach((e=>{var t;const r=e.getAttribute(I.Group);r?(s.has(r)||s.set(r,[]),null===(t=s.get(r))||void 0===t||t.push(e)):n.push([e])})),[...n,...Array.from(s.values())]}applyFilter(e,t,s){const n=e.toLowerCase();t.forEach((e=>this.applyFilterToParent(n,e))),s.forEach((e=>this.applyFilterToContainer(n,e)))}applyFilterToParent(e,t){t.forEach((t=>this.applyFilterToGroupedChildren(e,t)))}applyFilterToGroupedChildren(e,t){let s=!1;t.forEach((t=>{var n;t.hasAttribute(I.NoFilter)||s||(s=(null!==(n=t.innerText)&&void 0!==n?n:"").toLowerCase().indexOf(e)>=0)})),t.forEach((e=>{s?e.removeAttribute(I.NoMatch):e.attributes.setNamedItem(document.createAttribute(I.NoMatch))}))}applyFilterToContainer(e,t){let s=!1;Array.from(t.children).forEach((t=>{var n;return s||(s=(null!==(n=t.innerText)&&void 0!==n?n:"").toLowerCase().indexOf(e)>=0)})),s?t.removeAttribute(I.NoMatch):t.attributes.setNamedItem(document.createAttribute(I.NoMatch))}addStyle(){const e=document.createElement("style");e.innerHTML=`[${I.NoMatch}] { display: none !important; }`,document.head.appendChild(e)}}G.s_styledAdded=!1,function(e){e.Type="data-uf-toggle-type",e.Property="data-uf-toggle-property",e.Selector="data-uf-toggle-selector",e.Change="data-uf-toggle-change",e.Classes="data-uf-toggle-classes",e.ClassesMatch="data-uf-toggle-classes-match",e.Condition="data-uf-toggle-condition",e.Value="data-uf-toggle-value",e.Values="data-uf-toggle-values",e.ValuesSeparator="data-uf-toggle-values-separator",e.Required="data-uf-toggle-required",e.Target="data-uf-toggle-target",e.Compare="data-uf-toggle-compare"}(k||(k={})),function(e){e[e.Auto=0]="Auto",e[e.Value=1]="Value",e[e.Valid=2]="Valid",e[e.Property=3]="Property"}(H||(H={})),function(e){e[e.Auto=0]="Auto",e[e.None=1]="None",e[e.Enable=2]="Enable",e[e.Visible=3]="Visible",e[e.Required=4]="Required",e[e.NotRequired=5]="NotRequired"}(N||(N={})),function(e){e[e.Any=0]="Any",e[e.All=1]="All",e[e.None=2]="None"}(P||(P={})),function(e){e[e.None=0]="None",e[e.Match=1]="Match",e[e.NoMatch=2]="NoMatch"}(M||(M={})),function(e){e[e.Equal=0]="Equal",e[e.Contain=1]="Contain",e[e.Inside=2]="Inside",e[e.LessThan=3]="LessThan",e[e.LessThanOrEqual=4]="LessThanOrEqual",e[e.GreaterThan=5]="GreaterThan",e[e.GreaterThanOrEqual=6]="GreaterThanOrEqual"}(D||(D={}));const q=`\n  [${k.Type}], \n  [${k.Selector}], \n  [${k.Change}], \n  [${k.Classes}], \n  [${k.ClassesMatch}], \n  [${k.Condition}],\n  [${k.Compare}]\n`;class V extends S{constructor(){super(...arguments),this.m_radioGroups=new A}scan(){f.instance.removeAllForGroup(k.Type),this.m_radioGroups.clear();document.querySelectorAll(q).forEach((e=>{const t=this.buildToggleData(e);t&&(t.formElements.forEach((s=>this.initializeFormElement(s,e,t))),this.updateToggleElement(e,t))})),this.installRadioGroupFix()}getToggleType(e){switch(s.getAttribute(e,k.Type)){case"value":return H.Value;case"valid":return H.Valid;case"property":return H.Property;default:return H.Auto}}getToggleChange(e){switch(s.getAttribute(e,k.Change)){case"enable":return N.Enable;case"visible":return N.Visible;case"none":return N.None;case"required":return N.Required;case"not-required":return N.NotRequired;default:return N.Auto}}getToggleCondition(e){switch(s.getAttribute(e,k.Condition)){case"any":return P.Any;case"none":return P.None;default:return P.All}}getToggleCompare(e){switch(s.getAttribute(e,k.Compare)){case"contain":return D.Contain;case"inside":return D.Inside;case"lt":return D.LessThan;case"lte":return D.LessThanOrEqual;case"gt":return D.GreaterThan;case"gte":return D.GreaterThanOrEqual;default:return D.Equal}}getToggleRequired(e){switch(s.getAttribute(e,k.Required)){case"match":return M.Match;case"no-match":return M.NoMatch;default:return M.None}}getFormElements(e){const t=s.getAttribute(e,k.Selector)||"";if(""===t){const t=e.closest("form");return t?[t]:[]}return[...document.querySelectorAll(t)]}buildToggleData(e){const t=this.getFormElements(e);if(!t.length)return null;const n=t[0],r=n.tagName,i="FORM"===r,o="INPUT"===r&&["checkbox","radio"].includes(n.type),a="INPUT"===r&&"file"===n.type,l="IMG"===r;let c=this.getToggleType(e),u=this.getToggleChange(e);const h=this.getToggleRequired(e),d=s.getAttribute(e,k.Classes),m=s.getAttribute(e,k.ClassesMatch),g=this.getToggleCondition(e),p=this.getToggleCompare(e),f=s.getAttribute(e,k.Property,"checked"),E=s.getAttribute(e,k.ValuesSeparator,","),_=s.getAttribute(e,k.Values)||s.getAttribute(e,k.Value)||"",v=_.length>0?_.split(E):[];if(o&&0===v.length&&v.push("true"),u===N.Auto)if(d.length+m.length>0)u=N.None;else switch(e.tagName){case"INPUT":case"BUTTON":case"SELECT":u=N.Enable;break;default:u=N.Visible}i?c=H.Valid:c===H.Auto&&(c=o?H.Property:v.length>0||a?H.Value:H.Valid);return{type:c,property:f,change:u,cssClassesMatch:m,cssClassesNoMatch:d,condition:g,compare:p,required:h,isForm:i,isImage:l,formElements:t,values:v,target:s.getAttribute(e,k.Target)}}isValidToggleTarget(t){if(t.isForm)return t.formElements[0].checkValidity();let s=t.condition!==P.Any;return t.formElements.every((n=>{let r=null,i="";switch(t.type){case H.Valid:r=n.checkValidity();break;case H.Property:i=e.getAs(n,t.property,"").toString();break;default:i=e.getAs(n,t.isImage?"src":"value","")}switch(null===r&&(r=this.isValidValue(i,t)),t.condition){case P.Any:if(r)return s=!0,!1;break;case P.All:if(!r)return s=!1,!1;break;case P.None:if(r)return s=!1,!1}return!0})),s}isValidValue(e,t){if(0==t.values.length||t.isImage)return e.length>0;if(t.compare==D.Equal)return t.values.indexOf(e)>=0;const s=e.toString().toLowerCase();if(t.compare==D.Inside)return t.values.some((e=>s.includes(e.toString().toLowerCase())));if(t.compare==D.Contain)return t.values.some((e=>e.toString().toLowerCase().includes(s)));const n=parseFloat(s);return!isNaN(n)&&(t.compare==D.LessThan?t.values.some((e=>n<parseFloat(e))):t.compare==D.LessThanOrEqual?t.values.some((e=>n<=parseFloat(e))):t.compare==D.GreaterThan?t.values.some((e=>n>parseFloat(e))):t.compare==D.GreaterThanOrEqual&&t.values.some((e=>n>=parseFloat(e))))}updateToggleElement(e,t){const s=this.isValidToggleTarget(t);this.getTargetElements(e,t.target).forEach((e=>this.updateToggleTargetElement(e,t,s)))}updateToggleTargetElement(t,n,r){switch(n.cssClassesMatch.length&&s.toggleClasses(t,n.cssClassesMatch,r),n.cssClassesNoMatch.length&&s.toggleClasses(t,n.cssClassesNoMatch,!r),n.change){case N.Enable:e.set(t,"disabled",!r);break;case N.Visible:this.showElement(t,r)}switch(n.required){case M.Match:e.set(t,"required",r);break;case M.NoMatch:e.set(t,"required",!r)}}initializeFormElement(e,t,s){f.instance.addListenerForGroup(k.Type,e,"click keyup keydown input change",(()=>this.updateToggleElement(t,s))),"INPUT"==e.tagName&&this.checkRadioGroup(e)}checkRadioGroup(e){if("radio"===e.type){const t=e.name;t&&this.m_radioGroups.add(t,e)}}installRadioGroupFix(){this.m_radioGroups.getKeys().forEach((e=>{const t=document.querySelectorAll(`input[name="${e}"][type="radio"]`),s=this.m_radioGroups.get(e);t.forEach((e=>{f.instance.addListenerForGroup(k.Type,e,"change",(()=>this.dispatchChangeEvent(s,e)))}))}))}dispatchChangeEvent(e,t){t.checked&&e.forEach((e=>{t==e||e.checked||e.dispatchEvent(new Event("change"))}))}}class R{setObject(e,t){this.setString(e,JSON.stringify(t))}getObject(e,t){try{return this.has(e)?JSON.parse(this.getString(e,"")):t}catch(e){return t}}setNumber(e,t){this.setString(e,""+t)}getNumber(e,t){if(this.has(e)){const s=parseFloat(this.getString(e,""));return isNaN(s)?t:s}return t}setInteger(e,t){this.setString(e,""+t)}getInteger(e,t){if(this.has(e)){const s=parseInt(this.getString(e,""),10);return isNaN(s)?t:s}return t}setBoolean(e,t){this.setString(e,t?"1":"0")}getBoolean(e,t){return this.has(e)?"1"===this.getString(e,""):t}}class z extends R{setString(e,t){try{window.localStorage.setItem(e,t)}catch(e){}}getString(e,t){if(!e||0===e.length)return t;try{return window.localStorage.hasOwnProperty(e)?window.localStorage.getItem(e):t}catch(e){}return t}remove(e){try{window.localStorage.removeItem(e)}catch(e){}}has(e){try{return e in window.localStorage}catch(e){}return!1}clear(){try{window.localStorage.clear()}catch(e){}}}var W,j;!function(e){e.Sorting="data-uf-grid-sorting",e.SortControl="data-uf-sort-control",e.SortButton="data-uf-sort-button",e.SortKey="data-uf-sort-key",e.GroupSize="data-uf-group-size",e.ItemContainer="data-uf-item-container",e.ItemGroup="data-uf-item-group",e.SortValue="data-uf-sort-value",e.SortAscending="data-uf-sort-ascending",e.SortDescending="data-uf-sort-descending",e.StorageId="data-uf-storage-id",e.GridBody="data-uf-grid-body"}(W||(W={})),function(e){e[e.None=0]="None",e[e.Number=1]="Number",e[e.Text=2]="Text",e[e.Date=3]="Date"}(j||(j={}));const B=`:scope > :not([${W.ItemContainer}],[${W.ItemGroup}],[${W.SortControl}])`;function U(e){switch(s.getAttribute(e,W.SortControl)){case"number":return j.Number;case"text":return j.Text;case"date":return j.Date;default:return j.None}}class X extends S{constructor(){super(...arguments),this.m_localStorage=new z,this.m_grids=new Map}scan(){f.instance.removeAllForGroup(W.Sorting),this.m_grids.clear();s.findAllForAttribute(W.Sorting).forEach((e=>this.initGrid(e)))}resort(e){this.m_grids.has(e)&&this.sortGrid(this.m_grids.get(e))}initGrid(e){const t=this.getControls(e);if(!t.length)return;const n=parseInt(s.getAttribute(e,W.GroupSize,t.length.toString())),r=this.getContainers(e),i=this.getGroups(e),o=this.groupItems(e,n);if(r.length+i.length+o.length==0)return;const a={grid:e,controls:t,sortInfo:this.getSortInfo(e,t),itemContainers:r,itemGroups:i,groupedItems:o,ascendingClasses:s.getAttribute(e,W.SortAscending),descendingClasses:s.getAttribute(e,W.SortDescending)};this.m_grids.set(e,a),t.filter((e=>e.type!=j.None)).forEach((e=>f.instance.addListenerForGroup(W.Sorting,e.button,"click",(()=>this.handleControlClick(e,a))))),this.addClasses(a),this.sortGrid(a)}getControls(e){const t=s.findAllForAttribute(W.SortControl,null,e);return Array.from(t).map(((e,t)=>{var n;return{control:e,key:s.getAttribute(e,W.SortKey,t.toString()),button:null!==(n=s.findForAttribute(W.SortButton,null,e))&&void 0!==n?n:e,type:U(e)}}))}getContainers(e){const t=s.findAllForAttribute(W.ItemContainer,null,e);return Array.from(t).map((e=>({containerElement:e,items:this.getDataItems(Array.from(e.children))})))}getDataItems(e){return e.filter((e=>e instanceof HTMLElement)).map(((e,t)=>({element:e,key:s.getAttribute(e,W.SortKey,t.toString())})))}getGroups(e){const t=new Map;s.findAllForAttribute(W.ItemGroup,null,e).forEach((e=>{const n=s.getAttribute(e,W.ItemGroup,"");""!=n&&(t.has(n)||t.set(n,[]),t.get(n).push(e))}));return Array.from(t.values()).map((e=>({items:this.getDataItems(e)})))}groupItems(e,t){var n;const r=null!==(n=s.findForAttribute(W.GridBody,null,e))&&void 0!==n?n:e,i=Array.from(r.querySelectorAll(B)),o=[];for(let e=0;e<i.length;e+=t){const s=i.slice(e,e+t);o.push({items:this.getDataItems(s)})}return o}getSortInfo(e,t){const n={key:t[0].key,descending:!1},r=s.getAttribute(e,W.StorageId);if(!r||!this.m_localStorage.has(r))return n;const i=this.m_localStorage.getObject(r,n);for(const e of t)if(e.key==i.key)return i;return n}saveSortInfo(e,t){const n=s.getAttribute(e,W.StorageId);n&&this.m_localStorage.setObject(n,t)}addClasses(e){const t=this.getControl(e.sortInfo.key,e.controls);s.addClasses(t.control,e.sortInfo.descending?e.descendingClasses:e.ascendingClasses)}removeClasses(e){const t=this.getControl(e.sortInfo.key,e.controls);s.removeClasses(t.control,e.sortInfo.descending?e.descendingClasses:e.ascendingClasses)}getControl(e,t){for(const s of t)if(s.key===e)return s;throw new Error(`Can not find control for ${e}`)}sortGrid(e){const t=this.getControl(e.sortInfo.key,e.controls),s=e.sortInfo.descending?-1:1;e.itemContainers.sort(((e,n)=>s*this.compareGroup(e,n,t))),e.itemGroups.sort(((e,n)=>s*this.compareGroup(e,n,t))),e.groupedItems.sort(((e,n)=>s*this.compareGroup(e,n,t))),this.reorderContainers(e.itemContainers),this.reorderGroups(e.itemGroups,`[${W.ItemGroup}]`),this.reorderGroups(e.groupedItems,B)}findDataItem(e,t){for(const s of t)if(s.key==e)return s;return null}getValue(e){var t;return null==e?null:null!==(t=e.element.getAttribute(W.SortValue))&&void 0!==t?t:e.element.innerText}compareGroup(e,t,s){const n=this.findDataItem(s.key,e.items),r=this.findDataItem(s.key,t.items),i=this.getValue(n),o=this.getValue(r);switch(s.type){case j.Text:return this.compareText(i,o);case j.Number:return this.compareNumber(i,o);case j.Date:return this.compareDate(i,o);default:return 0}}compareText(e,t){return e===t?0:null===e?1:null===t?-1:e.localeCompare(t)}compareNumber(e,t){if(e===t)return 0;if(null===e)return 1;if(null===t)return-1;const s=parseFloat(e),n=parseFloat(t);return this.compareParsedNumbers(s,n)}compareParsedNumbers(e,t){const s=Number.isNaN(e),n=Number.isNaN(t);return s&&n?0:s?1:n?-1:e-t}compareDate(e,t){if(e===t)return 0;if(null===e)return 1;if(null===t)return-1;const s=Date.parse(e),n=Date.parse(t);return this.compareParsedNumbers(n,s)}reorderContainers(e){this.reorderElements(e.map((e=>e.containerElement)),new Map,`[${W.ItemContainer}]`)}reorderGroups(e,t){const s=new Map;for(const n of e)this.reorderElements(n.items.map((e=>e.element)),s,t)}reorderElements(e,t,n){for(const r of e){const e=r.parentElement;if(null!=e){if(t.has(e))s.insertAfter(e,r,t.get(e));else{const t=e.querySelector(n);if(null==t)continue;e.insertBefore(t,r)}t.set(e,r)}}}handleControlClick(e,t){this.removeClasses(t),t.sortInfo.key==e.key?t.sortInfo.descending=!t.sortInfo.descending:(t.sortInfo.key=e.key,t.sortInfo.descending=!1),this.addClasses(t),this.sortGrid(t),this.saveSortInfo(t.grid,t.sortInfo),t.grid.dispatchEvent(new Event(X.SortedEvent))}}var Y,K,J,Q,Z,ee,te,se,ne,re,ie;X.SortedEvent="sorted",function(e){e.PopupContent="data-uf-popup-content",e.PopupPosition="data-uf-popup-position",e.PopupHide="data-uf-popup-hide",e.PopupTransition="data-uf-popup-transition",e.PopupDeltaX="data-uf-popup-delta-x",e.PopupDeltaY="data-uf-popup-delta-y"}(Y||(Y={})),function(e){e.Vertical="vertical",e.Horizontal="horizontal",e.Overlap="overlap"}(K||(K={})),function(e){e.Tree="tree",e.Always="always"}(J||(J={}));class oe extends S{scan(){document.querySelectorAll("["+Y.PopupContent+"]").forEach((e=>{this.initializePopup(e)}))}initializePopup(e){const t=document.querySelectorAll(e.getAttribute(Y.PopupContent)),s=e.getAttribute(Y.PopupHide)||J.Always,n=e.getAttribute(Y.PopupPosition)||K.Horizontal,r={element:Array.from(t),autoHide:s==J.Tree?l.Tree:l.Always,content:e,transition:e.getAttribute(Y.PopupTransition)||c.None,elementX:parseInt(e.getAttribute(Y.PopupDeltaX)||"0"),elementY:parseInt(e.getAttribute(Y.PopupDeltaY)||"0")};switch(n){case K.Vertical:r.positionX=o.Adjacent,r.positionY=o.Overlap;break;case K.Horizontal:r.positionX=o.Overlap,r.positionY=o.Adjacent;break;case K.Overlap:r.positionX=o.Overlap,r.positionY=o.Overlap}new h(r),e.removeAttribute(Y.PopupContent)}}function ae(e){switch(s.getAttribute(e,Q.SortType)){case"number":return ee.Number;case"text":return ee.Text;case"date":return ee.Date;default:return ee.None}}!function(e){e.Sorting="data-uf-table-sorting",e.SortType="data-uf-sort-type",e.SortValue="data-uf-sort-value",e.SortLocation="data-uf-sort-location",e.HeaderRow="data-uf-header-row",e.SortAscending="data-uf-sort-ascending",e.SortDescending="data-uf-sort-descending",e.StorageId="data-uf-storage-id"}(Q||(Q={})),function(e){e[e.Top=0]="Top",e[e.Middle=1]="Middle",e[e.Bottom=2]="Bottom"}(Z||(Z={})),function(e){e[e.None=0]="None",e[e.Number=1]="Number",e[e.Text=2]="Text",e[e.Date=3]="Date"}(ee||(ee={}));class le{constructor(e){switch(this.m_columnData=[],this.m_element=e,s.getAttribute(e,Q.SortLocation)){case"top":this.m_sortLocation=Z.Top;break;case"bottom":this.m_sortLocation=Z.Bottom;break;default:this.m_sortLocation=Z.Middle}}static get(t){return e.getAttachedAs(t,"ufRowData",(()=>new le(t)))}buildColumnData(e){this.m_columnData.length=0,this.m_element.querySelectorAll("td").forEach(((t,s)=>{this.m_columnData.push((()=>this.getColumnValue(t,e[s])))}))}getColumn(e){const t=this.m_columnData[e];return"function"==typeof t?t():t}get sortLocation(){return this.m_sortLocation}getColumnValue(e,t){var s,n;const r=null!==(n=null===(s=e.attributes.getNamedItem(Q.SortValue))||void 0===s?void 0:s.value)&&void 0!==n?n:e.textContent;if(null==r)return"";switch(t){case ee.Date:const e=Date.parse(r.toString().trim());return isNaN(e)?0:-e;case ee.Number:return parseFloat(r.toString().trim());case ee.Text:return r.toString().toLowerCase().trim();default:return""}}}class ce{constructor(e){if(this.m_index=-1,this.m_descending=!0,this.m_localStorage=new z,this.m_ascendingCssClasses=s.getAttribute(e,Q.SortAscending),this.m_descendingCssClasses=s.getAttribute(e,Q.SortDescending),this.m_storageKey=s.getAttribute(e,Q.StorageId),this.m_storageKey&&this.m_localStorage.has(this.m_storageKey)){const e=this.m_localStorage.getObject(this.m_storageKey,{index:this.m_index,descending:this.m_descending});this.m_index=e.index,this.m_descending=e.descending}}get headerCssClasses(){return this.m_descending?this.m_descendingCssClasses:this.m_ascendingCssClasses}get index(){return this.m_index}set index(e){this.m_index=e,this.save()}get descending(){return this.m_descending}set descending(e){this.m_descending=e,this.save()}static get(t){return e.getAttachedAs(t,"ufTableSortData",(()=>new ce(t)))}save(){this.m_storageKey&&this.m_localStorage.setObject(this.m_storageKey,{index:this.m_index,descending:this.m_descending})}}class ue extends S{scan(){f.instance.removeAllForGroup(Q.Sorting);document.querySelectorAll(`table[${Q.Sorting}]`).forEach((e=>this.initTable(e)))}resort(e){this.sortTable(e)}getCompareNumberFunction(e,t){return(s,n)=>{const r=le.get(s),i=le.get(n);if(r.sortLocation==i.sortLocation){const s=r.getColumn(e),n=i.getColumn(e);return t?s-n:n-s}return r.sortLocation==Z.Top||i.sortLocation==Z.Bottom?-1:1}}getCompareTextFunction(e,t){return(s,n)=>{const r=le.get(s),i=le.get(n);if(r.sortLocation==i.sortLocation){const s=r.getColumn(e),n=i.getColumn(e);if(s===n)return 0;if(""===s)return t?1:-1;if(""===n)return t?-1:1;if(isNaN(s)||isNaN(n)){const e=""+s,r=""+n;return t?e.localeCompare(r):r.localeCompare(e)}return s-n}return r.sortLocation==Z.Top||i.sortLocation==Z.Bottom?-1:1}}getCompareFunction(e,t,s){switch(ae(e)){case ee.Number:return this.getCompareNumberFunction(t,s);case ee.Date:return this.getCompareNumberFunction(t,!s);default:return this.getCompareTextFunction(t,s)}}getHeaderCell(e,t){const s=e.querySelector("["+Q.HeaderRow+"]");if(!s)return null;const n=s.querySelectorAll("th");return n.length<=t?null:n[t]}sortRowsWithinBody(e,t){let s=null;const n=[];e.querySelectorAll("tr").forEach((e=>{e.attributes.getNamedItem(Q.HeaderRow)?s=e:n.push(e)})),n.sort(t),n.forEach((t=>{s?s.nextElementSibling!=t&&t.parentElement.insertBefore(t,s.nextSibling):e.prepend(t),s=t}))}sortRowsWithinTable(e,t){let s=null;const n=[];let r=null;e.querySelectorAll("tr").forEach((e=>{e.attributes.getNamedItem(Q.HeaderRow)?n.push(e):r=e})),r?(n.sort(t),s=r,n.forEach((e=>{e.parentElement.insertBefore(e,s.nextSibling),s=e}))):console.error("No header row found in table")}sortTable(e){const t=ce.get(e),s=this.getHeaderCell(e,t.index);if(!s)return;const n=this.getCompareFunction(s,t.index,t.descending),r=e.querySelector("tbody");r?this.sortRowsWithinBody(r,n):this.sortRowsWithinTable(e,n),e.dispatchEvent(new Event(ue.TableSortedEvent))}initTable(e){const t=e.querySelector("["+Q.HeaderRow+"]");if(!t)return;const n=ce.get(e);let r=-1;const i=[];t.querySelectorAll("th").forEach(((t,s)=>{const o=ae(t);if(o!=ee.None){r<0&&(r=s),n.index===s&&(r=n.index),i.push(o);const a=t.querySelector("button");a&&f.instance.addListenerForGroup(Q.Sorting,a,"click",(()=>this.handleClick(e,s)))}else i.push(ee.None)})),n.index=r,r<0||(e.querySelectorAll("tr").forEach((e=>le.get(e).buildColumnData(i))),this.sortTable(e),s.addClasses(this.getHeaderCell(e,n.index),n.headerCssClasses))}handleClick(e,t){const n=ce.get(e);s.removeClasses(this.getHeaderCell(e,n.index),n.headerCssClasses),n.descending=n.index!=t||!n.descending,n.index=t,s.addClasses(this.getHeaderCell(e,n.index),n.headerCssClasses),this.sortTable(e)}}ue.TableSortedEvent="tableSorted",function(e){e.ImagePreview="data-uf-image-preview",e.ImageName="data-uf-image-name",e.ImageWidth="data-uf-image-width",e.ImageHeight="data-uf-image-height",e.ImageSize="data-uf-image-size",e.ImageType="data-uf-image-type"}(te||(te={}));class he extends S{constructor(){super(...arguments),this.m_inputElements=[],this.m_previewElements=new A,this.m_nameElements=new A,this.m_widthElements=new A,this.m_heightElements=new A,this.m_sizeElements=new A,this.m_typeElements=new A}scan(){this.clear(),this.addElements(),this.m_inputElements.forEach((e=>this.clearElements(e)))}clear(){f.instance.removeAllForGroup(te.ImagePreview),this.m_inputElements.length=0,this.m_heightElements.clear(),this.m_nameElements.clear(),this.m_previewElements.clear(),this.m_sizeElements.clear(),this.m_typeElements.clear(),this.m_widthElements.clear()}addElements(){this.addElement(te.ImagePreview,this.m_previewElements),this.addElement(te.ImageName,this.m_nameElements),this.addElement(te.ImageWidth,this.m_widthElements),this.addElement(te.ImageHeight,this.m_heightElements),this.addElement(te.ImageSize,this.m_sizeElements),this.addElement(te.ImageType,this.m_typeElements)}addElement(e,t){this.addSourceAndTargetElements(e,this.m_inputElements,t,"input",(e=>this.handleFileChange(e)),te.ImagePreview)}loadFile(e,t){const s=new Image;s.onload=()=>this.processFile(e,t,s),s.src=URL.createObjectURL(t)}processFile(e,t,s){this.m_previewElements.get(e).forEach((e=>e.src=s.src)),this.m_nameElements.get(e).forEach((e=>e.textContent=t.name)),this.m_widthElements.get(e).forEach((e=>e.textContent=s.width.toString())),this.m_heightElements.get(e).forEach((e=>e.textContent=s.height.toString())),this.m_sizeElements.get(e).forEach((e=>e.textContent=t.size.toString())),this.m_typeElements.get(e).forEach((e=>e.textContent=t.type))}clearElements(e){this.m_previewElements.get(e).forEach((e=>e.src="")),this.m_nameElements.get(e).forEach((e=>e.textContent="-")),this.m_widthElements.get(e).forEach((e=>e.textContent="-")),this.m_heightElements.get(e).forEach((e=>e.textContent="-")),this.m_sizeElements.get(e).forEach((e=>e.textContent="-")),this.m_typeElements.get(e).forEach((e=>e.textContent="-"))}handleFileChange(e){null!=e.files&&(e.files.length>0?this.loadFile(e,e.files[0]):this.clearElements(e))}}!function(e){e.SelectUrl="data-uf-select-url"}(se||(se={}));class de extends S{scan(){f.instance.removeAllForGroup(se.SelectUrl);document.querySelectorAll("["+se.SelectUrl+"]").forEach((e=>f.instance.addListenerForGroup(se.SelectUrl,e,"change",(()=>this.handleSelectUrl(e)))))}handleSelectUrl(e){const t=s.getAttribute(e,se.SelectUrl);t&&(window.location.href=t.replace(/\$value\$/g,e.value))}}!function(e){e.ShareHover="data-uf-share-hover"}(ne||(ne={}));class me extends S{scan(){f.instance.removeAllForGroup(ne.ShareHover);document.querySelectorAll("["+ne.ShareHover+"]").forEach((e=>{f.instance.addListenerForGroup(ne.ShareHover,e,"mouseover",(()=>this.handleShareHover(e,!0))),f.instance.addListenerForGroup(ne.ShareHover,e,"mouseout",(()=>this.handleShareHover(e,!1)))}))}handleShareHover(e,t){const n=s.getAttribute(e,"href");if(!n)return;document.querySelectorAll(`[data-${ne.ShareHover}][href="${n}"]`).forEach((e=>{const n=s.getAttribute(e,ne.ShareHover);n&&(t?s.addClasses(e,n):s.removeClasses(e,n))}))}}!function(e){e.PageRefresh="data-uf-page-refresh"}(re||(re={}));class ge extends S{scan(){f.instance.removeAllForGroup(re.PageRefresh);document.querySelectorAll("["+re.PageRefresh+"]").forEach((e=>f.instance.addListenerForGroup(re.PageRefresh,e,"click",(()=>this.handleClick(e)))))}handleClick(e){const t=parseInt(s.getAttribute(e,re.PageRefresh));setTimeout((()=>{window.location.replace(window.location.href)}),Math.max(1,t))}}!function(e){e.ManageSubmit="data-uf-manage-submit"}(ie||(ie={}));class pe extends S{scan(){f.instance.removeAllForGroup(ie.ManageSubmit);document.querySelectorAll("["+ie.ManageSubmit+"]").forEach((e=>this.addElementsListener(e.querySelectorAll("input, select, textarea"),e)))}addElementsListener(e,t){e.forEach((e=>this.addElementListener(e,t))),this.handleFormChange(t)}addElementListener(e,t){f.instance.addListenerForGroup(ie.ManageSubmit,e,"click keyup keydown input change",(()=>this.handleFormChange(t)))}setElementsDisabled(e,t){e.forEach((e=>this.setElementDisabled(e,t)))}setElementDisabled(e,t){e.disabled=t}handleFormChange(e){const t=e.checkValidity();this.setElementsDisabled(e.querySelectorAll("input[type=submit]"),!t),this.setElementsDisabled(e.querySelectorAll("button[type=submit]"),!t),this.setElementsDisabled(e.querySelectorAll("button:not([type])"),!t)}}class fe extends S{constructor(){super(),this.m_helpers=[],this.registerHelper(new C),this.registerHelper(this.m_tableSortHelper=new ue),this.registerHelper(new he),this.registerHelper(new de),this.registerHelper(new me),this.registerHelper(new ge),this.registerHelper(new pe),this.registerHelper(new V),this.registerHelper(new T),this.registerHelper(new oe),this.registerHelper(new O),this.registerHelper(new F),this.registerHelper(new G),this.registerHelper(this.m_gridSortHelper=new X)}static get instance(){return null===fe.m_instance&&(fe.m_instance=new fe),fe.m_instance}init(e=[]){e.forEach((e=>{this.registerHelper(e)})),super.init()}resortTable(e){this.m_tableSortHelper&&this.m_tableSortHelper.resort(e)}resortGrid(e){this.m_gridSortHelper&&this.m_gridSortHelper.resort(e)}scan(){this.m_helpers.forEach((e=>{e.scan()}))}registerHelper(e){this.m_helpers.push(e)}}var Ee,_e;fe.m_instance=null,function(e){e[e.Contain=0]="Contain",e[e.Cover=1]="Cover",e[e.Stretch=2]="Stretch"}(Ee||(Ee={})),function(e){e.Png="image/png",e.Jpeg="image/jpeg"}(_e||(_e={}));var ve,ye;!function(e){e[e.degrees=0]="degrees",e[e.radians=1]="radians"}(ve||(ve={}));class be{constructor(){}static get angleUnit(){return be.s_angleUnit}static set angleUnit(e){be.s_angleUnit=e}static toRadians(e){return be.angleUnit===ve.degrees?e*Math.PI/180:e}static fromRadians(e){return be.angleUnit===ve.degrees?180*e/Math.PI:e}static rotate(e,t,s,n=0,r=0){e=be.toRadians(e);const i=t-n,o=s-r,a=Math.sin(e),l=Math.cos(e);return{x:i*l-o*a+n,y:i*a+o*l+r}}static angle(e,t,s,n){return be.fromRadians(Math.atan2(n-t,s-e))}static distance(e,t,s,n){const r=e-s,i=t-n;return Math.sqrt(r*r+i*i)}static randomInteger(e,t){return void 0===t&&(t=e,e=0),Math.floor(e+Math.random()*(t-e+1))}static moveTo(e,t,s){return e>t?Math.min(e,t+s):Math.max(e,t-s)}static moveOverTime(e,t,s,n){return t+(e-t)*Math.max(0,Math.min(s,n))/n}static minmax(e,t,s){return Math.max(e,Math.min(t,s))}static isOverlapping(e,t,s,n,r,i,o,a){return!(e>=r+o||r>=e+s||t>=i+a||i>=t+n)}static isNumeric(e){return!Array.isArray(e)&&e-parseFloat(e)+1>=0}static getNumber(e,t){return this.isNumeric(e)?e:t}static xor(e,t){return!(!e&&!t||e&&t)}}be.s_angleUnit=ve.degrees;class we{constructor(){}static append(e,t,s){return e.length<=0?t:t.length<=0?e:e+s+t}static escapeHtml(e){return e.replace(/[&<>"'\n\t\r]/g,(e=>this.s_escapeHtmlMap.get(e)))}static generateCode(e){let t="",s=1;for(let n=0;n<e;n++){let e;for(;e=s>2?be.randomInteger(0,9):be.randomInteger(0,61),0===e||24===e||1===e||47===e;);e<10?(t+=String.fromCharCode(e+48),s=0):e<36?(t+=String.fromCharCode(e+65-10),s++):(t+=String.fromCharCode(e+97-10-26),s++)}return t}static twoDigits(e){return e<10?"0"+e:e.toString()}static threeDigits(e){return("000"+e.toString()).substring(-3)}static replace(e,t){for(const[s,n]of Object.entries(t))e=e.replace(s,n);return e}static hexTwoDigits(e){return("0"+Math.min(255,Math.max(0,e)).toString(16)).substring(-2)}static hexFourDigits(e){return("000"+Math.min(65535,Math.max(0,e)).toString(16)).substring(-4)}static join(e,...t){return t.reduce(((t,s)=>(s.startsWith(e)&&(s=s.substring(e.length)),!t.endsWith(e)&&t.length&&(t+=e),t+s)))}static joinPath(...e){return this.join("/",...e)}static getOrdinalPost(e){switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}static getOrdinalNumber(e){return e.toString()+this.getOrdinalPost(e)}static asString(e,t=""){switch(e){case null:case void 0:case NaN:return t;default:return e.toString()}}static formatFileSize(e){let t;return t=e<1024?e+" bytes":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB",t}static getFileExtension(e){const t=e.lastIndexOf("/");t>0&&(e=e.substring(t+1));const s=e.lastIndexOf(".");return!(s<0)&&e.substring(s+1).toLowerCase()}static lpad(e,t,s=" "){for(;e.length<t;)e=s+e;return e}static rpad(e,t,s=" "){for(;e.length<t;)e+=s;return e}static addParameter(e,t,s){return s&&(t=t+"="+s),t=(e.indexOf("?")>=0?"&":"?")+t,e+t}static sprintf(e,...t){const s=new RegExp("%(?!%)((?<param_index>\\d+)\\$)?(\\{(?<prop_typed>\\w+)\\})?(?<add_plus>\\+)?(?<pad_zero>0|'(?<pad_char>.))?(?<left_justify>\\-)?(?<min_size>\\d+)?(\\.(?<max_size>\\d+))?(?<format_type>\\((?<prop_text>\\w+)\\)|[bcdefFousxX])","g");let n="",r=0,i=0,o=null;for(let a=s.exec(e);null!=a;a=s.exec(e)){if(!a.groups)continue;n+=e.substring(r,a.index),r=a.index+a[0].length;let s=null;const l=a.groups.prop_text?a.groups.prop_text:a.groups.prop_typed?a.groups.prop_typed:"";let c,u=null;if(a.groups.param_index){const e=Number(a.groups.param_index);if(e>=t.length){n+="%",r=a.index+1;continue}s=t[e],u=s}else if(0===l.length||null==o){if(i>=t.length){n+="%",r=a.index+1;continue}s=t[i++]}l.length>0&&(null==u&&(null==o&&(o=s),u=o),s=u[l]),a.groups.prop_text&&(a.groups.format_type="s");let h=a.groups.min_size?Number(a.groups.min_size):-1,d=a.groups.max_size?Number(a.groups.max_size):-1;switch(a.groups.format_type){case"s":switch(s){case null:c="null";break;case void 0:c="undefined";break;default:c=s.toString()}break;case"c":c=String.fromCharCode(Number(s));break;case"b":c=Number(s).toString(2);break;case"x":c=Number(s).toString(16).toLowerCase();break;case"X":c=Number(s).toString(16).toUpperCase();break;case"u":c=Number(s).toString();break;case"d":const e=Math.floor(Number(s));c=(e>=0&&a.groups.add_plus?a.groups.add_plus:"")+e.toString();break;case"o":c=Number(s).toString(8);break;case"e":case"f":case"F":const t=Number(s);c=t>=0&&a.groups.add_plus?a.groups.add_plus:"",d<0&&(d=6),c+="e"===a.groups.format_type?t.toExponential(d):t.toFixed(d),d=-1;break;default:throw new Error('Unknown format specifier "'+a.groups.format_type+'"')}if(h>=0){const e=a.groups.pad_char?a.groups.pad_char:a.groups.pad_zero?"0":" ";c=a.groups.left_justify?we.rpad(c,h,e):we.lpad(c,h,e)}d>=0&&(c=c.substring(0,d)),n+=c}return n+=e.substring(r),n=n.replace(/%%/g,"%"),n}static printf(e,...t){console.log(we.sprintf.apply(null,arguments))}}we.s_escapeHtmlMap=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["\n","<br/>"],["\t",""],["\r",""]]);!function(e){e.Get="GET",e.Post="POST",e.Put="PUT",e.Patch="PATCH",e.Delete="DELETE"}(ye||(ye={}));var Se;!function(e){e[e.Factory=0]="Factory",e[e.Constructor=1]="Constructor",e[e.Static=2]="Static",e[e.SingletonFactory=3]="SingletonFactory",e[e.SingletonConstructor=4]="SingletonConstructor"}(Se||(Se={}));class Ce{static registerFactory(e,t,s=[]){Ce.s_services.set(e,{type:Se.Factory,factoryProvider:t,constructorProvider:null,staticProvider:null,instance:null,services:s,factory:null})}static registerSingletonFactory(e,t,s=[]){Ce.s_services.set(e,{type:Se.SingletonFactory,factoryProvider:t,constructorProvider:null,staticProvider:null,instance:null,services:s,factory:null})}static registerConstructor(e,t,s=[]){Ce.s_services.set(e,{type:Se.Constructor,factoryProvider:null,constructorProvider:t,staticProvider:null,instance:null,services:s,factory:null})}static registerSingletonConstructor(e,t,s=[]){Ce.s_services.set(e,{type:Se.SingletonConstructor,factoryProvider:null,constructorProvider:t,staticProvider:null,instance:null,services:s,factory:null})}static registerStatic(e,t){Ce.s_services.set(e,{type:Se.Static,factoryProvider:null,constructorProvider:null,staticProvider:t,instance:null,services:[],factory:null})}static has(e){return Ce.s_services.has(e)}static getInstance(e){Ce.validateService(e);const t=Ce.s_services.get(e);switch(t.type){case Se.Constructor:return new t.constructorProvider(...Ce.getServiceInstancesFromNames(t.services));case Se.Factory:return t.factoryProvider(...Ce.getServiceInstancesFromNames(t.services));case Se.Static:return t.staticProvider;case Se.SingletonConstructor:return t.instance||(t.instance=new t.constructorProvider(...Ce.getServiceInstancesFromNames(t.services))),t.instance;case Se.SingletonFactory:return t.instance||(t.instance=t.factoryProvider(...Ce.getServiceInstancesFromNames(t.services))),t.instance}}static call(e,t){return e(...Ce.getServiceInstancesFromNames(t))}static construct(e,t){return new e(...Ce.getServiceInstancesFromNames(t))}static validateService(e){if(!Ce.has(e))throw new Error(`Can not find service: ${e}`)}static getServiceInstancesFromNames(e){return e.map((e=>e.endsWith("()")?Ce.getServiceFactory(e.slice(0,-2)):Ce.getInstance(e)))}static getServiceFactory(e){Ce.validateService(e);const t=Ce.s_services.get(e);return t.factory||(t.factory=()=>Ce.getInstance(e)),t.factory}}Ce.s_services=new Map;var Ae=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class Te{constructor(){}static delay(e){return Ae(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout(t,e)))}))}}var Fe=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class xe{constructor(e){this.m_element=s.get(e)}get element(){return this.m_element}show(){return Fe(this,void 0,void 0,(function*(){this.m_element.dispatchEvent(new Event(xe.ShowStartedEvent)),yield this.performShow(),this.m_element.dispatchEvent(new Event(xe.ShowDoneEvent))}))}hide(){return Fe(this,void 0,void 0,(function*(){this.m_element.dispatchEvent(new Event(xe.HideStartedEvent)),yield this.performHide(),this.m_element.dispatchEvent(new Event(xe.HideDoneEvent))}))}performShow(){return Fe(this,void 0,void 0,(function*(){s.fadeIn(this.element,500),yield Te.delay(500)}))}performHide(){return Fe(this,void 0,void 0,(function*(){s.fadeOut(this.element,500),yield Te.delay(500)}))}}xe.ShowStartedEvent="uf-showable-show-started",xe.ShowDoneEvent="uf-showable-show-done",xe.HideStartedEvent="uf-showable-hide-started",xe.HideDoneEvent="uf-showable-hide-done";fe.instance.init(),lib={}})();