var lib;(()=>{"use strict";class e{constructor(){}static getOrFail(e,t){if(t in e)return e[t];throw new Error(`Missing ${t} in object`)}static getOrFailAs(t,s){return e.getOrFail(t,s)}static get(e,t,s){return t in e?e[t]:s}static getAs(e,t,s){return t in e?e[t]:s}static set(e,t,s){t in e&&(e[t]=s)}static setOrFail(e,t,s){if(!(t in e))throw new Error(`Missing ${t} in object`);e[t]=s}static getAttachedAs(e,t,s){return t in e||(e[t]=s()),e[t]}static equalProperties(t,s,n=!1){for(let i in s)if(s.hasOwnProperty(i)){if(!t.hasOwnProperty(i))return!1;switch(typeof s[i]){case"object":if(!e.equalProperties(t[i],s[i],n))return!1;break;case"string":let r=t[i],o=s[i];if(n&&(r=r.toLowerCase(),o=o.toLowerCase()),r!==o)return!1;break;default:if(t[i]!==s[i])return!1}}return!0}static backupProperties(t,s){const n=Array.isArray(t)?[]:{};for(const i in s)if(s.hasOwnProperty(i)&&t.hasOwnProperty(i)){let r=s[i];n[i]="object"==typeof r?e.backupProperties(t[i],s[i]):t[i]}return n}static applyProperties(t,s){for(const n in s)if(s.hasOwnProperty(n)&&t.hasOwnProperty(n)){const i=s[n];"function"==typeof i?i(t,n):"object"==typeof i?e.applyProperties(t[n],s[n]):t[n]=s[n]}return t}static deepCopy(e){const t={};return Object.keys(e).forEach((s=>{const n=e[s];t[s]="object"==typeof n?this.deepCopy(n):n})),t}static contains(e,...t){return t.findIndex((t=>e.hasOwnProperty(t)))>=0}static combineObjects(t,s=!0,n="__init"){if(0===t.length)return{};const i={},r=[];return t.forEach((t=>e.copyProperties(t,i,n,r))),r.length&&e.callMethods(i,r,s?void 0:n),i}static copyProperty(e,t,s){const n=Object.getOwnPropertyDescriptor(t,e);n&&(n.get||n.set)?Object.defineProperty(s,e,n):s[e]=t[e]}static copyProperties(t,s,n,i){if(n&&!i)throw new Error("Missing separator list while a separator name was specified");Object.getOwnPropertyNames(t).forEach((r=>{n&&r===n?i.push(t[r]):e.copyProperty(r,t,s)}))}static callMethods(e,t,s){const n=()=>t.forEach((t=>t.call(e)));s?e[s]=n:n()}static instanceOf(e,t){if("function"!=typeof t)return!1;try{return e instanceof t}catch(e){return!1}}}const t="ufDisplayBackup";class s{constructor(){}static escapeHtml(e){return e.replace(/[&<>"'\n\t\r]/g,(e=>this.s_escapeHtmlMap.get(e)))}static convertToPlain(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}static addClasses(e,t){e&&t&&t.split(" ").forEach((t=>e.classList.add(t.trim())))}static removeClasses(e,t){e&&t&&t.split(" ").forEach((t=>e.classList.remove(t.trim())))}static toggleClasses(e,t,s){e&&t&&t.split(" ").forEach((t=>e.classList.toggle(t.trim(),s)))}static addAndRemoveClasses(e,t,s){this.addClasses(e,t),this.removeClasses(e,s)}static addListener(e,t,s){const n="string"==typeof e?document.querySelector(e):e;if(null==n)return()=>{};const i=t.split(" ").filter((e=>e.trim().length>0));return i.forEach((e=>n.addEventListener(e,s))),()=>{i.forEach((e=>n.removeEventListener(e,s)))}}static addBodyListener(e,t,s){const n=t.split(" ").filter((e=>e.trim().length>0)),i=t=>{if(null==t.target||!(t.target instanceof HTMLElement))return;const n=t.target.closest(e);if(!n)return;const i=s(n);i instanceof Function?i(t):"handleEvent"in i&&i.handleEvent(t)};return n.forEach((e=>document.body.addEventListener(e,i,!0))),()=>n.forEach((e=>document.body.removeEventListener(e,i,!0)))}static addListeners(e,t,n){const i="string"==typeof e?document.querySelectorAll(e):e,r=[];return i.forEach((e=>r.push(s.addListener(e,t,n(e))))),()=>r.forEach((e=>e()))}static getAttribute(e,t,s=""){var n,i;return null!==(i=null===(n=e.attributes.getNamedItem(t))||void 0===n?void 0:n.value)&&void 0!==i?i:s}static hasAttribute(e,t){return null!=e.attributes.getNamedItem(t)}static get(e,t){const s="string"==typeof e?(t||document).querySelector(e):e;if(null==s)throw new Error(`Can not find element for ${e}`);return s}static getForId(e){const t=document.getElementById(e);if(null==t)throw new Error(`Can not find element for ${e}`);return t}static fadeIn(e,t=400){e.style.opacity="0",e.style.transition=`opacity ${t}ms`,setTimeout((()=>e.style.opacity="1"),0)}static fadeOut(e,t=400){e.style.opacity="1",e.style.transition=`opacity ${t}ms`,setTimeout((()=>e.style.opacity="0"),0)}static createAs(e){const t=(new DOMParser).parseFromString(e,"text/html").body.firstChild;return t.remove(),t}static empty(e){for(;e.firstChild;)e.removeChild(e.firstChild)}static getFirstParent(e,t){for(let s=e.parentElement;s;s=s.parentElement)if(s.matches(t))return s;return null}static getParents(e,t){const s=[];for(let n=e.parentElement;n;n=n.parentElement)t&&!n.matches(t)||s.push(n);return s}static show(s,n){s.style.display=null!=n?n:e.getAttachedAs(s,t,(()=>"block"))}static hide(s){e.getAttachedAs(s,t,(()=>s.style.display)),s.style.display="none"}static copyAttributes(e,t,s){const n=s||document;for(const s in t){const i=e.getAttribute(s);if(null===i)continue;const r=n.querySelectorAll(t[s]);r&&r.forEach((e=>{this.assignValue(e,i)||(e instanceof HTMLImageElement?e.src=i:e instanceof HTMLElement&&(e.innerText=i))}))}}static getAttributeNames(e){const t=[];for(let s=0;s<e.attributes.length;s++){const n=e.attributes[s];t.push(n.name)}return t}static buildDataAttributesMap(e){const t={};for(let s=0;s<e.attributes.length;s++){const n=e.attributes[s].name;n.startsWith("data-uf-")||n.startsWith("data-")&&(t[n]=`[${n}]`)}return t}static reload(){window.history.replaceState&&window.history.replaceState(null,"",window.location.href),window.location.href=window.location.href}static assignValue(e,t){if(e instanceof HTMLInputElement)"checkbox"===e.type||"radio"===e.type?e.checked="true"===t||"1"===t||"checked"===t:(e.value=t,e.dispatchEvent(new InputEvent("input")));else if(e instanceof HTMLTextAreaElement)e.value=t,e.dispatchEvent(new InputEvent("input"));else{if(!(e instanceof HTMLSelectElement))return!1;e.value=t}return e.dispatchEvent(new Event("change")),!0}static isVisible(e,t=!0){const s=window.getComputedStyle(e);return"none"!==s.display&&"hidden"!==s.visibility&&"0"!==s.opacity&&((0!==e.offsetWidth||0!==e.offsetHeight)&&(!t||!e.parentElement||this.isVisible(e.parentElement)))}static getForAttribute(e,t=null,s){let n=e;null!==t&&(n+=`="${t}"`);const i=(s||document).querySelector(`[${n}]`);if(null==i)throw new Error(`Can not find element for attribute ${n}`);return i}static findForAttribute(e,t=null,s){let n=e;return null!==t&&(n+=`="${t}"`),(s||document).querySelector(`[${n}]`)}static findAllForAttribute(e,t=null,s){let n=e;return null!==t&&(n+=`="${t}"`),(s||document).querySelectorAll(`[${n}]`)}static insertAfter(e,t,s){s.nextElementSibling?e.insertBefore(t,s.nextElementSibling):e.appendChild(t)}}s.s_escapeHtmlMap=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["\n","<br/>"],["\t",""],["\r",""]]);class n{static get ClickEvent(){return this.s_isTouchSupported?"touchstart":"click"}static get DownEvent(){return this.s_isTouchSupported?"touchstart":"mousedown"}static get UpEvent(){return this.s_isTouchSupported?"touchend":"mouseup"}static get MoveEvent(){return this.s_isTouchSupported?"touchmove":"mousemove"}static get isTouchSupported(){return this.s_isTouchSupported}static get isAudioSupported(){return"Audio"in window}static get hasLocalStorage(){return"localStorage"in window}static get isMobileSafari(){const e=window.navigator.userAgent,t=/iPhone|iPad|iPod/i.test(e),s=/WebKit/i.test(e);return t&&s&&!/CriOS/i.test(e)}static get isIOS(){const e=window.navigator.userAgent;return/iPhone|iPad|iPod/i.test(e)&&!/IEMobile/i.test(e)}static get isAndroid(){const e=window.navigator.userAgent;return/Android/i.test(e)&&!/IEMobile/i.test(e)}static get isMobileWindows(){const e=window.navigator.userAgent;return/IEMobile/i.test(e)}static get isInternetExplorer(){const e=window.navigator.userAgent;return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}static getPageXY(e){if(e instanceof TouchEvent)if(e.touches){const t=e.touches[0];if(t)return{pageX:t.pageX,pageY:t.pageY}}else if(e.changedTouches){const t=e.changedTouches[0];if(t)return{pageX:t.pageX,pageY:t.pageY}}if(e instanceof MouseEvent)return{pageX:e.pageX,pageY:e.pageY};throw new Error("Can not determine pageX and pageY from event.")}static getParameterByName(e){e=e.replace(/\[/,"\\[").replace(/\]/,"\\]");const t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}static getCssRule(e){const t=e.toLowerCase();if(document.styleSheets)for(const e of document.styleSheets){let s,n=0;do{if(s=e.cssRules?e.cssRules[n]:e.rules[n],s&&s.selectorText.toLowerCase()===t)return s;n++}while(s)}return!1}static getIEVersion(){const e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>=0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>=0){const t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}const s=e.indexOf("Edge/");return s>=0&&parseInt(e.substring(s+5,e.indexOf(".",s)),10)}static getAndroidVersion(){if(this.isAndroid){const e=navigator.userAgent.match(/Android [\d+\.]{2,5}/i);return null!==e&&e[0].replace("Android ","")}return!1}static isClicked(e,t){const s=t.target;return e===s||e.contains(s)}static animate(e,t,n){const i=s.get(e),r=e=>{e.target===i&&(i.removeEventListener("animationend",r),s.removeClasses(i,t),n&&n())};i.addEventListener("animationend",r),s.addClasses(i,t)}static transition(e,t,n){const i=s.get(e),r=e=>{e.target===i&&(i.removeEventListener("transitionend",r),n&&n())};i.addEventListener("transitionend",r),s.toggleClasses(i,t)}static getBackgroundImageUrl(e){const t=s.get(e).style.backgroundImage;if(t){const e=t.match(/^url\(["']?(.+?)["']?\)$/);return e&&e.length>1&&e[1]?e[1]:null}return null}static findParent(e,t){for(let n=s.get(e).parentElement;n;n=n.parentElement)if(t(n))return n;return null}static atBottom(e){const t=s.get(e);return t.scrollTop+t.clientHeight>=t.scrollHeight-10}static scrollToBottom(e){const t=s.get(e);t.scrollTop=t.scrollHeight}static loadImage(e,t,s){const n=new Image;return t&&n.addEventListener("load",(()=>t(n))),s&&n.addEventListener("error",(()=>s(n))),n.src=e,n}}var i,r,o,a,l,c,u;n.s_isTouchSupported=!!("ontouchstart"in window||"msMaxTouchPoints"in window.navigator||window.navigator.maxTouchPoints),function(e){e.Showing="showing",e.Visible="visible",e.Hiding="hiding",e.Hidden="hidden"}(i||(i={})),function(e){e.floater="data-uf-floater"}(r||(r={})),function(e){e.Adjacent="adjacent",e.Overlap="overlap",e.Relative="relative"}(o||(o={})),function(e){e.None="none",e.Show="show",e.Toggle="toggle"}(a||(a={})),function(e){e.None="none",e.Always="always",e.Tree="tree",e.Outside="outside"}(l||(l={})),function(e){e.None="none",e.Fade="fade",e.SlideVertical="slide-vertical",e.SlideHorizontal="slide-horizontal",e.Custom="custom"}(c||(c={}));class h{constructor(e={}){this.m_options={screenX:.5,screenY:.5,element:null,positionX:o.Adjacent,positionY:o.Overlap,floaterX:0,floaterY:0,elementX:0,elementY:0,width:null,height:null,autoShow:a.Toggle,autoHide:l.Outside,transition:c.None,inBounds:!1,content:"",onInitialized:null,onShown:null,onHidden:null,customShow:null,customHide:null,canHide:null},this.m_floaterElement=s.createAs(`<div style="overflow: hidden; position: absolute; left: 0; top: 0; pointer-events: all; z-index: 99999; visibility: hidden; width: max-content; height: max-content" ${r.floater}="1"></div>`),this.m_contentElement=s.createAs('<div style="position: relative; left: 0; top: 0; width: max-content; height: max-content"></div>'),this.m_elements=null,this.m_selectedElement=null,this.m_nextElement=null,this.m_state=i.Hidden,this.m_floaterWidth=0,this.m_floaterHeight=0,this.m_contentWidth=0,this.m_contentHeight=0,this.m_enabled=!0,this.m_removeListeners=[],this.m_removeElementListeners=[],this.m_transitionTimer=null,this.m_options=Object.assign(this.m_options,e),this.m_contentElement.append(this.m_options.content),this.m_floaterElement.append(this.m_contentElement),document.body.append(this.m_floaterElement),setTimeout((()=>{this.copyDimensions(),this.m_floaterElement.remove(),this.hideFloaterElement(),this.m_removeListeners.push(s.addListener(document,"mouseup touchend touchcancel",(e=>this.handleDocumentUp(e))),s.addListener(window,"resize",(()=>this.handleWindowResize()))),this.m_options.onInitialized&&this.m_options.onInitialized(this)}),1),this.refreshElements()}destroy(){this.destroyElements(),this.removeListeners(),this.removeElementListeners(),this.m_floaterElement.remove()}setOptions(e){this.m_options=Object.assign(this.m_options,e),this.refreshElements(),this.refreshContent()}hide(){return this.hideFloater()}show(){this.showFloater(null)}positionAndShow(e){this.setOptions({element:e}),this.show()}updatePosition(){this.visible&&this.updateFloaterPosition()}refreshContent(){this.visible&&(s.empty(this.m_contentElement),this.m_contentElement.append(this.m_options.content),setTimeout((()=>{this.copyDimensions(),this.updateFloaterPosition()})))}get visible(){return this.m_state!==i.Hidden}get enabled(){return this.m_enabled}set enabled(e){this.m_enabled=e}get width(){return this.m_options.width||this.m_floaterWidth}get height(){return this.m_options.height||this.m_floaterHeight}get contentWidth(){return this.m_contentWidth}get contentHeight(){return this.m_contentHeight}removeListeners(){this.m_removeListeners.forEach((e=>e())),this.m_removeListeners.length=0}removeElementListeners(){console.debug("removeElementListeners"),this.m_removeElementListeners.forEach((e=>e())),this.m_removeElementListeners.length=0}addElementListeners(e){s.getParents(e).forEach((e=>this.m_removeElementListeners.push(s.addListener(e,"scroll",(()=>this.handleScrolling()))))),this.m_removeElementListeners.push(s.addListener(window,"scroll",(()=>this.handleScrolling())))}showFloaterElementWithTransition(){if(this.m_options.transition===c.Custom&&this.m_options.customShow)this.m_options.customShow(this.m_floaterElement,(()=>this.handleShowDone()));else switch(this.m_options.transition){case c.Fade:this.showFloaterElementFade();break;case c.SlideVertical:this.showFloaterElementVerticalSlide();break;case c.SlideHorizontal:this.showFloaterElementHorizontalSlide();break;default:this.showFloaterElementImmediately()}}hideFloaterElementWithTransition(){if(this.m_options.transition===c.Custom&&this.m_options.customHide)this.m_options.customHide(this.m_floaterElement,(()=>this.handleHideDone()));else switch(this.m_options.transition){case c.Fade:this.hideFloaterElementFade();break;case c.SlideVertical:this.hideFloaterElementVerticalSlide();break;case c.SlideHorizontal:this.hideFloaterElementHorizontalSlide();break;default:this.hideFloaterElementImmediately()}}showFloaterElementImmediately(){this.showFloaterElement(),setTimeout((()=>this.handleShowDone()))}hideFloaterElementImmediately(){this.hideFloaterElement(),setTimeout((()=>this.handleHideDone()))}showFloaterElementFade(){this.showFloaterElement(),this.m_floaterElement.style.transition="",this.m_floaterElement.style.opacity="0",setTimeout((()=>{this.m_floaterElement.style.transition="opacity 0.15s",this.m_floaterElement.style.opacity="1"}),10),this.m_transitionTimer=setTimeout((()=>{this.handleShowDone()}),160)}hideFloaterElementFade(){this.m_floaterElement.style.transition="",this.m_floaterElement.style.opacity="1",this.m_floaterElement.style.transition="opacity 0.15s",this.m_floaterElement.style.opacity="0",this.m_transitionTimer=setTimeout((()=>{this.hideFloaterElement(),this.handleHideDone()}),150)}showFloaterElementVerticalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="0 -100%",setTimeout((()=>{this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="0 0"}),10),this.m_transitionTimer=setTimeout((()=>{this.handleShowDone()}),160)}hideFloaterElementVerticalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="0 0",this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="0 -100%",this.m_transitionTimer=setTimeout((()=>{this.handleHideDone()}),150)}showFloaterElementHorizontalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="-100% 0",setTimeout((()=>{this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="0 0"}),10),this.m_transitionTimer=setTimeout((()=>{this.handleShowDone()}),160)}hideFloaterElementHorizontalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="0 0",this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="-100% 0",this.m_transitionTimer=setTimeout((()=>{this.handleHideDone()}),150)}hideFloaterElement(){this.m_floaterElement.style.display="none"}showFloaterElement(){this.m_floaterElement.style.display="block"}updateFloaterPosition(){this.m_selectedElement?this.updatePositionForElement():this.updatePositionInDocument()}updatePositionForElement(){const e=this.m_selectedElement.getBoundingClientRect(),t=this.m_options.width||this.m_floaterWidth,s=this.m_options.height||this.m_floaterHeight,n=document.documentElement.clientWidth,i=document.documentElement.clientHeight;let r=this.getFloaterPosition(this.m_options.positionX,n,e.left,e.width,this.m_options.elementX,t,this.m_options.floaterX),o=this.getFloaterPosition(this.m_options.positionY,i,e.top,e.height,this.m_options.elementY,s,this.m_options.floaterY);this.m_options.inBounds&&(r=Math.max(0,Math.min(n-t,r)),o=Math.max(0,Math.min(i-s,o))),this.m_floaterElement.style.left=`${r}px`,this.m_floaterElement.style.top=`${o}px`,this.m_options.width&&(this.m_floaterElement.style.width=`${this.m_options.width}px`),this.m_options.height&&(this.m_floaterElement.style.height=`${this.m_options.height}px`)}getFloaterPosition(e,t,s,n,i,r,a){switch(e){case o.Overlap:return s+r>=t-10?n+s-r-i:s+i;case o.Adjacent:return s+n+r>=t-10?s-r-i:s+n+i;default:return s+n*i-r*a}}updatePositionInDocument(){const e=this.m_options.width||this.m_floaterElement.offsetWidth,t=this.m_options.height||this.m_floaterElement.offsetHeight,s=document.documentElement.clientWidth,n=document.documentElement.clientHeight;this.m_floaterElement.style.left="number"==typeof this.m_options.screenX?(s-e)*this.m_options.screenX+"px":this.m_options.screenX,this.m_floaterElement.style.top="number"==typeof this.m_options.screenY?(n-t)*this.m_options.screenY+"px":this.m_options.screenY,this.m_options.width&&(this.m_floaterElement.style.width=`${this.m_options.width}px`),this.m_options.height&&(this.m_floaterElement.style.height=`${this.m_options.height}px`)}refreshElements(){this.destroyElements(),this.m_options.element&&this.m_options.autoShow!==a.None&&(this.m_elements=Array.isArray(this.m_options.element)?this.m_options.element:[s.get(this.m_options.element)])}destroyElements(){this.m_elements&&(this.removeElementListeners(),this.m_elements=null,this.m_floaterElement&&h.s_floaterToElementMap.delete(this.m_floaterElement))}copyDimensions(){this.m_floaterWidth=this.m_floaterElement.offsetWidth,this.m_floaterHeight=this.m_floaterElement.offsetHeight,this.m_options.content instanceof HTMLElement&&(this.m_contentWidth=this.m_options.content.offsetWidth,this.m_contentHeight=this.m_options.content.offsetHeight)}showFloater(e){this.m_state!==i.Visible&&this.m_state!==i.Showing&&(this.stopTransitionTimer(),e&&(this.addElementListeners(e),this.m_selectedElement=e,h.s_floaterToElementMap.set(this.m_floaterElement,e)),this.m_floaterElement.style.visibility="hidden",this.showFloaterElement(),null==h.s_container.parentElement&&document.body.append(h.s_container),h.s_container.append(this.m_floaterElement),this.updateFloaterPosition(),this.m_floaterElement.style.visibility="visible",this.hideFloaterElement(),this.m_state=i.Showing,this.showFloaterElementWithTransition())}moveFloater(e){this.m_state===i.Visible||this.m_state===i.Showing?(this.m_nextElement=e,this.hideFloater()):this.showFloater(e)}hideFloater(e=null){return this.m_state===i.Hidden||this.m_state===i.Hiding||!(this.m_options.canHide&&!this.m_options.canHide(e))&&(this.stopTransitionTimer(),this.m_state=i.Hiding,setTimeout((()=>this.hideFloaterElementWithTransition())),!0)}isRelated(e){for(;;){const t=s.getParents(e,`[${r.floater}]`);if(0===t.length)return!1;const n=t[0];if(!h.s_floaterToElementMap.has(n))return!1;if(n===this.m_floaterElement)return!0;e=h.s_floaterToElementMap.get(n)}}findClickedElement(e){if(!this.m_elements)return null;for(const t of this.m_elements)if(n.isClicked(t,e))return t;return null}stopTransitionTimer(){this.m_transitionTimer&&(clearTimeout(this.m_transitionTimer),this.m_transitionTimer=null)}handleShowDone(){this.m_state=i.Visible,this.m_options.onShown&&this.m_options.onShown()}handleHideDone(){this.m_floaterElement.remove(),h.s_container.hasChildNodes()||h.s_container.remove(),this.m_state=i.Hidden,this.m_options.onHidden&&this.m_options.onHidden(),this.m_selectedElement&&(this.removeElementListeners(),this.m_selectedElement=null,h.s_floaterToElementMap.delete(this.m_floaterElement)),this.m_nextElement&&(this.showFloater(this.m_nextElement),this.m_nextElement=null)}handleDocumentUp(e){if(!this.m_enabled)return;const t=this.findClickedElement(e);if(t)switch(this.m_state){case i.Hidden:case i.Hiding:return void this.showFloater(t);case i.Visible:case i.Showing:return void(t==this.m_selectedElement?this.m_options.autoShow===a.Toggle&&this.hideFloater(e):this.moveFloater(t))}this.m_state===i.Hidden||this.m_options.autoHide!==l.Always&&(this.m_options.autoHide!==l.Outside||n.isClicked(this.m_floaterElement,e)||null!=this.m_selectedElement&&n.isClicked(this.m_selectedElement,e))&&(this.m_options.autoHide!==l.Tree||this.isRelated(e.target))||this.hideFloater(e)}handleWindowResize(){this.m_state!=i.Hidden&&this.updateFloaterPosition()}handleScrolling(){this.m_state!=i.Hidden&&this.updateFloaterPosition()}}h.s_container=s.createAs('<div style="position: fixed; top: 0; left: 0; pointer-events: none;"></div>'),h.s_floaterToElementMap=new Map,function(e){e.dataOver="data-uf-over",e.dataDisabled="data-uf-disabled"}(u||(u={}));var m;!function(e){e.Idle="Idle",e.Preloading="Preloading",e.Preloaded="Preloaded",e.Loading="Loading",e.Playing="Playing",e.Stopped="Stopped"}(m||(m={}));class d{constructor(){}static get(e){return e?e instanceof jQuery?e:$(e):e}static addEventNamespace(e,t){return e.split(" ").map((e=>e.indexOf(t)<0?e+"."+t:e)).join(" ")}}class p{constructor(e,t,s){this.m_valid=!0,this.m_visual={normalClass:"",errorClass:"",errorElements:[],hideElements:[],updateCallback:null,dependentProperties:[]},this.m_ignoreDataChange=!1,this.m_removeListeners=[],this.m_element=e,this.m_visual=Object.assign(this.m_visual,t),this.m_property=s}addRemoveListenerCallback(e){this.m_removeListeners.push(e)}destroy(){this.m_removeListeners.forEach((e=>e())),this.m_removeListeners.length=0}resetBinding(){this.m_visual.normalClass&&s.addClasses(this.m_element,this.m_visual.normalClass),this.m_visual.errorClass&&s.removeClasses(this.m_element,this.m_visual.errorClass),this.m_visual.updateCallback&&this.m_visual.updateCallback(!0)}isFieldActive(){return!0}getInputValue(e){var t;switch(e.type.toLowerCase()){case"checkbox":return e.checked;case"radio":return(null===(t=document.querySelector(`input[name=${e.name}]:checked`))||void 0===t?void 0:t.value)||"";default:return e.value}}getFieldValue(){switch(this.m_element.tagName.toLowerCase()){case"input":return this.getInputValue(this.m_element);case"select":case"textarea":return this.m_element.value;default:return this.m_element.innerHTML}}setInputValue(e,t){switch(e.type.toLowerCase()){case"checkbox":e.checked=!!t;break;case"radio":const s=this.m_element.getAttribute("name");document.querySelectorAll(`input[name=${s}]`).forEach((e=>e.value=t.toString()));break;default:e.value=t.toString()}}setFieldValue(e){switch(this.m_element.tagName.toLowerCase()){case"input":this.setInputValue(this.m_element,e);break;case"select":case"textarea":this.m_element.value=e.toString();break;default:this.m_element.innerHTML=e.toString()}}updateFieldVisual(){this.m_valid?(this.m_visual.errorClass&&s.removeClasses(this.m_element,this.m_visual.errorClass),this.m_visual.normalClass&&s.addClasses(this.m_element,this.m_visual.normalClass),this.m_visual.errorElements.forEach((e=>{const t=this.getErrorVisual(e);t.properties.delete(this.m_property),0===t.properties.size&&s.hide(t.element)}))):(this.m_visual.normalClass&&s.removeClasses(this.m_element,this.m_visual.normalClass),this.m_visual.errorClass&&s.addClasses(this.m_element,this.m_visual.errorClass),this.m_visual.errorElements.forEach((e=>{const t=this.getErrorVisual(e);0===t.properties.size&&s.show(t.element),t.properties.add(this.m_property)}))),this.m_visual.updateCallback&&this.m_visual.updateCallback(this.m_valid)}hideHideElements(){this.m_visual.hideElements.forEach((e=>d.get(e).hide()))}updateValid(e){this.m_element instanceof HTMLInputElement||this.m_element instanceof HTMLSelectElement?e&&(e=this.m_element.checkValidity()):this.m_element instanceof HTMLTextAreaElement&&e&&(e=this.m_element.checkValidity()),this.m_valid=e}noDataChange(e){try{this.m_ignoreDataChange=!0,e()}finally{this.m_ignoreDataChange=!1}}static resetErrorVisuals(){p.s_errorElements.forEach((e=>{s.hide(e.element),e.properties.clear()}))}get valid(){return this.m_valid}get element(){return this.m_element}get ignoreDataChange(){return this.m_ignoreDataChange}get visual(){return this.m_visual}get property(){return this.m_property}getErrorVisual(e){const t=s.get(e);if(!p.s_errorElements.has(t)){const e={element:t,properties:new Set};return p.s_errorElements.set(t,e),e}return p.s_errorElements.get(t)}}p.s_errorElements=new Map;class g{constructor(){}static get(e,t,s){if(e.has(t))return e.get(t);const n=s();return e.set(t,n),n}}class f{constructor(){this.m_singleEvents=new Map,this.m_groupedEvents=new Map}static get instance(){return f.s_instance||(f.s_instance=new f),f.s_instance}addListenerForGroup(e,t,n,i){const r=g.get(this.m_groupedEvents,e,(()=>[])),o=s.addListener(t,n,i);r.push(o)}addListenersForGroup(e,t,n,i){const r=g.get(this.m_groupedEvents,e,(()=>[])),o=s.addListeners(t,n,i);r.push(o)}removeAllForGroup(e){if(!this.m_groupedEvents.has(e))return;const t=this.m_groupedEvents.get(e);this.m_groupedEvents.delete(e),t.forEach((e=>e()))}addSingle(e,t,n){this.removeSingle(e,t);g.get(this.m_singleEvents,e,(()=>new Map)).set(t,(()=>s.addListener(e,t,n)))}removeSingle(e,t){const s=this.m_singleEvents.get(e);if(!s)return;const n=s.get(t);n&&(n(),s.delete(t),s.size>0||this.m_singleEvents.delete(e))}}var E,_,v,y,w,b;f.s_instance=null,function(e){e.DisplayValue="data-uf-display-value",e.ShowClasses="data-uf-show-classes",e.HideClasses="data-uf-hide-classes"}(E||(E={})),function(e){e.Self="_self",e.Parent="_parent",e.Next="_next",e.Previous="_previous",e.Grandparent="_grandparent",e.Dialog="_dialog"}(_||(_={}));class S{constructor(){this.m_isInitialized=!1}scan(){}init(){document.addEventListener("DOMContentLoaded",(()=>this.handleDomContentLoaded()))}addSourceAndTargetElements(e,t,s,n=null,i=null,r=""){document.querySelectorAll("["+e+"]").forEach((o=>this.addSourceElement(e,o,t,s,n,i,r)))}showElement(t,n){const i=s.getAttribute(t,E.ShowClasses),r=s.getAttribute(t,E.HideClasses);if(i||r)return void s.addAndRemoveClasses(t,n?i:r,n?r:i);const o=s.getAttribute(t,E.DisplayValue,"auto");if("disabled"==o)return;const a=e.getAttachedAs(t,"UFDisplayValue",(()=>"auto"==o?t.style.display:o));t.style.display=n?a:"none"}processDataAttributeWithPostfix(e,t,s=20){document.querySelectorAll(`[${e}]`).forEach((e=>t(e,"")));for(let n=1;n<=s;n++){const s=`-${n}`;document.querySelectorAll(`[${e}${s}]`).forEach((e=>t(e,s)))}}getTargetElements(e,t){var s,n;switch(t){case"":case _.Self:return[e];case _.Parent:return this.buildListFromOneElement(e.parentElement);case _.Next:return this.buildListFromOneElement(e.nextElementSibling);case _.Previous:return this.buildListFromOneElement(e.previousElementSibling);case _.Grandparent:return this.buildListFromOneElement(null!==(n=null===(s=e.parentElement)||void 0===s?void 0:s.parentElement)&&void 0!==n?n:null);case _.Dialog:return this.buildListFromOneElement(e.closest("dialog"));default:return[...document.querySelectorAll(t)]}}addSourceElement(e,t,n,i,r,o,a=""){const l=s.getAttribute(t,e);if(!l)return;document.querySelectorAll(l).forEach((e=>this.addTargetElement(t,e,n,i,r,o,a)))}addTargetElement(e,t,s,n,i,r,o=""){s.includes(t)||(s.push(t),i&&r&&(o?f.instance.addListenerForGroup(o,t,i,(()=>r(t))):t.addEventListener(i,(()=>r(t))))),n.add(t,e)}buildListFromOneElement(e){return e?[e]:[]}handleDomContentLoaded(){this.m_isInitialized||(this.m_isInitialized=!0,this.scan())}}!function(e){e.NoFilter="data-uf-no-filter",e.FilterTable="data-uf-filter-table",e.HeaderRow="data-uf-header-row",e.RowNoMatch="data-uf-row-no-match"}(v||(v={}));class C extends S{scan(){f.instance.removeAllForGroup(v.FilterTable);const e=document.createElement("style");e.innerHTML=`[${v.RowNoMatch}] { display: none !important; }`,document.head.appendChild(e);document.querySelectorAll("input["+v.FilterTable+"]").forEach((e=>this.initFilterInput(e)))}initFilterInput(e){const t=e.getAttribute(v.FilterTable);if(!t)return;const s=document.querySelectorAll(t);if(!s.length)return;const n=new Map;s.forEach((e=>n.set(e,this.getAllowedColumns(e)))),f.instance.addListenerForGroup(v.FilterTable,e,"input",(()=>this.applyFilter(e.value,n)))}getAllowedColumns(e){const t=[],s=e.querySelector("tr["+v.HeaderRow+"]");return s&&s.querySelectorAll("th").forEach((e=>{t.push(null==e.attributes.getNamedItem(v.NoFilter))})),t}applyFilter(e,t){const s=e.toLowerCase();t.forEach(((e,t)=>this.applyFilterToTable(t,s,e)))}applyFilterToTable(e,t,s){e.querySelectorAll("tr").forEach((e=>{if(null!=e.attributes.getNamedItem(v.HeaderRow))return;let n=!1,i=0;e.querySelectorAll("td").forEach((e=>{(i>=s.length||s[i])&&null==e.attributes.getNamedItem(v.NoFilter)&&e.textContent&&(n||(n=e.textContent.toLowerCase().indexOf(t)>=0)),i++})),n?e.removeAttribute(v.RowNoMatch):e.attributes.setNamedItem(document.createAttribute(v.RowNoMatch))})),e.dispatchEvent(new Event(C.RowsChangedEvent))}}C.RowsChangedEvent="rowsChanged";class A{constructor(){this.m_map=new Map}add(e,t){this.m_map.has(e)||this.m_map.set(e,new Set),this.m_map.get(e).add(t)}remove(e,t){if(this.m_map.has(e)){const s=this.m_map.get(e);s.delete(t),0===s.size&&this.m_map.delete(e)}}removeValue(e){const t=this.findKey(e);t&&this.remove(t,e)}clear(){this.m_map.clear()}get(e){if(this.m_map.has(e)){const t=this.m_map.get(e);return Array.from(t)}return[]}getKeys(){return Array.from(this.m_map.keys())}has(e){return this.m_map.has(e)}hasValue(e,t){return this.m_map.has(e)&&this.m_map.get(e).has(t)}isEmpty(){return 0===this.m_map.size}findKey(e){for(const t of this.m_map.keys())if(this.hasValue(t,e))return t;return null}get keyCount(){return this.m_map.size}get valueTotalCount(){let e=0;return this.m_map.forEach((t=>e+=t.size)),e}}!function(e){e.ClickStylingSelector="data-uf-click-styling-selector",e.ClickStylingClasses="data-uf-click-styling-classes"}(y||(y={}));!function(e){e.DetailsCollapse="data-uf-details-collapse",e.DetailsExpand="data-uf-details-expand"}(w||(w={}));class F extends S{constructor(){super(...arguments),this.m_clickableElements=[],this.m_collapsableElements=new A,this.m_expandableElements=new A}scan(){super.scan(),this.clear(),this.addSourceAndTargetElements(w.DetailsCollapse,this.m_clickableElements,this.m_collapsableElements,"click",(e=>this.handleCollapseClick(e)),w.DetailsCollapse),this.addSourceAndTargetElements(w.DetailsExpand,this.m_clickableElements,this.m_expandableElements,"click",(e=>this.handleExpandClick(e)),w.DetailsCollapse)}clear(){f.instance.removeAllForGroup(w.DetailsCollapse),this.m_clickableElements.length=0,this.m_collapsableElements.clear(),this.m_expandableElements.clear()}handleCollapseClick(e){this.m_collapsableElements.has(e)&&this.m_collapsableElements.get(e).forEach((e=>e.open=!1))}handleExpandClick(e){this.m_expandableElements.has(e)&&this.m_expandableElements.get(e).forEach((e=>e.open=!0))}}!function(e){e.ShowDialog="data-uf-show-dialog"}(b||(b={}));class T extends S{scan(){f.instance.removeAllForGroup(b.ShowDialog),f.instance.addListenersForGroup(b.ShowDialog,"["+b.ShowDialog+"]","click",(e=>()=>this.handleShowDialogClick(e)))}getDialog(e){const t=s.getAttribute(e,b.ShowDialog);if(!t)return null;const n=s.get(t);return n||console.error(`Dialog not found: ${t}`),n}handleShowDialogClick(e){const t=this.getDialog(e);if(!t)return;const n=s.buildDataAttributesMap(e);s.copyAttributes(e,n,t),t.showModal()}}var x,I,k,L,P,H,M,N,D;!function(e){e.EventAction="data-uf-event-action",e.EventEvents="data-uf-event-events",e.EventTarget="data-uf-event-target",e.EventData="data-uf-event-data",e.EventAttribute="data-uf-event-attribute",e.EventState="data-uf-event-state",e.EventKey="data-uf-event-key",e.EventPreventDefault="data-uf-event-prevent-default",e.ClickAction="data-uf-click-action",e.ClickTarget="data-uf-click-target",e.ClickData="data-uf-click-data",e.ClickAttribute="data-uf-click-attribute",e.LoadAction="data-uf-load-action",e.LoadTarget="data-uf-load-target",e.LoadData="data-uf-load-data",e.LoadAttribute="data-uf-load-attribute"}(x||(x={})),function(e){e.RemoveFromDom="remove-from-dom",e.Hide="hide",e.Show="show",e.Toggle="toggle",e.ToggleClass="toggle-class",e.RemoveFromClass="remove-from-class",e.AddToClass="add-to-class",e.ShowModal="show-modal",e.ShowNonModal="show-non-modal",e.Close="close",e.SetAttribute="set-attribute",e.Reload="reload",e.SetValue="set-value",e.SetText="set-text",e.SetHtml="set-html"}(I||(I={}));class O extends S{constructor(){super(...arguments),this.m_hasLoaded=!1}scan(){f.instance.removeAllForGroup(x.EventAction),this.processDataAttributeWithPostfix(x.EventAction,((e,t)=>this.processEventElement(e,t))),this.processDataAttributeWithPostfix(x.ClickAction,((e,t)=>this.processClickableElement(e,t))),this.m_hasLoaded||(this.processDataAttributeWithPostfix(x.LoadAction,((e,t)=>this.processLoadElement(e,t))),this.m_hasLoaded=!0)}processEventElement(e,t=""){const n=s.getAttribute(e,x.EventAction+t),i=s.getAttribute(e,x.EventEvents+t),r=s.getAttribute(e,x.EventTarget+t),o=s.getAttribute(e,x.EventData+t),a=s.getAttribute(e,x.EventAttribute+t),l=s.getAttribute(e,x.EventState+t),c=s.getAttribute(e,x.EventKey+t),u=s.hasAttribute(e,x.EventPreventDefault+t);i&&n&&f.instance.addListenerForGroup(x.EventAction,e,i,(t=>this.performActionForEvent(t,e,n,r,o,a,l,c,u)))}processClickableElement(e,t=""){const n=s.getAttribute(e,x.ClickAction+t),i=s.getAttribute(e,x.ClickTarget+t),r=s.getAttribute(e,x.ClickData+t),o=s.getAttribute(e,x.ClickAttribute+t);n&&f.instance.addListenerForGroup(x.EventAction,e,"click",(()=>this.performAction(e,n,i,r,o)))}processLoadElement(e,t=""){const n=s.getAttribute(e,x.LoadAction+t),i=s.getAttribute(e,x.LoadTarget+t),r=s.getAttribute(e,x.LoadData+t),o=s.getAttribute(e,x.LoadAttribute+t);n&&this.performAction(e,n,i,r,o)}performActionForEvent(e,t,s,n,i,r,o,a,l){if(e instanceof ToggleEvent){if(o&&o!==e.newState)return}else if(e instanceof KeyboardEvent&&a!==e.key)return;this.performAction(t,s,n,i,r),l&&e.preventDefault()}performAction(e,t,s,n,i){""===s&&(s=t===I.Close?"_dialog":"_self");this.getTargetElements(e,s).forEach((e=>this.performActionOnElement(e,t,n,i)))}performActionOnElement(e,t,n,i){switch(t){case I.RemoveFromDom:e.remove();break;case I.Hide:this.showElement(e,!1);break;case I.Show:this.showElement(e,!0);break;case I.Toggle:this.showElement(e,"none"===e.style.display);break;case I.ToggleClass:e.classList.toggle(n);break;case I.RemoveFromClass:e.classList.remove(n);break;case I.AddToClass:e.classList.add(n);break;case I.ShowModal:e instanceof HTMLDialogElement&&e.showModal();break;case I.ShowNonModal:e instanceof HTMLDialogElement&&e.show();break;case I.Close:e instanceof HTMLDialogElement&&e.close();break;case I.SetAttribute:e.setAttribute(i,n);break;case I.Reload:s.reload();break;case I.SetValue:s.assignValue(e,n);break;case I.SetText:e.innerText=n;break;case I.SetHtml:e.innerHTML=n}}}!function(e){e.NoFilter="data-uf-no-filter",e.FilterInput="data-uf-filter-input",e.NoMatch="data-uf-filter-no-match",e.Group="data-uf-filter-group",e.Container="data-uf-filter-container"}(k||(k={}));class G extends S{scan(){f.instance.removeAllForGroup(k.FilterInput),G.s_styledAdded||(this.addStyle(),G.s_styledAdded=!0),this.initFilterInputs()}initFilterInputs(){document.querySelectorAll("input["+k.FilterInput+"]").forEach((e=>this.initFilterInput(e)))}initFilterInput(e){const t=e.getAttribute(k.FilterInput);if(!t)return;const n=document.querySelectorAll(t),i=[],r=[];n.forEach((e=>{i.push(this.getFilterableChildren(e)),r.push(...s.findAllForAttribute(k.Container,null,e))})),f.instance.addListenerForGroup(k.FilterInput,e,"input",(()=>this.applyFilter(e.value,i,r)))}getFilterableChildren(e){const t=e.querySelectorAll(`:not([${k.NoFilter}])`),s=new Map,n=[];return t.forEach((e=>{var t;const i=e.getAttribute(k.Group);i?(s.has(i)||s.set(i,[]),null===(t=s.get(i))||void 0===t||t.push(e)):n.push([e])})),[...n,...Array.from(s.values())]}applyFilter(e,t,s){const n=e.toLowerCase();t.forEach((e=>this.applyFilterToParent(n,e))),s.forEach((e=>this.applyFilterToContainer(n,e)))}applyFilterToParent(e,t){t.forEach((t=>this.applyFilterToGroupedChildren(e,t)))}applyFilterToGroupedChildren(e,t){let s=!1;t.forEach((t=>{var n;t.hasAttribute(k.NoFilter)||s||(s=(null!==(n=t.innerText)&&void 0!==n?n:"").toLowerCase().indexOf(e)>=0)})),t.forEach((e=>{s?e.removeAttribute(k.NoMatch):e.attributes.setNamedItem(document.createAttribute(k.NoMatch))}))}applyFilterToContainer(e,t){let s=!1;Array.from(t.children).forEach((t=>{var n;return s||(s=(null!==(n=t.innerText)&&void 0!==n?n:"").toLowerCase().indexOf(e)>=0)})),s?t.removeAttribute(k.NoMatch):t.attributes.setNamedItem(document.createAttribute(k.NoMatch))}addStyle(){const e=document.createElement("style");e.innerHTML=`[${k.NoMatch}] { display: none !important; }`,document.head.appendChild(e)}}G.s_styledAdded=!1,function(e){e.Type="data-uf-toggle-type",e.Property="data-uf-toggle-property",e.Selector="data-uf-toggle-selector",e.Change="data-uf-toggle-change",e.Classes="data-uf-toggle-classes",e.ClassesMatch="data-uf-toggle-classes-match",e.Condition="data-uf-toggle-condition",e.Value="data-uf-toggle-value",e.Values="data-uf-toggle-values",e.ValuesSeparator="data-uf-toggle-values-separator",e.Required="data-uf-toggle-required",e.Target="data-uf-toggle-target",e.Compare="data-uf-toggle-compare"}(L||(L={})),function(e){e[e.Auto=0]="Auto",e[e.Value=1]="Value",e[e.Valid=2]="Valid",e[e.Property=3]="Property"}(P||(P={})),function(e){e[e.Auto=0]="Auto",e[e.None=1]="None",e[e.Enable=2]="Enable",e[e.Visible=3]="Visible",e[e.Required=4]="Required",e[e.NotRequired=5]="NotRequired"}(H||(H={})),function(e){e[e.Any=0]="Any",e[e.All=1]="All",e[e.None=2]="None"}(M||(M={})),function(e){e[e.None=0]="None",e[e.Match=1]="Match",e[e.NoMatch=2]="NoMatch"}(N||(N={})),function(e){e[e.Equal=0]="Equal",e[e.Contain=1]="Contain",e[e.Inside=2]="Inside",e[e.LessThan=3]="LessThan",e[e.LessThanOrEqual=4]="LessThanOrEqual",e[e.GreaterThan=5]="GreaterThan",e[e.GreaterThanOrEqual=6]="GreaterThanOrEqual"}(D||(D={}));const V=`\n  [${L.Type}], \n  [${L.Selector}], \n  [${L.Change}], \n  [${L.Classes}], \n  [${L.ClassesMatch}], \n  [${L.Condition}],\n  [${L.Compare}]\n`;class q extends S{constructor(){super(...arguments),this.m_radioGroups=new A}scan(){f.instance.removeAllForGroup(L.Type),this.m_radioGroups.clear();document.querySelectorAll(V).forEach((e=>{const t=this.buildToggleData(e);t&&(t.formElements.forEach((s=>this.initializeFormElement(s,e,t))),this.updateToggleElement(e,t))})),this.installRadioGroupFix()}getToggleType(e){switch(s.getAttribute(e,L.Type)){case"value":return P.Value;case"valid":return P.Valid;case"property":return P.Property;default:return P.Auto}}getToggleChange(e){switch(s.getAttribute(e,L.Change)){case"enable":return H.Enable;case"visible":return H.Visible;case"none":return H.None;case"required":return H.Required;case"not-required":return H.NotRequired;default:return H.Auto}}getToggleCondition(e){switch(s.getAttribute(e,L.Condition)){case"any":return M.Any;case"none":return M.None;default:return M.All}}getToggleCompare(e){switch(s.getAttribute(e,L.Compare)){case"contain":return D.Contain;case"inside":return D.Inside;case"lt":return D.LessThan;case"lte":return D.LessThanOrEqual;case"gt":return D.GreaterThan;case"gte":return D.GreaterThanOrEqual;default:return D.Equal}}getToggleRequired(e){switch(s.getAttribute(e,L.Required)){case"match":return N.Match;case"no-match":return N.NoMatch;default:return N.None}}getFormElements(e){const t=s.getAttribute(e,L.Selector)||"";if(""===t){const t=e.closest("form");return t?[t]:[]}return[...document.querySelectorAll(t)]}buildToggleData(e){const t=this.getFormElements(e);if(!t.length)return null;const n=t[0],i=n.tagName,r="FORM"===i,o="INPUT"===i&&["checkbox","radio"].includes(n.type),a="INPUT"===i&&"file"===n.type,l="IMG"===i;let c=this.getToggleType(e),u=this.getToggleChange(e);const h=this.getToggleRequired(e),m=s.getAttribute(e,L.Classes),d=s.getAttribute(e,L.ClassesMatch),p=this.getToggleCondition(e),g=this.getToggleCompare(e),f=s.getAttribute(e,L.Property,"checked"),E=s.getAttribute(e,L.ValuesSeparator,","),_=s.getAttribute(e,L.Values)||s.getAttribute(e,L.Value)||"",v=_.length>0?_.split(E):[];if(o&&0===v.length&&v.push("true"),u===H.Auto)if(m.length+d.length>0)u=H.None;else switch(e.tagName){case"INPUT":case"BUTTON":case"SELECT":u=H.Enable;break;default:u=H.Visible}r?c=P.Valid:c===P.Auto&&(c=o?P.Property:v.length>0||a?P.Value:P.Valid);return{type:c,property:f,change:u,cssClassesMatch:d,cssClassesNoMatch:m,condition:p,compare:g,required:h,isForm:r,isImage:l,formElements:t,values:v,target:s.getAttribute(e,L.Target)}}isValidToggleTarget(t){if(t.isForm)return t.formElements[0].checkValidity();let s=t.condition!==M.Any;return t.formElements.every((n=>{let i=null,r="";switch(t.type){case P.Valid:i=n.checkValidity();break;case P.Property:r=e.getAs(n,t.property,"").toString();break;default:r=e.getAs(n,t.isImage?"src":"value","")}switch(null===i&&(i=this.isValidValue(r,t)),t.condition){case M.Any:if(i)return s=!0,!1;break;case M.All:if(!i)return s=!1,!1;break;case M.None:if(i)return s=!1,!1}return!0})),s}isValidValue(e,t){if(0==t.values.length||t.isImage)return e.length>0;if(t.compare==D.Equal)return t.values.indexOf(e)>=0;const s=e.toString().toLowerCase();if(t.compare==D.Inside)return t.values.some((e=>s.includes(e.toString().toLowerCase())));if(t.compare==D.Contain)return t.values.some((e=>e.toString().toLowerCase().includes(s)));const n=parseFloat(s);return!isNaN(n)&&(t.compare==D.LessThan?t.values.some((e=>n<parseFloat(e))):t.compare==D.LessThanOrEqual?t.values.some((e=>n<=parseFloat(e))):t.compare==D.GreaterThan?t.values.some((e=>n>parseFloat(e))):t.compare==D.GreaterThanOrEqual&&t.values.some((e=>n>=parseFloat(e))))}updateToggleElement(e,t){const s=this.isValidToggleTarget(t);this.getTargetElements(e,t.target).forEach((e=>this.updateToggleTargetElement(e,t,s)))}updateToggleTargetElement(t,n,i){switch(n.cssClassesMatch.length&&s.toggleClasses(t,n.cssClassesMatch,i),n.cssClassesNoMatch.length&&s.toggleClasses(t,n.cssClassesNoMatch,!i),n.change){case H.Enable:e.set(t,"disabled",!i);break;case H.Visible:this.showElement(t,i)}switch(n.required){case N.Match:e.set(t,"required",i);break;case N.NoMatch:e.set(t,"required",!i)}}initializeFormElement(e,t,s){f.instance.addListenerForGroup(L.Type,e,"click keyup keydown input change",(()=>this.updateToggleElement(t,s))),"INPUT"==e.tagName&&this.checkRadioGroup(e)}checkRadioGroup(e){if("radio"===e.type){const t=e.name;t&&this.m_radioGroups.add(t,e)}}installRadioGroupFix(){this.m_radioGroups.getKeys().forEach((e=>{const t=document.querySelectorAll(`input[name="${e}"][type="radio"]`),s=this.m_radioGroups.get(e);t.forEach((e=>{f.instance.addListenerForGroup(L.Type,e,"change",(()=>this.dispatchChangeEvent(s,e)))}))}))}dispatchChangeEvent(e,t){t.checked&&e.forEach((e=>{t==e||e.checked||e.dispatchEvent(new Event("change"))}))}}class R{setObject(e,t){this.setString(e,JSON.stringify(t))}getObject(e,t){try{return this.has(e)?JSON.parse(this.getString(e,"")):t}catch(e){return t}}setNumber(e,t){this.setString(e,""+t)}getNumber(e,t){if(this.has(e)){const s=parseFloat(this.getString(e,""));return isNaN(s)?t:s}return t}setInteger(e,t){this.setString(e,""+t)}getInteger(e,t){if(this.has(e)){const s=parseInt(this.getString(e,""),10);return isNaN(s)?t:s}return t}setBoolean(e,t){this.setString(e,t?"1":"0")}getBoolean(e,t){return this.has(e)?"1"===this.getString(e,""):t}}class z extends R{setString(e,t){try{window.localStorage.setItem(e,t)}catch(e){}}getString(e,t){if(!e||0===e.length)return t;try{return window.localStorage.hasOwnProperty(e)?window.localStorage.getItem(e):t}catch(e){}return t}remove(e){try{window.localStorage.removeItem(e)}catch(e){}}has(e){try{return e in window.localStorage}catch(e){}return!1}clear(){try{window.localStorage.clear()}catch(e){}}}var j,W;!function(e){e.Sorting="data-uf-grid-sorting",e.SortControl="data-uf-sort-control",e.SortButton="data-uf-sort-button",e.SortKey="data-uf-sort-key",e.GroupSize="data-uf-group-size",e.ItemContainer="data-uf-item-container",e.ItemGroup="data-uf-item-group",e.SortValue="data-uf-sort-value",e.SortAscending="data-uf-sort-ascending",e.SortDescending="data-uf-sort-descending",e.StorageId="data-uf-storage-id",e.GridBody="data-uf-grid-body"}(j||(j={})),function(e){e[e.None=0]="None",e[e.Number=1]="Number",e[e.Text=2]="Text",e[e.Date=3]="Date"}(W||(W={}));const U=`:scope > :not([${j.ItemContainer}],[${j.ItemGroup}],[${j.SortControl}])`;function X(e){switch(s.getAttribute(e,j.SortControl)){case"number":return W.Number;case"text":return W.Text;case"date":return W.Date;default:return W.None}}class Y extends S{constructor(){super(...arguments),this.m_localStorage=new z,this.m_grids=new Map}scan(){f.instance.removeAllForGroup(j.Sorting),this.m_grids.clear();s.findAllForAttribute(j.Sorting).forEach((e=>this.initGrid(e)))}resort(e){this.m_grids.has(e)&&this.sortGrid(this.m_grids.get(e))}initGrid(e){const t=this.getControls(e);if(!t.length)return;const n=parseInt(s.getAttribute(e,j.GroupSize,t.length.toString())),i=this.getContainers(e),r=this.getGroups(e),o=this.groupItems(e,n);if(i.length+r.length+o.length==0)return;const a={grid:e,controls:t,sortInfo:this.getSortInfo(e,t),itemContainers:i,itemGroups:r,groupedItems:o,ascendingClasses:s.getAttribute(e,j.SortAscending),descendingClasses:s.getAttribute(e,j.SortDescending)};this.m_grids.set(e,a),t.filter((e=>e.type!=W.None)).forEach((e=>f.instance.addListenerForGroup(j.Sorting,e.button,"click",(()=>this.handleControlClick(e,a))))),this.addClasses(a),this.sortGrid(a)}getControls(e){const t=s.findAllForAttribute(j.SortControl,null,e);return Array.from(t).map(((e,t)=>{var n;return{control:e,key:s.getAttribute(e,j.SortKey,t.toString()),button:null!==(n=s.findForAttribute(j.SortButton,null,e))&&void 0!==n?n:e,type:X(e)}}))}getContainers(e){const t=s.findAllForAttribute(j.ItemContainer,null,e);return Array.from(t).map((e=>({containerElement:e,items:this.getDataItems(Array.from(e.children))})))}getDataItems(e){return e.filter((e=>e instanceof HTMLElement)).map(((e,t)=>({element:e,key:s.getAttribute(e,j.SortKey,t.toString())})))}getGroups(e){const t=new Map;s.findAllForAttribute(j.ItemGroup,null,e).forEach((e=>{const n=s.getAttribute(e,j.ItemGroup,"");""!=n&&(t.has(n)||t.set(n,[]),t.get(n).push(e))}));return Array.from(t.values()).map((e=>({items:this.getDataItems(e)})))}groupItems(e,t){var n;const i=null!==(n=s.findForAttribute(j.GridBody,null,e))&&void 0!==n?n:e,r=Array.from(i.querySelectorAll(U)),o=[];for(let e=0;e<r.length;e+=t){const s=r.slice(e,e+t);o.push({items:this.getDataItems(s)})}return o}getSortInfo(e,t){const n={key:t[0].key,descending:!1},i=s.getAttribute(e,j.StorageId);if(!i||!this.m_localStorage.has(i))return n;const r=this.m_localStorage.getObject(i,n);for(const e of t)if(e.key==r.key)return r;return n}saveSortInfo(e,t){const n=s.getAttribute(e,j.StorageId);n&&this.m_localStorage.setObject(n,t)}addClasses(e){const t=this.getControl(e.sortInfo.key,e.controls);s.addClasses(t.control,e.sortInfo.descending?e.descendingClasses:e.ascendingClasses)}removeClasses(e){const t=this.getControl(e.sortInfo.key,e.controls);s.removeClasses(t.control,e.sortInfo.descending?e.descendingClasses:e.ascendingClasses)}getControl(e,t){for(const s of t)if(s.key===e)return s;throw new Error(`Can not find control for ${e}`)}sortGrid(e){const t=this.getControl(e.sortInfo.key,e.controls),s=e.sortInfo.descending?-1:1;e.itemContainers.sort(((e,n)=>s*this.compareGroup(e,n,t))),e.itemGroups.sort(((e,n)=>s*this.compareGroup(e,n,t))),e.groupedItems.sort(((e,n)=>s*this.compareGroup(e,n,t))),this.reorderContainers(e.itemContainers),this.reorderGroups(e.itemGroups,`[${j.ItemGroup}]`),this.reorderGroups(e.groupedItems,U)}findDataItem(e,t){for(const s of t)if(s.key==e)return s;return null}getValue(e){var t;return null==e?null:null!==(t=e.element.getAttribute(j.SortValue))&&void 0!==t?t:e.element.innerText}compareGroup(e,t,s){const n=this.findDataItem(s.key,e.items),i=this.findDataItem(s.key,t.items),r=this.getValue(n),o=this.getValue(i);switch(s.type){case W.Text:return this.compareText(r,o);case W.Number:return this.compareNumber(r,o);case W.Date:return this.compareDate(r,o);default:return 0}}compareText(e,t){return e===t?0:null===e?1:null===t?-1:e.localeCompare(t)}compareNumber(e,t){if(e===t)return 0;if(null===e)return 1;if(null===t)return-1;const s=parseFloat(e),n=parseFloat(t);return this.compareParsedNumbers(s,n)}compareParsedNumbers(e,t){const s=Number.isNaN(e),n=Number.isNaN(t);return s&&n?0:s?1:n?-1:e-t}compareDate(e,t){if(e===t)return 0;if(null===e)return 1;if(null===t)return-1;const s=Date.parse(e),n=Date.parse(t);return this.compareParsedNumbers(n,s)}reorderContainers(e){this.reorderElements(e.map((e=>e.containerElement)),new Map,`[${j.ItemContainer}]`)}reorderGroups(e,t){const s=new Map;for(const n of e)this.reorderElements(n.items.map((e=>e.element)),s,t)}reorderElements(e,t,n){for(const i of e){const e=i.parentElement;if(null!=e){if(t.has(e))s.insertAfter(e,i,t.get(e));else{const t=e.querySelector(n);if(null==t)continue;e.insertBefore(t,i)}t.set(e,i)}}}handleControlClick(e,t){this.removeClasses(t),t.sortInfo.key==e.key?t.sortInfo.descending=!t.sortInfo.descending:(t.sortInfo.key=e.key,t.sortInfo.descending=!1),this.addClasses(t),this.sortGrid(t),this.saveSortInfo(t.grid,t.sortInfo),t.grid.dispatchEvent(new Event(Y.SortedEvent))}}var B,K,J,Q,Z,ee,te,se;Y.SortedEvent="sorted",function(e){e.PopupContent="data-uf-popup-content",e.PopupPosition="data-uf-popup-position",e.PopupHide="data-uf-popup-hide",e.PopupTransition="data-uf-popup-transition",e.PopupDeltaX="data-uf-popup-delta-x",e.PopupDeltaY="data-uf-popup-delta-y"}(B||(B={})),function(e){e.Vertical="vertical",e.Horizontal="horizontal",e.Overlap="overlap"}(K||(K={})),function(e){e.Tree="tree",e.Always="always"}(J||(J={}));class ne extends S{scan(){document.querySelectorAll("["+B.PopupContent+"]").forEach((e=>{this.initializePopup(e)}))}initializePopup(e){const t=document.querySelectorAll(e.getAttribute(B.PopupContent)),s=e.getAttribute(B.PopupHide)||J.Always,n=e.getAttribute(B.PopupPosition)||K.Horizontal,i={element:Array.from(t),autoHide:s==J.Tree?l.Tree:l.Always,content:e,transition:e.getAttribute(B.PopupTransition)||c.None,elementX:parseInt(e.getAttribute(B.PopupDeltaX)||"0"),elementY:parseInt(e.getAttribute(B.PopupDeltaY)||"0")};switch(n){case K.Vertical:i.positionX=o.Adjacent,i.positionY=o.Overlap;break;case K.Horizontal:i.positionX=o.Overlap,i.positionY=o.Adjacent;break;case K.Overlap:i.positionX=o.Overlap,i.positionY=o.Overlap}new h(i),e.removeAttribute(B.PopupContent)}}!function(e){e.ImagePreview="data-uf-image-preview",e.ImageName="data-uf-image-name",e.ImageWidth="data-uf-image-width",e.ImageHeight="data-uf-image-height",e.ImageSize="data-uf-image-size",e.ImageType="data-uf-image-type"}(Q||(Q={}));class ie extends S{constructor(){super(...arguments),this.m_inputElements=[],this.m_previewElements=new A,this.m_nameElements=new A,this.m_widthElements=new A,this.m_heightElements=new A,this.m_sizeElements=new A,this.m_typeElements=new A}scan(){this.clear(),this.addElements(),this.m_inputElements.forEach((e=>this.clearElements(e)))}clear(){f.instance.removeAllForGroup(Q.ImagePreview),this.m_inputElements.length=0,this.m_heightElements.clear(),this.m_nameElements.clear(),this.m_previewElements.clear(),this.m_sizeElements.clear(),this.m_typeElements.clear(),this.m_widthElements.clear()}addElements(){this.addElement(Q.ImagePreview,this.m_previewElements),this.addElement(Q.ImageName,this.m_nameElements),this.addElement(Q.ImageWidth,this.m_widthElements),this.addElement(Q.ImageHeight,this.m_heightElements),this.addElement(Q.ImageSize,this.m_sizeElements),this.addElement(Q.ImageType,this.m_typeElements)}addElement(e,t){this.addSourceAndTargetElements(e,this.m_inputElements,t,"input",(e=>this.handleFileChange(e)),Q.ImagePreview)}loadFile(e,t){const s=new Image;s.onload=()=>this.processFile(e,t,s),s.src=URL.createObjectURL(t)}processFile(e,t,s){this.m_previewElements.get(e).forEach((e=>e.src=s.src)),this.m_nameElements.get(e).forEach((e=>e.textContent=t.name)),this.m_widthElements.get(e).forEach((e=>e.textContent=s.width.toString())),this.m_heightElements.get(e).forEach((e=>e.textContent=s.height.toString())),this.m_sizeElements.get(e).forEach((e=>e.textContent=t.size.toString())),this.m_typeElements.get(e).forEach((e=>e.textContent=t.type))}clearElements(e){this.m_previewElements.get(e).forEach((e=>e.src="")),this.m_nameElements.get(e).forEach((e=>e.textContent="-")),this.m_widthElements.get(e).forEach((e=>e.textContent="-")),this.m_heightElements.get(e).forEach((e=>e.textContent="-")),this.m_sizeElements.get(e).forEach((e=>e.textContent="-")),this.m_typeElements.get(e).forEach((e=>e.textContent="-"))}handleFileChange(e){null!=e.files&&(e.files.length>0?this.loadFile(e,e.files[0]):this.clearElements(e))}}!function(e){e.SelectUrl="data-uf-select-url"}(Z||(Z={}));class re extends S{scan(){f.instance.removeAllForGroup(Z.SelectUrl);document.querySelectorAll("["+Z.SelectUrl+"]").forEach((e=>f.instance.addListenerForGroup(Z.SelectUrl,e,"change",(()=>this.handleSelectUrl(e)))))}handleSelectUrl(e){const t=s.getAttribute(e,Z.SelectUrl);t&&(window.location.href=t.replace(/\$value\$/g,e.value))}}!function(e){e.ShareHover="data-uf-share-hover"}(ee||(ee={}));class oe extends S{scan(){f.instance.removeAllForGroup(ee.ShareHover);document.querySelectorAll("["+ee.ShareHover+"]").forEach((e=>{f.instance.addListenerForGroup(ee.ShareHover,e,"mouseover",(()=>this.handleShareHover(e,!0))),f.instance.addListenerForGroup(ee.ShareHover,e,"mouseout",(()=>this.handleShareHover(e,!1)))}))}handleShareHover(e,t){const n=s.getAttribute(e,"href");if(!n)return;document.querySelectorAll(`[data-${ee.ShareHover}][href="${n}"]`).forEach((e=>{const n=s.getAttribute(e,ee.ShareHover);n&&(t?s.addClasses(e,n):s.removeClasses(e,n))}))}}!function(e){e.PageRefresh="data-uf-page-refresh"}(te||(te={}));class ae extends S{scan(){f.instance.removeAllForGroup(te.PageRefresh);document.querySelectorAll("["+te.PageRefresh+"]").forEach((e=>f.instance.addListenerForGroup(te.PageRefresh,e,"click",(()=>this.handleClick(e)))))}handleClick(e){const t=parseInt(s.getAttribute(e,te.PageRefresh));setTimeout((()=>{window.location.replace(window.location.href)}),Math.max(1,t))}}!function(e){e.ManageSubmit="data-uf-manage-submit"}(se||(se={}));class le extends S{scan(){f.instance.removeAllForGroup(se.ManageSubmit);document.querySelectorAll("["+se.ManageSubmit+"]").forEach((e=>this.addElementsListener(e.querySelectorAll("input, select, textarea"),e)))}addElementsListener(e,t){e.forEach((e=>this.addElementListener(e,t))),this.handleFormChange(t)}addElementListener(e,t){f.instance.addListenerForGroup(se.ManageSubmit,e,"click keyup keydown input change",(()=>this.handleFormChange(t)))}setElementsDisabled(e,t){e.forEach((e=>this.setElementDisabled(e,t)))}setElementDisabled(e,t){e.disabled=t}handleFormChange(e){const t=e.checkValidity();this.setElementsDisabled(e.querySelectorAll("input[type=submit]"),!t),this.setElementsDisabled(e.querySelectorAll("button[type=submit]"),!t),this.setElementsDisabled(e.querySelectorAll("button:not([type])"),!t)}}class ce extends S{constructor(){super(),this.m_helpers=[],this.registerHelper(new C),this.registerHelper(new ie),this.registerHelper(new re),this.registerHelper(new oe),this.registerHelper(new ae),this.registerHelper(new le),this.registerHelper(new q),this.registerHelper(new F),this.registerHelper(new ne),this.registerHelper(new O),this.registerHelper(new T),this.registerHelper(new G),this.registerHelper(this.m_gridSortHelper=new Y)}static get instance(){return null===ce.m_instance&&(ce.m_instance=new ce),ce.m_instance}init(e=[]){e.forEach((e=>{this.registerHelper(e)})),super.init()}resortGrid(e){this.m_gridSortHelper&&this.m_gridSortHelper.resort(e)}scan(){this.m_helpers.forEach((e=>{e.scan()}))}registerHelper(e){this.m_helpers.push(e)}}var ue,he;ce.m_instance=null,function(e){e[e.Contain=0]="Contain",e[e.Cover=1]="Cover",e[e.Stretch=2]="Stretch"}(ue||(ue={})),function(e){e.Png="image/png",e.Jpeg="image/jpeg"}(he||(he={}));var me,de;!function(e){e[e.degrees=0]="degrees",e[e.radians=1]="radians"}(me||(me={}));class pe{constructor(){}static get angleUnit(){return pe.s_angleUnit}static set angleUnit(e){pe.s_angleUnit=e}static toRadians(e){return pe.angleUnit===me.degrees?e*Math.PI/180:e}static fromRadians(e){return pe.angleUnit===me.degrees?180*e/Math.PI:e}static rotate(e,t,s,n=0,i=0){e=pe.toRadians(e);const r=t-n,o=s-i,a=Math.sin(e),l=Math.cos(e);return{x:r*l-o*a+n,y:r*a+o*l+i}}static angle(e,t,s,n){return pe.fromRadians(Math.atan2(n-t,s-e))}static distance(e,t,s,n){const i=e-s,r=t-n;return Math.sqrt(i*i+r*r)}static randomInteger(e,t){return void 0===t&&(t=e,e=0),Math.floor(e+Math.random()*(t-e+1))}static moveTo(e,t,s){return e>t?Math.min(e,t+s):Math.max(e,t-s)}static moveOverTime(e,t,s,n){return t+(e-t)*Math.max(0,Math.min(s,n))/n}static minmax(e,t,s){return Math.max(e,Math.min(t,s))}static isOverlapping(e,t,s,n,i,r,o,a){return!(e>=i+o||i>=e+s||t>=r+a||r>=t+n)}static isNumeric(e){return!Array.isArray(e)&&e-parseFloat(e)+1>=0}static getNumber(e,t){return this.isNumeric(e)?e:t}static xor(e,t){return!(!e&&!t||e&&t)}}pe.s_angleUnit=me.degrees;class ge{constructor(){}static append(e,t,s){return e.length<=0?t:t.length<=0?e:e+s+t}static escapeHtml(e){return e.replace(/[&<>"'\n\t\r]/g,(e=>this.s_escapeHtmlMap.get(e)))}static generateCode(e){let t="",s=1;for(let n=0;n<e;n++){let e;for(;e=s>2?pe.randomInteger(0,9):pe.randomInteger(0,61),0===e||24===e||1===e||47===e;);e<10?(t+=String.fromCharCode(e+48),s=0):e<36?(t+=String.fromCharCode(e+65-10),s++):(t+=String.fromCharCode(e+97-10-26),s++)}return t}static twoDigits(e){return e<10?"0"+e:e.toString()}static threeDigits(e){return("000"+e.toString()).substring(-3)}static replace(e,t){for(const[s,n]of Object.entries(t))e=e.replace(s,n);return e}static hexTwoDigits(e){return("0"+Math.min(255,Math.max(0,e)).toString(16)).substring(-2)}static hexFourDigits(e){return("000"+Math.min(65535,Math.max(0,e)).toString(16)).substring(-4)}static join(e,...t){return t.reduce(((t,s)=>(s.startsWith(e)&&(s=s.substring(e.length)),!t.endsWith(e)&&t.length&&(t+=e),t+s)))}static joinPath(...e){return this.join("/",...e)}static getOrdinalPost(e){switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}static getOrdinalNumber(e){return e.toString()+this.getOrdinalPost(e)}static asString(e,t=""){switch(e){case null:case void 0:case NaN:return t;default:return e.toString()}}static formatFileSize(e){let t;return t=e<1024?e+" bytes":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB",t}static getFileExtension(e){const t=e.lastIndexOf("/");t>0&&(e=e.substring(t+1));const s=e.lastIndexOf(".");return!(s<0)&&e.substring(s+1).toLowerCase()}static lpad(e,t,s=" "){for(;e.length<t;)e=s+e;return e}static rpad(e,t,s=" "){for(;e.length<t;)e+=s;return e}static addParameter(e,t,s){return s&&(t=t+"="+s),t=(e.indexOf("?")>=0?"&":"?")+t,e+t}static sprintf(e,...t){const s=new RegExp("%(?!%)((?<param_index>\\d+)\\$)?(\\{(?<prop_typed>\\w+)\\})?(?<add_plus>\\+)?(?<pad_zero>0|'(?<pad_char>.))?(?<left_justify>\\-)?(?<min_size>\\d+)?(\\.(?<max_size>\\d+))?(?<format_type>\\((?<prop_text>\\w+)\\)|[bcdefFousxX])","g");let n="",i=0,r=0,o=null;for(let a=s.exec(e);null!=a;a=s.exec(e)){if(!a.groups)continue;n+=e.substring(i,a.index),i=a.index+a[0].length;let s=null;const l=a.groups.prop_text?a.groups.prop_text:a.groups.prop_typed?a.groups.prop_typed:"";let c,u=null;if(a.groups.param_index){const e=Number(a.groups.param_index);if(e>=t.length){n+="%",i=a.index+1;continue}s=t[e],u=s}else if(0===l.length||null==o){if(r>=t.length){n+="%",i=a.index+1;continue}s=t[r++]}l.length>0&&(null==u&&(null==o&&(o=s),u=o),s=u[l]),a.groups.prop_text&&(a.groups.format_type="s");let h=a.groups.min_size?Number(a.groups.min_size):-1,m=a.groups.max_size?Number(a.groups.max_size):-1;switch(a.groups.format_type){case"s":switch(s){case null:c="null";break;case void 0:c="undefined";break;default:c=s.toString()}break;case"c":c=String.fromCharCode(Number(s));break;case"b":c=Number(s).toString(2);break;case"x":c=Number(s).toString(16).toLowerCase();break;case"X":c=Number(s).toString(16).toUpperCase();break;case"u":c=Number(s).toString();break;case"d":const e=Math.floor(Number(s));c=(e>=0&&a.groups.add_plus?a.groups.add_plus:"")+e.toString();break;case"o":c=Number(s).toString(8);break;case"e":case"f":case"F":const t=Number(s);c=t>=0&&a.groups.add_plus?a.groups.add_plus:"",m<0&&(m=6),c+="e"===a.groups.format_type?t.toExponential(m):t.toFixed(m),m=-1;break;default:throw new Error('Unknown format specifier "'+a.groups.format_type+'"')}if(h>=0){const e=a.groups.pad_char?a.groups.pad_char:a.groups.pad_zero?"0":" ";c=a.groups.left_justify?ge.rpad(c,h,e):ge.lpad(c,h,e)}m>=0&&(c=c.substring(0,m)),n+=c}return n+=e.substring(i),n=n.replace(/%%/g,"%"),n}static printf(e,...t){console.log(ge.sprintf.apply(null,arguments))}}ge.s_escapeHtmlMap=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["\n","<br/>"],["\t",""],["\r",""]]);!function(e){e.Get="GET",e.Post="POST",e.Put="PUT",e.Patch="PATCH",e.Delete="DELETE"}(de||(de={}));var fe;!function(e){e[e.Factory=0]="Factory",e[e.Constructor=1]="Constructor",e[e.Static=2]="Static",e[e.SingletonFactory=3]="SingletonFactory",e[e.SingletonConstructor=4]="SingletonConstructor"}(fe||(fe={}));class Ee{static registerFactory(e,t,s=[]){Ee.s_services.set(e,{type:fe.Factory,factoryProvider:t,constructorProvider:null,staticProvider:null,instance:null,services:s,factory:null})}static registerSingletonFactory(e,t,s=[]){Ee.s_services.set(e,{type:fe.SingletonFactory,factoryProvider:t,constructorProvider:null,staticProvider:null,instance:null,services:s,factory:null})}static registerConstructor(e,t,s=[]){Ee.s_services.set(e,{type:fe.Constructor,factoryProvider:null,constructorProvider:t,staticProvider:null,instance:null,services:s,factory:null})}static registerSingletonConstructor(e,t,s=[]){Ee.s_services.set(e,{type:fe.SingletonConstructor,factoryProvider:null,constructorProvider:t,staticProvider:null,instance:null,services:s,factory:null})}static registerStatic(e,t){Ee.s_services.set(e,{type:fe.Static,factoryProvider:null,constructorProvider:null,staticProvider:t,instance:null,services:[],factory:null})}static has(e){return Ee.s_services.has(e)}static getInstance(e){Ee.validateService(e);const t=Ee.s_services.get(e);switch(t.type){case fe.Constructor:return new t.constructorProvider(...Ee.getServiceInstancesFromNames(t.services));case fe.Factory:return t.factoryProvider(...Ee.getServiceInstancesFromNames(t.services));case fe.Static:return t.staticProvider;case fe.SingletonConstructor:return t.instance||(t.instance=new t.constructorProvider(...Ee.getServiceInstancesFromNames(t.services))),t.instance;case fe.SingletonFactory:return t.instance||(t.instance=t.factoryProvider(...Ee.getServiceInstancesFromNames(t.services))),t.instance}}static call(e,t){return e(...Ee.getServiceInstancesFromNames(t))}static construct(e,t){return new e(...Ee.getServiceInstancesFromNames(t))}static validateService(e){if(!Ee.has(e))throw new Error(`Can not find service: ${e}`)}static getServiceInstancesFromNames(e){return e.map((e=>e.endsWith("()")?Ee.getServiceFactory(e.slice(0,-2)):Ee.getInstance(e)))}static getServiceFactory(e){Ee.validateService(e);const t=Ee.s_services.get(e);return t.factory||(t.factory=()=>Ee.getInstance(e)),t.factory}}Ee.s_services=new Map;var _e=function(e,t,s,n){return new(s||(s=Promise))((function(i,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class ve{constructor(){}static delay(e){return _e(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout(t,e)))}))}}var ye=function(e,t,s,n){return new(s||(s=Promise))((function(i,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class we{constructor(e){this.m_element=s.get(e)}get element(){return this.m_element}show(){return ye(this,void 0,void 0,(function*(){this.m_element.dispatchEvent(new Event(we.ShowStartedEvent)),yield this.performShow(),this.m_element.dispatchEvent(new Event(we.ShowDoneEvent))}))}hide(){return ye(this,void 0,void 0,(function*(){this.m_element.dispatchEvent(new Event(we.HideStartedEvent)),yield this.performHide(),this.m_element.dispatchEvent(new Event(we.HideDoneEvent))}))}performShow(){return ye(this,void 0,void 0,(function*(){s.fadeIn(this.element,500),yield ve.delay(500)}))}performHide(){return ye(this,void 0,void 0,(function*(){s.fadeOut(this.element,500),yield ve.delay(500)}))}}we.ShowStartedEvent="uf-showable-show-started",we.ShowDoneEvent="uf-showable-show-done",we.HideStartedEvent="uf-showable-hide-started",we.HideDoneEvent="uf-showable-hide-done";ce.instance.init(),lib={}})();