var lib;(()=>{"use strict";class e{constructor(){}static getOrFail(e,t){if(t in e)return e[t];throw new Error(`Missing ${t} in object`)}static getOrFailAs(t,s){return e.getOrFail(t,s)}static get(e,t,s){return t in e?e[t]:s}static getAs(e,t,s){return t in e?e[t]:s}static set(e,t,s){t in e&&(e[t]=s)}static setOrFail(e,t,s){if(!(t in e))throw new Error(`Missing ${t} in object`);e[t]=s}static getAttachedAs(e,t,s){return t in e||(e[t]=s()),e[t]}static equalProperties(t,s,n=!1){for(let i in s)if(s.hasOwnProperty(i)){if(!t.hasOwnProperty(i))return!1;switch(typeof s[i]){case"object":if(!e.equalProperties(t[i],s[i],n))return!1;break;case"string":let r=t[i],o=s[i];if(n&&(r=r.toLowerCase(),o=o.toLowerCase()),r!==o)return!1;break;default:if(t[i]!==s[i])return!1}}return!0}static backupProperties(t,s){const n=Array.isArray(t)?[]:{};for(const i in s)if(s.hasOwnProperty(i)&&t.hasOwnProperty(i)){let r=s[i];n[i]="object"==typeof r?e.backupProperties(t[i],s[i]):t[i]}return n}static applyProperties(t,s){for(const n in s)if(s.hasOwnProperty(n)&&t.hasOwnProperty(n)){const i=s[n];"function"==typeof i?i(t,n):"object"==typeof i?e.applyProperties(t[n],s[n]):t[n]=s[n]}return t}static deepCopy(e){const t={};return Object.keys(e).forEach(s=>{const n=e[s];t[s]="object"==typeof n?this.deepCopy(n):n}),t}static contains(e,...t){return t.findIndex(t=>e.hasOwnProperty(t))>=0}static combineObjects(t,s=!0,n="__init"){if(0===t.length)return{};const i={},r=[];return t.forEach(t=>e.copyProperties(t,i,n,r)),r.length&&e.callMethods(i,r,s?void 0:n),i}static copyProperty(e,t,s){const n=Object.getOwnPropertyDescriptor(t,e);n&&(n.get||n.set)?Object.defineProperty(s,e,n):s[e]=t[e]}static copyProperties(t,s,n,i){if(n&&!i)throw new Error("Missing separator list while a separator name was specified");Object.getOwnPropertyNames(t).forEach(r=>{n&&r===n?i.push(t[r]):e.copyProperty(r,t,s)})}static callMethods(e,t,s){const n=()=>t.forEach(t=>t.call(e));s?e[s]=n:n()}static instanceOf(e,t){if("function"!=typeof t)return!1;try{return e instanceof t}catch(e){return!1}}}var t;!function(e){e[e.degrees=0]="degrees",e[e.radians=1]="radians"}(t||(t={}));class s{constructor(){}static get angleUnit(){return s.s_angleUnit}static set angleUnit(e){s.s_angleUnit=e}static toRadians(e){return s.angleUnit===t.degrees?e*Math.PI/180:e}static fromRadians(e){return s.angleUnit===t.degrees?180*e/Math.PI:e}static rotate(e,t,n,i=0,r=0){e=s.toRadians(e);const o=t-i,a=n-r,l=Math.sin(e),c=Math.cos(e);return{x:o*c-a*l+i,y:o*l+a*c+r}}static angle(e,t,n,i){return s.fromRadians(Math.atan2(i-t,n-e))}static distance(e,t,s,n){const i=e-s,r=t-n;return Math.sqrt(i*i+r*r)}static randomInteger(e,t){return void 0===t&&(t=e,e=0),Math.floor(e+Math.random()*(t-e+1))}static moveTo(e,t,s){return e>t?Math.min(e,t+s):Math.max(e,t-s)}static moveOverTime(e,t,s,n){return t+(e-t)*Math.max(0,Math.min(s,n))/n}static minmax(e,t,s){return Math.max(e,Math.min(t,s))}static isOverlapping(e,t,s,n,i,r,o,a){return!(e>=i+o||i>=e+s||t>=r+a||r>=t+n)}static isNumeric(e){return!Array.isArray(e)&&e-parseFloat(e)+1>=0}static getNumber(e,t){return this.isNumeric(e)?e:t}static xor(e,t){return!(!e&&!t||e&&t)}}s.s_angleUnit=t.degrees;class n{constructor(){}static append(e,t,s){return e.length<=0?t:t.length<=0?e:e+s+t}static escapeHtml(e){return e.replace(/[&<>"'\n\t\r]/g,e=>this.s_escapeHtmlMap.get(e))}static generateCode(e){let t="",n=1;for(let i=0;i<e;i++){let e;for(;e=n>2?s.randomInteger(0,9):s.randomInteger(0,61),0===e||24===e||1===e||47===e;);e<10?(t+=String.fromCharCode(e+48),n=0):e<36?(t+=String.fromCharCode(e+65-10),n++):(t+=String.fromCharCode(e+97-10-26),n++)}return t}static twoDigits(e){return e<10?"0"+e:e.toString()}static threeDigits(e){return("000"+e.toString()).substring(-3)}static replace(e,t){for(const[s,n]of Object.entries(t))e=e.replace(s,n);return e}static hexTwoDigits(e){return("0"+Math.min(255,Math.max(0,e)).toString(16)).substring(-2)}static hexFourDigits(e){return("000"+Math.min(65535,Math.max(0,e)).toString(16)).substring(-4)}static join(e,...t){return t.reduce((t,s)=>(s.startsWith(e)&&(s=s.substring(e.length)),!t.endsWith(e)&&t.length&&(t+=e),t+s))}static joinPath(...e){return this.join("/",...e)}static getOrdinalPost(e){switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}static getOrdinalNumber(e){return e.toString()+this.getOrdinalPost(e)}static asString(e,t=""){switch(e){case null:case void 0:case NaN:return t;default:return e.toString()}}static formatFileSize(e){let t;return t=e<1024?e+" bytes":e<1048576?(e/1024).toFixed(1)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB",t}static getFileExtension(e){const t=e.lastIndexOf("/");t>0&&(e=e.substring(t+1));const s=e.lastIndexOf(".");return!(s<0)&&e.substring(s+1).toLowerCase()}static lpad(e,t,s=" "){for(;e.length<t;)e=s+e;return e}static rpad(e,t,s=" "){for(;e.length<t;)e+=s;return e}static addParameter(e,t,s){return s&&(t=t+"="+s),t=(e.indexOf("?")>=0?"&":"?")+t,e+t}static sprintf(e,...t){const s=new RegExp("%(?!%)((?<param_index>\\d+)\\$)?(\\{(?<prop_typed>\\w+)\\})?(?<add_plus>\\+)?(?<pad_zero>0|'(?<pad_char>.))?(?<left_justify>\\-)?(?<min_size>\\d+)?(\\.(?<max_size>\\d+))?(?<format_type>\\((?<prop_text>\\w+)\\)|[bcdefFousxX])","g");let i="",r=0,o=0,a=null;for(let l=s.exec(e);null!=l;l=s.exec(e)){if(!l.groups)continue;i+=e.substring(r,l.index),r=l.index+l[0].length;let s=null;const c=l.groups.prop_text?l.groups.prop_text:l.groups.prop_typed?l.groups.prop_typed:"";let h,u=null;if(l.groups.param_index){const e=Number(l.groups.param_index);if(e>=t.length){i+="%",r=l.index+1;continue}s=t[e],u=s}else if(0===c.length||null==a){if(o>=t.length){i+="%",r=l.index+1;continue}s=t[o++]}c.length>0&&(null==u&&(null==a&&(a=s),u=a),s=u[c]),l.groups.prop_text&&(l.groups.format_type="s");let m=l.groups.min_size?Number(l.groups.min_size):-1,d=l.groups.max_size?Number(l.groups.max_size):-1;switch(l.groups.format_type){case"s":switch(s){case null:h="null";break;case void 0:h="undefined";break;default:h=s.toString()}break;case"c":h=String.fromCharCode(Number(s));break;case"b":h=Number(s).toString(2);break;case"x":h=Number(s).toString(16).toLowerCase();break;case"X":h=Number(s).toString(16).toUpperCase();break;case"u":h=Number(s).toString();break;case"d":const e=Math.floor(Number(s));h=(e>=0&&l.groups.add_plus?l.groups.add_plus:"")+e.toString();break;case"o":h=Number(s).toString(8);break;case"e":case"f":case"F":const t=Number(s);h=t>=0&&l.groups.add_plus?l.groups.add_plus:"",d<0&&(d=6),h+="e"===l.groups.format_type?t.toExponential(d):t.toFixed(d),d=-1;break;default:throw new Error('Unknown format specifier "'+l.groups.format_type+'"')}if(m>=0){const e=l.groups.pad_char?l.groups.pad_char:l.groups.pad_zero?"0":" ";h=l.groups.left_justify?n.rpad(h,m,e):n.lpad(h,m,e)}d>=0&&(h=h.substring(0,d)),i+=h}return i+=e.substring(r),i=i.replace(/%%/g,"%"),i}static printf(e,...t){console.log(n.sprintf.apply(null,arguments))}}n.s_escapeHtmlMap=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["\n","<br/>"],["\t",""],["\r",""]]);var i;class r{constructor(){this.m_map=new Map}add(e,t){this.m_map.has(e)||this.m_map.set(e,new Set),this.m_map.get(e).add(t)}remove(e,t){if(this.m_map.has(e)){const s=this.m_map.get(e);s.delete(t),0===s.size&&this.m_map.delete(e)}}removeValue(e){const t=this.findKey(e);t&&this.remove(t,e)}removeKey(e){this.m_map.has(e)&&this.m_map.delete(e)}clear(){this.m_map.clear()}get(e){if(this.m_map.has(e)){const t=this.m_map.get(e);return Array.from(t)}return[]}getKeys(){return Array.from(this.m_map.keys())}has(e){return this.m_map.has(e)}hasValue(e,t){return this.m_map.has(e)&&this.m_map.get(e).has(t)}isEmpty(){return 0===this.m_map.size}findKey(e){for(const t of this.m_map.keys())if(this.hasValue(t,e))return t;return null}get keyCount(){return this.m_map.size}get valueTotalCount(){let e=0;return this.m_map.forEach(t=>e+=t.size),e}}!function(e){e[e.Factory=0]="Factory",e[e.Constructor=1]="Constructor",e[e.Static=2]="Static",e[e.SingletonFactory=3]="SingletonFactory",e[e.SingletonConstructor=4]="SingletonConstructor"}(i||(i={}));class o{static registerFactory(e,t,s=[]){o.s_services.set(e,{type:i.Factory,factoryProvider:t,constructorProvider:null,staticProvider:null,instance:null,services:s,factory:null})}static registerSingletonFactory(e,t,s=[]){o.s_services.set(e,{type:i.SingletonFactory,factoryProvider:t,constructorProvider:null,staticProvider:null,instance:null,services:s,factory:null})}static registerConstructor(e,t,s=[]){o.s_services.set(e,{type:i.Constructor,factoryProvider:null,constructorProvider:t,staticProvider:null,instance:null,services:s,factory:null})}static registerSingletonConstructor(e,t,s=[]){o.s_services.set(e,{type:i.SingletonConstructor,factoryProvider:null,constructorProvider:t,staticProvider:null,instance:null,services:s,factory:null})}static registerStatic(e,t){o.s_services.set(e,{type:i.Static,factoryProvider:null,constructorProvider:null,staticProvider:t,instance:null,services:[],factory:null})}static has(e){return o.s_services.has(e)}static getInstance(e){o.validateService(e);const t=o.s_services.get(e);switch(t.type){case i.Constructor:return new t.constructorProvider(...o.getServiceInstancesFromNames(t.services));case i.Factory:return t.factoryProvider(...o.getServiceInstancesFromNames(t.services));case i.Static:return t.staticProvider;case i.SingletonConstructor:return t.instance||(t.instance=new t.constructorProvider(...o.getServiceInstancesFromNames(t.services))),t.instance;case i.SingletonFactory:return t.instance||(t.instance=t.factoryProvider(...o.getServiceInstancesFromNames(t.services))),t.instance}}static call(e,t){return e(...o.getServiceInstancesFromNames(t))}static construct(e,t){return new e(...o.getServiceInstancesFromNames(t))}static validateService(e){if(!o.has(e))throw new Error(`Can not find service: ${e}`)}static getServiceInstancesFromNames(e){return e.map(e=>e.endsWith("()")?o.getServiceFactory(e.slice(0,-2)):o.getInstance(e))}static getServiceFactory(e){o.validateService(e);const t=o.s_services.get(e);return t.factory||(t.factory=()=>o.getInstance(e)),t.factory}}o.s_services=new Map;var a=function(e,t,s,n){return new(s||(s=Promise))(function(i,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})};class l{constructor(){}static delay(e){return a(this,void 0,void 0,function*(){return new Promise(t=>setTimeout(t,e))})}}const c="ufDisplayBackup";class h{constructor(){}static escapeHtml(e){return e.replace(/[&<>"'\n\t\r]/g,e=>this.s_escapeHtmlMap.get(e))}static convertToPlain(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}static addClasses(e,t){e&&t&&t.split(" ").forEach(t=>e.classList.add(t.trim()))}static removeClasses(e,t){e&&t&&t.split(" ").forEach(t=>e.classList.remove(t.trim()))}static toggleClasses(e,t,s){e&&t&&t.split(" ").forEach(t=>e.classList.toggle(t.trim(),s))}static addAndRemoveClasses(e,t,s){this.addClasses(e,t),this.removeClasses(e,s)}static addListener(e,t,s){const n="string"==typeof e?document.querySelector(e):e;if(null==n)return()=>{};const i=t.split(" ").filter(e=>e.trim().length>0);return i.forEach(e=>n.addEventListener(e,s)),()=>{i.forEach(e=>n.removeEventListener(e,s))}}static addBodyListener(e,t,s){const n=t.split(" ").filter(e=>e.trim().length>0),i=t=>{if(null==t.target||!(t.target instanceof HTMLElement))return;const n=t.target.closest(e);if(!n)return;const i=s(n);i instanceof Function?i(t):"handleEvent"in i&&i.handleEvent(t)};return n.forEach(e=>document.body.addEventListener(e,i,!0)),()=>n.forEach(e=>document.body.removeEventListener(e,i,!0))}static addListeners(e,t,s){const n="string"==typeof e?document.querySelectorAll(e):e,i=[];return n.forEach(e=>i.push(h.addListener(e,t,s(e)))),()=>i.forEach(e=>e())}static getAttribute(e,t,s=""){var n,i;return null!==(i=null===(n=e.attributes.getNamedItem(t))||void 0===n?void 0:n.value)&&void 0!==i?i:s}static hasAttribute(e,t){return null!=e.attributes.getNamedItem(t)}static get(e,t){const s="string"==typeof e?(t||document).querySelector(e):e;if(null==s)throw new Error(`Can not find element for ${e}`);return s}static getForId(e){const t=document.getElementById(e);if(null==t)throw new Error(`Can not find element for ${e}`);return t}static fadeIn(e,t=400){e.style.opacity="0",e.style.transition=`opacity ${t}ms`,setTimeout(()=>e.style.opacity="1",0)}static fadeOut(e,t=400){e.style.opacity="1",e.style.transition=`opacity ${t}ms`,setTimeout(()=>e.style.opacity="0",0)}static createAs(e){const t=(new DOMParser).parseFromString(e,"text/html").body.firstChild;return t.remove(),t}static empty(e){for(;e.firstChild;)e.removeChild(e.firstChild)}static getFirstParent(e,t){for(let s=e.parentElement;s;s=s.parentElement)if(s.matches(t))return s;return null}static getParents(e,t){const s=[];for(let n=e.parentElement;n;n=n.parentElement)t&&!n.matches(t)||s.push(n);return s}static show(t,s){t.style.display=null!=s?s:e.getAttachedAs(t,c,()=>"block")}static hide(t){e.getAttachedAs(t,c,()=>t.style.display),t.style.display="none"}static copyAttributes(e,t,s){const n=s||document;for(const s in t){const i=e.getAttribute(s);if(null===i)continue;const r=n.querySelectorAll(t[s]);r&&r.forEach(e=>{this.assignValue(e,i)||(e instanceof HTMLImageElement?e.src=i:e instanceof HTMLElement&&(e.innerText=i))})}}static getAttributeNames(e){const t=[];for(let s=0;s<e.attributes.length;s++){const n=e.attributes[s];t.push(n.name)}return t}static buildDataAttributesMap(e){const t={};for(let s=0;s<e.attributes.length;s++){const n=e.attributes[s].name;n.startsWith("data-uf-")||n.startsWith("data-")&&(t[n]=`[${n}]`)}return t}static reload(){window.history.replaceState&&window.history.replaceState(null,"",window.location.href),window.location.href=window.location.href}static assignValue(e,t){if(e instanceof HTMLInputElement)"checkbox"===e.type||"radio"===e.type?e.checked="true"===t||"1"===t||"checked"===t:(e.value=t,e.dispatchEvent(new InputEvent("input")));else if(e instanceof HTMLTextAreaElement)e.value=t,e.dispatchEvent(new InputEvent("input"));else{if(!(e instanceof HTMLSelectElement))return!1;e.value=t}return e.dispatchEvent(new Event("change")),!0}static isVisible(e,t=!0){const s=window.getComputedStyle(e);return"none"!==s.display&&"hidden"!==s.visibility&&"0"!==s.opacity&&((0!==e.offsetWidth||0!==e.offsetHeight)&&(!t||!e.parentElement||this.isVisible(e.parentElement)))}static getForAttribute(e,t=null,s){let n=e;null!==t&&(n+=`="${t}"`);const i=(s||document).querySelector(`[${n}]`);if(null==i)throw new Error(`Can not find element for attribute ${n}`);return i}static findForAttribute(e,t=null,s){let n=e;return null!==t&&(n+=`="${t}"`),(s||document).querySelector(`[${n}]`)}static findAllForAttribute(e,t=null,s){let n=e;return null!==t&&(n+=`="${t}"`),(s||document).querySelectorAll(`[${n}]`)}static insertAfter(e,t,s){s.nextElementSibling?e.insertBefore(t,s.nextElementSibling):e.appendChild(t)}}h.s_escapeHtmlMap=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#039;"],["\n","<br/>"],["\t",""],["\r",""]]);class u{constructor(){this.m_dialogOpenListeners=new r,this.m_dialogCloseListeners=new r,this.m_dialogObserver=new MutationObserver(e=>{e.forEach(e=>{"open"===e.attributeName&&e.target instanceof HTMLDialogElement&&this.handleToggleDialog(e.target)})})}static get instance(){return null===this.m_instance&&(this.m_instance=new u),this.m_instance}addOpenListener(e,t){const s=h.get(e);this.startObservingDialog(s),this.m_dialogOpenListeners.add(s,t)}removeOpenListener(e,t){const s=h.get(e);this.m_dialogOpenListeners.remove(s,t)}removeAllOpenListeners(e){const t=h.get(e);this.m_dialogOpenListeners.removeKey(t)}addCloseListener(e,t){const s=h.get(e);this.startObservingDialog(s),this.m_dialogCloseListeners.add(s,t)}removeCloseListener(e,t){const s=h.get(e);this.m_dialogCloseListeners.remove(s,t)}removeAllCloseListeners(e){const t=h.get(e);this.m_dialogCloseListeners.removeKey(t)}startObservingDialog(e){this.m_dialogOpenListeners.has(e)||this.m_dialogCloseListeners.has(e)||this.m_dialogObserver.observe(e,{attributes:!0,attributeFilter:["open"]})}handleToggleDialog(e){e.open?this.m_dialogOpenListeners.get(e).forEach(t=>t(e)):this.m_dialogCloseListeners.get(e).forEach(t=>t(e))}}u.m_instance=null;class m{static get ClickEvent(){return this.s_isTouchSupported?"touchstart":"click"}static get DownEvent(){return this.s_isTouchSupported?"touchstart":"mousedown"}static get UpEvent(){return this.s_isTouchSupported?"touchend":"mouseup"}static get MoveEvent(){return this.s_isTouchSupported?"touchmove":"mousemove"}static get isTouchSupported(){return this.s_isTouchSupported}static get isAudioSupported(){return"Audio"in window}static get hasLocalStorage(){return"localStorage"in window}static get isMobileSafari(){const e=window.navigator.userAgent,t=/iPhone|iPad|iPod/i.test(e),s=/WebKit/i.test(e);return t&&s&&!/CriOS/i.test(e)}static get isIOS(){const e=window.navigator.userAgent;return/iPhone|iPad|iPod/i.test(e)&&!/IEMobile/i.test(e)}static get isAndroid(){const e=window.navigator.userAgent;return/Android/i.test(e)&&!/IEMobile/i.test(e)}static get isMobileWindows(){const e=window.navigator.userAgent;return/IEMobile/i.test(e)}static get isInternetExplorer(){const e=window.navigator.userAgent;return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}static getPageXY(e){if(e instanceof TouchEvent)if(e.touches){const t=e.touches[0];if(t)return{pageX:t.pageX,pageY:t.pageY}}else if(e.changedTouches){const t=e.changedTouches[0];if(t)return{pageX:t.pageX,pageY:t.pageY}}if(e instanceof MouseEvent)return{pageX:e.pageX,pageY:e.pageY};throw new Error("Can not determine pageX and pageY from event.")}static getParameterByName(e){e=e.replace(/\[/,"\\[").replace(/\]/,"\\]");const t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}static getCssRule(e){const t=e.toLowerCase();if(document.styleSheets)for(const e of document.styleSheets){let s,n=0;do{if(s=e.cssRules?e.cssRules[n]:e.rules[n],s&&s.selectorText.toLowerCase()===t)return s;n++}while(s)}return!1}static getIEVersion(){const e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>=0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>=0){const t=e.indexOf("rv:");return parseInt(e.substring(t+3,e.indexOf(".",t)),10)}const s=e.indexOf("Edge/");return s>=0&&parseInt(e.substring(s+5,e.indexOf(".",s)),10)}static getAndroidVersion(){if(this.isAndroid){const e=navigator.userAgent.match(/Android [\d+\.]{2,5}/i);return null!==e&&e[0].replace("Android ","")}return!1}static isClicked(e,t){const s=t.target;return e===s||e.contains(s)}static animate(e,t,s){const n=h.get(e),i=e=>{e.target===n&&(n.removeEventListener("animationend",i),h.removeClasses(n,t),s&&s())};n.addEventListener("animationend",i),h.addClasses(n,t)}static transition(e,t,s){const n=h.get(e),i=e=>{e.target===n&&(n.removeEventListener("transitionend",i),s&&s())};n.addEventListener("transitionend",i),h.toggleClasses(n,t)}static getBackgroundImageUrl(e){const t=h.get(e).style.backgroundImage;if(t){const e=t.match(/^url\(["']?(.+?)["']?\)$/);return e&&e.length>1&&e[1]?e[1]:null}return null}static findParent(e,t){for(let s=h.get(e).parentElement;s;s=s.parentElement)if(t(s))return s;return null}static atBottom(e){const t=h.get(e);return t.scrollTop+t.clientHeight>=t.scrollHeight-10}static scrollToBottom(e){const t=h.get(e);t.scrollTop=t.scrollHeight}static loadImage(e,t,s){const n=new Image;return t&&n.addEventListener("load",()=>t(n)),s&&n.addEventListener("error",()=>s(n)),n.src=e,n}}var d,p,g,f,E,_,v;m.s_isTouchSupported=!!("ontouchstart"in window||"msMaxTouchPoints"in window.navigator||window.navigator.maxTouchPoints),function(e){e.Showing="showing",e.Visible="visible",e.Hiding="hiding",e.Hidden="hidden"}(d||(d={})),function(e){e.floater="data-uf-floater"}(p||(p={})),function(e){e.Adjacent="adjacent",e.Overlap="overlap",e.Relative="relative"}(g||(g={})),function(e){e.None="none",e.Show="show",e.Toggle="toggle"}(f||(f={})),function(e){e.None="none",e.Always="always",e.Tree="tree",e.Outside="outside"}(E||(E={})),function(e){e.None="none",e.Fade="fade",e.SlideVertical="slide-vertical",e.SlideHorizontal="slide-horizontal",e.Custom="custom"}(_||(_={}));class y{constructor(e={}){this.m_options={screenX:.5,screenY:.5,element:null,positionX:g.Adjacent,positionY:g.Overlap,floaterX:0,floaterY:0,elementX:0,elementY:0,width:null,height:null,autoShow:f.Toggle,autoHide:E.Outside,transition:_.None,inBounds:!1,content:"",onInitialized:null,onShown:null,onHidden:null,customShow:null,customHide:null,canHide:null},this.m_floaterElement=h.createAs(`<div style="overflow: hidden; position: absolute; left: 0; top: 0; pointer-events: all; z-index: 99999; visibility: hidden; width: max-content; height: max-content" ${p.floater}="1"></div>`),this.m_contentElement=h.createAs('<div style="position: relative; left: 0; top: 0; width: max-content; height: max-content"></div>'),this.m_elements=null,this.m_selectedElement=null,this.m_nextElement=null,this.m_state=d.Hidden,this.m_floaterWidth=0,this.m_floaterHeight=0,this.m_contentWidth=0,this.m_contentHeight=0,this.m_enabled=!0,this.m_removeListeners=[],this.m_removeElementListeners=[],this.m_transitionTimer=null,this.m_options=Object.assign(this.m_options,e),this.m_contentElement.append(this.m_options.content),this.m_floaterElement.append(this.m_contentElement),document.body.append(this.m_floaterElement),setTimeout(()=>{this.copyDimensions(),this.m_floaterElement.remove(),this.hideFloaterElement(),this.m_removeListeners.push(h.addListener(document,"mouseup touchend touchcancel",e=>this.handleDocumentUp(e)),h.addListener(window,"resize",()=>this.handleWindowResize())),this.m_options.onInitialized&&this.m_options.onInitialized(this)},1),this.refreshElements()}destroy(){this.destroyElements(),this.removeListeners(),this.removeElementListeners(),this.m_floaterElement.remove()}setOptions(e){this.m_options=Object.assign(this.m_options,e),this.refreshElements(),this.refreshContent()}hide(){return this.hideFloater()}show(){this.showFloater(null)}positionAndShow(e){this.setOptions({element:e}),this.show()}updatePosition(){this.visible&&this.updateFloaterPosition()}refreshContent(){this.visible&&(h.empty(this.m_contentElement),this.m_contentElement.append(this.m_options.content),setTimeout(()=>{this.copyDimensions(),this.updateFloaterPosition()}))}get visible(){return this.m_state!==d.Hidden}get enabled(){return this.m_enabled}set enabled(e){this.m_enabled=e}get width(){return this.m_options.width||this.m_floaterWidth}get height(){return this.m_options.height||this.m_floaterHeight}get contentWidth(){return this.m_contentWidth}get contentHeight(){return this.m_contentHeight}removeListeners(){this.m_removeListeners.forEach(e=>e()),this.m_removeListeners.length=0}removeElementListeners(){console.debug("removeElementListeners"),this.m_removeElementListeners.forEach(e=>e()),this.m_removeElementListeners.length=0}addElementListeners(e){h.getParents(e).forEach(e=>this.m_removeElementListeners.push(h.addListener(e,"scroll",()=>this.handleScrolling()))),this.m_removeElementListeners.push(h.addListener(window,"scroll",()=>this.handleScrolling()))}showFloaterElementWithTransition(){if(this.m_options.transition===_.Custom&&this.m_options.customShow)this.m_options.customShow(this.m_floaterElement,()=>this.handleShowDone());else switch(this.m_options.transition){case _.Fade:this.showFloaterElementFade();break;case _.SlideVertical:this.showFloaterElementVerticalSlide();break;case _.SlideHorizontal:this.showFloaterElementHorizontalSlide();break;default:this.showFloaterElementImmediately()}}hideFloaterElementWithTransition(){if(this.m_options.transition===_.Custom&&this.m_options.customHide)this.m_options.customHide(this.m_floaterElement,()=>this.handleHideDone());else switch(this.m_options.transition){case _.Fade:this.hideFloaterElementFade();break;case _.SlideVertical:this.hideFloaterElementVerticalSlide();break;case _.SlideHorizontal:this.hideFloaterElementHorizontalSlide();break;default:this.hideFloaterElementImmediately()}}showFloaterElementImmediately(){this.showFloaterElement(),setTimeout(()=>this.handleShowDone())}hideFloaterElementImmediately(){this.hideFloaterElement(),setTimeout(()=>this.handleHideDone())}showFloaterElementFade(){this.showFloaterElement(),this.m_floaterElement.style.transition="",this.m_floaterElement.style.opacity="0",setTimeout(()=>{this.m_floaterElement.style.transition="opacity 0.15s",this.m_floaterElement.style.opacity="1"},10),this.m_transitionTimer=setTimeout(()=>{this.handleShowDone()},160)}hideFloaterElementFade(){this.m_floaterElement.style.transition="",this.m_floaterElement.style.opacity="1",this.m_floaterElement.style.transition="opacity 0.15s",this.m_floaterElement.style.opacity="0",this.m_transitionTimer=setTimeout(()=>{this.hideFloaterElement(),this.handleHideDone()},150)}showFloaterElementVerticalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="0 -100%",setTimeout(()=>{this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="0 0"},10),this.m_transitionTimer=setTimeout(()=>{this.handleShowDone()},160)}hideFloaterElementVerticalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="0 0",this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="0 -100%",this.m_transitionTimer=setTimeout(()=>{this.handleHideDone()},150)}showFloaterElementHorizontalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="-100% 0",setTimeout(()=>{this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="0 0"},10),this.m_transitionTimer=setTimeout(()=>{this.handleShowDone()},160)}hideFloaterElementHorizontalSlide(){this.showFloaterElement(),this.m_contentElement.style.transition="",this.m_contentElement.style.translate="0 0",this.m_contentElement.style.transition="translate 0.15s",this.m_contentElement.style.translate="-100% 0",this.m_transitionTimer=setTimeout(()=>{this.handleHideDone()},150)}hideFloaterElement(){this.m_floaterElement.style.display="none"}showFloaterElement(){this.m_floaterElement.style.display="block"}updateFloaterPosition(){this.m_selectedElement?this.updatePositionForElement():this.updatePositionInDocument()}updatePositionForElement(){const e=this.m_selectedElement.getBoundingClientRect(),t=this.m_options.width||this.m_floaterWidth,s=this.m_options.height||this.m_floaterHeight,n=document.documentElement.clientWidth,i=document.documentElement.clientHeight;let r=this.getFloaterPosition(this.m_options.positionX,n,e.left,e.width,this.m_options.elementX,t,this.m_options.floaterX),o=this.getFloaterPosition(this.m_options.positionY,i,e.top,e.height,this.m_options.elementY,s,this.m_options.floaterY);this.m_options.inBounds&&(r=Math.max(0,Math.min(n-t,r)),o=Math.max(0,Math.min(i-s,o))),this.m_floaterElement.style.left=`${r}px`,this.m_floaterElement.style.top=`${o}px`,this.m_options.width&&(this.m_floaterElement.style.width=`${this.m_options.width}px`),this.m_options.height&&(this.m_floaterElement.style.height=`${this.m_options.height}px`)}getFloaterPosition(e,t,s,n,i,r,o){switch(e){case g.Overlap:return s+r>=t-10?n+s-r-i:s+i;case g.Adjacent:return s+n+r>=t-10?s-r-i:s+n+i;default:return s+n*i-r*o}}updatePositionInDocument(){const e=this.m_options.width||this.m_floaterElement.offsetWidth,t=this.m_options.height||this.m_floaterElement.offsetHeight,s=document.documentElement.clientWidth,n=document.documentElement.clientHeight;this.m_floaterElement.style.left="number"==typeof this.m_options.screenX?(s-e)*this.m_options.screenX+"px":this.m_options.screenX,this.m_floaterElement.style.top="number"==typeof this.m_options.screenY?(n-t)*this.m_options.screenY+"px":this.m_options.screenY,this.m_options.width&&(this.m_floaterElement.style.width=`${this.m_options.width}px`),this.m_options.height&&(this.m_floaterElement.style.height=`${this.m_options.height}px`)}refreshElements(){this.destroyElements(),this.m_options.element&&this.m_options.autoShow!==f.None&&(this.m_elements=Array.isArray(this.m_options.element)?this.m_options.element:[h.get(this.m_options.element)])}destroyElements(){this.m_elements&&(this.removeElementListeners(),this.m_elements=null,this.m_floaterElement&&y.s_floaterToElementMap.delete(this.m_floaterElement))}copyDimensions(){this.m_floaterWidth=this.m_floaterElement.offsetWidth,this.m_floaterHeight=this.m_floaterElement.offsetHeight,this.m_options.content instanceof HTMLElement&&(this.m_contentWidth=this.m_options.content.offsetWidth,this.m_contentHeight=this.m_options.content.offsetHeight)}showFloater(e){this.m_state!==d.Visible&&this.m_state!==d.Showing&&(this.stopTransitionTimer(),e&&(this.addElementListeners(e),this.m_selectedElement=e,y.s_floaterToElementMap.set(this.m_floaterElement,e)),this.m_floaterElement.style.visibility="hidden",this.showFloaterElement(),null==y.s_container.parentElement&&document.body.append(y.s_container),y.s_container.append(this.m_floaterElement),this.updateFloaterPosition(),this.m_floaterElement.style.visibility="visible",this.hideFloaterElement(),this.m_state=d.Showing,this.showFloaterElementWithTransition())}moveFloater(e){this.m_state===d.Visible||this.m_state===d.Showing?(this.m_nextElement=e,this.hideFloater()):this.showFloater(e)}hideFloater(e=null){return this.m_state===d.Hidden||this.m_state===d.Hiding||!(this.m_options.canHide&&!this.m_options.canHide(e))&&(this.stopTransitionTimer(),this.m_state=d.Hiding,setTimeout(()=>this.hideFloaterElementWithTransition()),!0)}isRelated(e){for(;;){const t=h.getParents(e,`[${p.floater}]`);if(0===t.length)return!1;const s=t[0];if(!y.s_floaterToElementMap.has(s))return!1;if(s===this.m_floaterElement)return!0;e=y.s_floaterToElementMap.get(s)}}findClickedElement(e){if(!this.m_elements)return null;for(const t of this.m_elements)if(m.isClicked(t,e))return t;return null}stopTransitionTimer(){this.m_transitionTimer&&(clearTimeout(this.m_transitionTimer),this.m_transitionTimer=null)}handleShowDone(){this.m_state=d.Visible,this.m_options.onShown&&this.m_options.onShown()}handleHideDone(){this.m_floaterElement.remove(),y.s_container.hasChildNodes()||y.s_container.remove(),this.m_state=d.Hidden,this.m_options.onHidden&&this.m_options.onHidden(),this.m_selectedElement&&(this.removeElementListeners(),this.m_selectedElement=null,y.s_floaterToElementMap.delete(this.m_floaterElement)),this.m_nextElement&&(this.showFloater(this.m_nextElement),this.m_nextElement=null)}handleDocumentUp(e){if(!this.m_enabled)return;const t=this.findClickedElement(e);if(t)switch(this.m_state){case d.Hidden:case d.Hiding:return void this.showFloater(t);case d.Visible:case d.Showing:return void(t==this.m_selectedElement?this.m_options.autoShow===f.Toggle&&this.hideFloater(e):this.moveFloater(t))}this.m_state===d.Hidden||this.m_options.autoHide!==E.Always&&(this.m_options.autoHide!==E.Outside||m.isClicked(this.m_floaterElement,e)||null!=this.m_selectedElement&&m.isClicked(this.m_selectedElement,e))&&(this.m_options.autoHide!==E.Tree||this.isRelated(e.target))||this.hideFloater(e)}handleWindowResize(){this.m_state!=d.Hidden&&this.updateFloaterPosition()}handleScrolling(){this.m_state!=d.Hidden&&this.updateFloaterPosition()}}y.s_container=h.createAs('<div style="position: fixed; top: 0; left: 0; pointer-events: none;"></div>'),y.s_floaterToElementMap=new Map,function(e){e.dataOver="data-uf-over",e.dataDisabled="data-uf-disabled"}(v||(v={}));var w;!function(e){e.Idle="Idle",e.Preloading="Preloading",e.Preloaded="Preloaded",e.Loading="Loading",e.Playing="Playing",e.Stopped="Stopped"}(w||(w={}));class b{constructor(){}static get(e){return e?e instanceof jQuery?e:$(e):e}static addEventNamespace(e,t){return e.split(" ").map(e=>e.indexOf(t)<0?e+"."+t:e).join(" ")}}class S{constructor(e,t,s){this.m_valid=!0,this.m_visual={normalClass:"",errorClass:"",errorElements:[],hideElements:[],updateCallback:null,dependentProperties:[]},this.m_ignoreDataChange=!1,this.m_removeListeners=[],this.m_element=e,this.m_visual=Object.assign(this.m_visual,t),this.m_property=s}addRemoveListenerCallback(e){this.m_removeListeners.push(e)}destroy(){this.m_removeListeners.forEach(e=>e()),this.m_removeListeners.length=0}resetBinding(){this.m_visual.normalClass&&h.addClasses(this.m_element,this.m_visual.normalClass),this.m_visual.errorClass&&h.removeClasses(this.m_element,this.m_visual.errorClass),this.m_visual.updateCallback&&this.m_visual.updateCallback(!0)}isFieldActive(){return!0}getInputValue(e){var t;switch(e.type.toLowerCase()){case"checkbox":return e.checked;case"radio":return(null===(t=document.querySelector(`input[name=${e.name}]:checked`))||void 0===t?void 0:t.value)||"";default:return e.value}}getFieldValue(){switch(this.m_element.tagName.toLowerCase()){case"input":return this.getInputValue(this.m_element);case"select":case"textarea":return this.m_element.value;default:return this.m_element.innerHTML}}setInputValue(e,t){switch(e.type.toLowerCase()){case"checkbox":e.checked=!!t;break;case"radio":const s=this.m_element.getAttribute("name");document.querySelectorAll(`input[name=${s}]`).forEach(e=>e.value=t.toString());break;default:e.value=t.toString()}}setFieldValue(e){switch(this.m_element.tagName.toLowerCase()){case"input":this.setInputValue(this.m_element,e);break;case"select":case"textarea":this.m_element.value=e.toString();break;default:this.m_element.innerHTML=e.toString()}}updateFieldVisual(){this.m_valid?(this.m_visual.errorClass&&h.removeClasses(this.m_element,this.m_visual.errorClass),this.m_visual.normalClass&&h.addClasses(this.m_element,this.m_visual.normalClass),this.m_visual.errorElements.forEach(e=>{const t=this.getErrorVisual(e);t.properties.delete(this.m_property),0===t.properties.size&&h.hide(t.element)})):(this.m_visual.normalClass&&h.removeClasses(this.m_element,this.m_visual.normalClass),this.m_visual.errorClass&&h.addClasses(this.m_element,this.m_visual.errorClass),this.m_visual.errorElements.forEach(e=>{const t=this.getErrorVisual(e);0===t.properties.size&&h.show(t.element),t.properties.add(this.m_property)})),this.m_visual.updateCallback&&this.m_visual.updateCallback(this.m_valid)}hideHideElements(){this.m_visual.hideElements.forEach(e=>b.get(e).hide())}updateValid(e){this.m_element instanceof HTMLInputElement||this.m_element instanceof HTMLSelectElement?e&&(e=this.m_element.checkValidity()):this.m_element instanceof HTMLTextAreaElement&&e&&(e=this.m_element.checkValidity()),this.m_valid=e}noDataChange(e){try{this.m_ignoreDataChange=!0,e()}finally{this.m_ignoreDataChange=!1}}static resetErrorVisuals(){S.s_errorElements.forEach(e=>{h.hide(e.element),e.properties.clear()})}get valid(){return this.m_valid}get element(){return this.m_element}get ignoreDataChange(){return this.m_ignoreDataChange}get visual(){return this.m_visual}get property(){return this.m_property}getErrorVisual(e){const t=h.get(e);if(!S.s_errorElements.has(t)){const e={element:t,properties:new Set};return S.s_errorElements.set(t,e),e}return S.s_errorElements.get(t)}}S.s_errorElements=new Map;class C{constructor(){}static get(e,t,s){if(e.has(t))return e.get(t);const n=s();return e.set(t,n),n}}class A{constructor(){this.m_singleEvents=new Map,this.m_groupedEvents=new Map}static get instance(){return A.s_instance||(A.s_instance=new A),A.s_instance}addListenerForGroup(e,t,s,n){const i=C.get(this.m_groupedEvents,e,()=>[]),r=h.addListener(t,s,n);i.push(r)}addListenersForGroup(e,t,s,n){const i=C.get(this.m_groupedEvents,e,()=>[]),r=h.addListeners(t,s,n);i.push(r)}removeAllForGroup(e){if(!this.m_groupedEvents.has(e))return;const t=this.m_groupedEvents.get(e);this.m_groupedEvents.delete(e),t.forEach(e=>e())}addSingle(e,t,s){this.removeSingle(e,t);C.get(this.m_singleEvents,e,()=>new Map).set(t,()=>h.addListener(e,t,s))}removeSingle(e,t){const s=this.m_singleEvents.get(e);if(!s)return;const n=s.get(t);n&&(n(),s.delete(t),s.size>0||this.m_singleEvents.delete(e))}}var F,T,L,x,k,I;A.s_instance=null,function(e){e.DisplayValue="data-uf-display-value",e.ShowClasses="data-uf-show-classes",e.HideClasses="data-uf-hide-classes"}(F||(F={})),function(e){e.Self="_self",e.Parent="_parent",e.Next="_next",e.Previous="_previous",e.Grandparent="_grandparent",e.Dialog="_dialog"}(T||(T={}));class P{constructor(){this.m_isInitialized=!1}scan(){}init(){document.addEventListener("DOMContentLoaded",()=>this.handleDomContentLoaded())}addSourceAndTargetElements(e,t,s,n=null,i=null,r=""){document.querySelectorAll("["+e+"]").forEach(o=>this.addSourceElement(e,o,t,s,n,i,r))}showElement(t,s){const n=h.getAttribute(t,F.ShowClasses),i=h.getAttribute(t,F.HideClasses);if(n||i)return void h.addAndRemoveClasses(t,s?n:i,s?i:n);const r=h.getAttribute(t,F.DisplayValue,"auto");if("disabled"==r)return;const o=e.getAttachedAs(t,"UFDisplayValue",()=>"auto"==r?t.style.display:r);t.style.display=s?o:"none"}processDataAttributeWithPostfix(e,t,s=20){document.querySelectorAll(`[${e}]`).forEach(e=>t(e,""));for(let n=1;n<=s;n++){const s=`-${n}`;document.querySelectorAll(`[${e}${s}]`).forEach(e=>t(e,s))}}getTargetElements(e,t){var s,n;switch(t){case"":case T.Self:return[e];case T.Parent:return this.buildListFromOneElement(e.parentElement);case T.Next:return this.buildListFromOneElement(e.nextElementSibling);case T.Previous:return this.buildListFromOneElement(e.previousElementSibling);case T.Grandparent:return this.buildListFromOneElement(null!==(n=null===(s=e.parentElement)||void 0===s?void 0:s.parentElement)&&void 0!==n?n:null);case T.Dialog:return this.buildListFromOneElement(e.closest("dialog"));default:return[...document.querySelectorAll(t)]}}addSourceElement(e,t,s,n,i,r,o=""){const a=h.getAttribute(t,e);if(!a)return;document.querySelectorAll(a).forEach(e=>this.addTargetElement(t,e,s,n,i,r,o))}addTargetElement(e,t,s,n,i,r,o=""){s.includes(t)||(s.push(t),i&&r&&(o?A.instance.addListenerForGroup(o,t,i,()=>r(t)):t.addEventListener(i,()=>r(t)))),n.add(t,e)}buildListFromOneElement(e){return e?[e]:[]}handleDomContentLoaded(){this.m_isInitialized||(this.m_isInitialized=!0,this.scan())}}!function(e){e.NoFilter="data-uf-no-filter",e.FilterTable="data-uf-filter-table",e.HeaderRow="data-uf-header-row",e.RowNoMatch="data-uf-row-no-match"}(L||(L={}));class H extends P{scan(){A.instance.removeAllForGroup(L.FilterTable);const e=document.createElement("style");e.innerHTML=`[${L.RowNoMatch}] { display: none !important; }`,document.head.appendChild(e);document.querySelectorAll("input["+L.FilterTable+"]").forEach(e=>this.initFilterInput(e))}initFilterInput(e){const t=e.getAttribute(L.FilterTable);if(!t)return;const s=document.querySelectorAll(t);if(!s.length)return;const n=new Map;s.forEach(e=>n.set(e,this.getAllowedColumns(e))),A.instance.addListenerForGroup(L.FilterTable,e,"input",()=>this.applyFilter(e.value,n))}getAllowedColumns(e){const t=[],s=e.querySelector("tr["+L.HeaderRow+"]");return s&&s.querySelectorAll("th").forEach(e=>{t.push(null==e.attributes.getNamedItem(L.NoFilter))}),t}applyFilter(e,t){const s=e.toLowerCase();t.forEach((e,t)=>this.applyFilterToTable(t,s,e))}applyFilterToTable(e,t,s){e.querySelectorAll("tr").forEach(e=>{if(null!=e.attributes.getNamedItem(L.HeaderRow))return;let n=!1,i=0;e.querySelectorAll("td").forEach(e=>{(i>=s.length||s[i])&&null==e.attributes.getNamedItem(L.NoFilter)&&e.textContent&&(n||(n=e.textContent.toLowerCase().indexOf(t)>=0)),i++}),n?e.removeAttribute(L.RowNoMatch):e.attributes.setNamedItem(document.createAttribute(L.RowNoMatch))}),e.dispatchEvent(new Event(H.RowsChangedEvent))}}H.RowsChangedEvent="rowsChanged",function(e){e.ClickStylingSelector="data-uf-click-styling-selector",e.ClickStylingClasses="data-uf-click-styling-classes"}(x||(x={}));!function(e){e.DetailsCollapse="data-uf-details-collapse",e.DetailsExpand="data-uf-details-expand"}(k||(k={}));class M extends P{constructor(){super(...arguments),this.m_clickableElements=[],this.m_collapsableElements=new r,this.m_expandableElements=new r}scan(){super.scan(),this.clear(),this.addSourceAndTargetElements(k.DetailsCollapse,this.m_clickableElements,this.m_collapsableElements,"click",e=>this.handleCollapseClick(e),k.DetailsCollapse),this.addSourceAndTargetElements(k.DetailsExpand,this.m_clickableElements,this.m_expandableElements,"click",e=>this.handleExpandClick(e),k.DetailsCollapse)}clear(){A.instance.removeAllForGroup(k.DetailsCollapse),this.m_clickableElements.length=0,this.m_collapsableElements.clear(),this.m_expandableElements.clear()}handleCollapseClick(e){this.m_collapsableElements.has(e)&&this.m_collapsableElements.get(e).forEach(e=>e.open=!1)}handleExpandClick(e){this.m_expandableElements.has(e)&&this.m_expandableElements.get(e).forEach(e=>e.open=!0)}}!function(e){e.ShowDialog="data-uf-show-dialog"}(I||(I={}));class N extends P{scan(){A.instance.removeAllForGroup(I.ShowDialog),A.instance.addListenersForGroup(I.ShowDialog,"["+I.ShowDialog+"]","click",e=>()=>this.handleShowDialogClick(e))}getDialog(e){const t=h.getAttribute(e,I.ShowDialog);if(!t)return null;const s=h.get(t);return s||console.error(`Dialog not found: ${t}`),s}handleShowDialogClick(e){const t=this.getDialog(e);if(!t)return;const s=h.buildDataAttributesMap(e);h.copyAttributes(e,s,t),t.showModal()}}var D,O,G,V,q,R,z,j,W,U;!function(e){e.EventAction="data-uf-event-action",e.EventEvents="data-uf-event-events",e.EventTarget="data-uf-event-target",e.EventData="data-uf-event-data",e.EventAttribute="data-uf-event-attribute",e.EventState="data-uf-event-state",e.EventKey="data-uf-event-key",e.EventPreventDefault="data-uf-event-prevent-default",e.ClickAction="data-uf-click-action",e.ClickTarget="data-uf-click-target",e.ClickData="data-uf-click-data",e.ClickAttribute="data-uf-click-attribute",e.LoadAction="data-uf-load-action",e.LoadTarget="data-uf-load-target",e.LoadData="data-uf-load-data",e.LoadAttribute="data-uf-load-attribute"}(D||(D={})),function(e){e.RemoveFromDom="remove-from-dom",e.Hide="hide",e.Show="show",e.Toggle="toggle",e.ToggleClass="toggle-class",e.RemoveFromClass="remove-from-class",e.AddToClass="add-to-class",e.ShowModal="show-modal",e.ShowNonModal="show-non-modal",e.Close="close",e.SetAttribute="set-attribute",e.Reload="reload",e.SetValue="set-value",e.SetText="set-text",e.SetHtml="set-html"}(O||(O={}));class X extends P{constructor(){super(...arguments),this.m_hasLoaded=!1}scan(){A.instance.removeAllForGroup(D.EventAction),this.processDataAttributeWithPostfix(D.EventAction,(e,t)=>this.processEventElement(e,t)),this.processDataAttributeWithPostfix(D.ClickAction,(e,t)=>this.processClickableElement(e,t)),this.m_hasLoaded||(this.processDataAttributeWithPostfix(D.LoadAction,(e,t)=>this.processLoadElement(e,t)),this.m_hasLoaded=!0)}processEventElement(e,t=""){const s=h.getAttribute(e,D.EventAction+t),n=h.getAttribute(e,D.EventEvents+t),i=h.getAttribute(e,D.EventTarget+t),r=h.getAttribute(e,D.EventData+t),o=h.getAttribute(e,D.EventAttribute+t),a=h.getAttribute(e,D.EventState+t),l=h.getAttribute(e,D.EventKey+t),c=h.hasAttribute(e,D.EventPreventDefault+t);n&&s&&A.instance.addListenerForGroup(D.EventAction,e,n,t=>this.performActionForEvent(t,e,s,i,r,o,a,l,c))}processClickableElement(e,t=""){const s=h.getAttribute(e,D.ClickAction+t),n=h.getAttribute(e,D.ClickTarget+t),i=h.getAttribute(e,D.ClickData+t),r=h.getAttribute(e,D.ClickAttribute+t);s&&A.instance.addListenerForGroup(D.EventAction,e,"click",()=>this.performAction(e,s,n,i,r))}processLoadElement(e,t=""){const s=h.getAttribute(e,D.LoadAction+t),n=h.getAttribute(e,D.LoadTarget+t),i=h.getAttribute(e,D.LoadData+t),r=h.getAttribute(e,D.LoadAttribute+t);s&&this.performAction(e,s,n,i,r)}performActionForEvent(e,t,s,n,i,r,o,a,l){if(e instanceof ToggleEvent){if(o&&o!==e.newState)return}else if(e instanceof KeyboardEvent&&a!==e.key)return;this.performAction(t,s,n,i,r),l&&e.preventDefault()}performAction(e,t,s,n,i){""===s&&(s=t===O.Close?"_dialog":"_self");this.getTargetElements(e,s).forEach(e=>this.performActionOnElement(e,t,n,i))}performActionOnElement(e,t,s,n){switch(t){case O.RemoveFromDom:e.remove();break;case O.Hide:this.showElement(e,!1);break;case O.Show:this.showElement(e,!0);break;case O.Toggle:this.showElement(e,"none"===e.style.display);break;case O.ToggleClass:e.classList.toggle(s);break;case O.RemoveFromClass:e.classList.remove(s);break;case O.AddToClass:e.classList.add(s);break;case O.ShowModal:e instanceof HTMLDialogElement&&e.showModal();break;case O.ShowNonModal:e instanceof HTMLDialogElement&&e.show();break;case O.Close:e instanceof HTMLDialogElement&&e.close();break;case O.SetAttribute:e.setAttribute(n,s);break;case O.Reload:h.reload();break;case O.SetValue:h.assignValue(e,s);break;case O.SetText:e.innerText=s;break;case O.SetHtml:e.innerHTML=s}}}!function(e){e.ImagePreview="data-uf-image-preview",e.FileName="data-uf-file-name",e.ImageWidth="data-uf-image-width",e.ImageHeight="data-uf-image-height",e.FileSize="data-uf-file-size",e.FileType="data-uf-file-type",e.FileNone="data-uf-file-none",e.FileShow="data-uf-file-show"}(G||(G={}));class Y extends P{constructor(){super(...arguments),this.m_inputElements=[],this.m_previewElements=new r,this.m_nameElements=new r,this.m_widthElements=new r,this.m_heightElements=new r,this.m_sizeElements=new r,this.m_typeElements=new r,this.m_noneElements=new r,this.m_showElements=new r}scan(){this.clear(),this.addElements(),this.m_inputElements.forEach(e=>this.clearElements(e))}clear(){A.instance.removeAllForGroup(G.ImagePreview),this.m_inputElements.length=0,this.m_heightElements.clear(),this.m_nameElements.clear(),this.m_previewElements.clear(),this.m_sizeElements.clear(),this.m_typeElements.clear(),this.m_widthElements.clear(),this.m_noneElements.clear(),this.m_showElements.clear()}addElements(){this.addElement(G.ImagePreview,this.m_previewElements),this.addElement(G.FileName,this.m_nameElements),this.addElement(G.ImageWidth,this.m_widthElements),this.addElement(G.ImageHeight,this.m_heightElements),this.addElement(G.FileSize,this.m_sizeElements),this.addElement(G.FileType,this.m_typeElements),this.addElement(G.FileNone,this.m_noneElements),this.addElement(G.FileShow,this.m_showElements)}addElement(e,t){this.addSourceAndTargetElements(e,this.m_inputElements,t,"input",e=>this.handleFileChange(e),G.ImagePreview)}processFile(e,t){this.m_nameElements.get(e).forEach(e=>e.textContent=t.name),this.m_sizeElements.get(e).forEach(e=>e.textContent=n.formatFileSize(t.size)),this.m_typeElements.get(e).forEach(e=>e.textContent=t.type),this.m_noneElements.get(e).forEach(e=>this.showElement(e,!1)),this.m_showElements.get(e).forEach(e=>this.showElement(e,!0)),this.loadImageFile(e,t)}loadImageFile(e,t){const s=new Image;s.onload=()=>this.processImageFile(e,t,s),s.src=URL.createObjectURL(t)}processImageFile(e,t,s){this.m_previewElements.get(e).forEach(e=>e.src=s.src),this.m_widthElements.get(e).forEach(e=>e.textContent=s.width.toString()),this.m_heightElements.get(e).forEach(e=>e.textContent=s.height.toString())}clearElements(e){this.m_previewElements.get(e).forEach(e=>e.src=""),this.m_nameElements.get(e).forEach(e=>e.textContent="-"),this.m_widthElements.get(e).forEach(e=>e.textContent="-"),this.m_heightElements.get(e).forEach(e=>e.textContent="-"),this.m_sizeElements.get(e).forEach(e=>e.textContent="-"),this.m_typeElements.get(e).forEach(e=>e.textContent="-"),this.m_noneElements.get(e).forEach(e=>this.showElement(e,!0)),this.m_showElements.get(e).forEach(e=>this.showElement(e,!1))}handleFileChange(e){null!=e.files&&(e.files.length>0?this.processFile(e,e.files[0]):this.clearElements(e))}}!function(e){e.NoFilter="data-uf-no-filter",e.FilterInput="data-uf-filter-input",e.NoMatch="data-uf-filter-no-match",e.Group="data-uf-filter-group",e.Container="data-uf-filter-container"}(V||(V={}));class B extends P{scan(){A.instance.removeAllForGroup(V.FilterInput),B.s_styledAdded||(this.addStyle(),B.s_styledAdded=!0),this.initFilterInputs()}initFilterInputs(){document.querySelectorAll("input["+V.FilterInput+"]").forEach(e=>this.initFilterInput(e))}initFilterInput(e){const t=e.getAttribute(V.FilterInput);if(!t)return;const s=document.querySelectorAll(t),n=[],i=[];s.forEach(e=>{n.push(this.getFilterableChildren(e)),i.push(...h.findAllForAttribute(V.Container,null,e))}),A.instance.addListenerForGroup(V.FilterInput,e,"input",()=>this.applyFilter(e.value,n,i))}getFilterableChildren(e){const t=e.querySelectorAll(`:not([${V.NoFilter}])`),s=new Map,n=[];return t.forEach(e=>{var t;const i=e.getAttribute(V.Group);i?(s.has(i)||s.set(i,[]),null===(t=s.get(i))||void 0===t||t.push(e)):n.push([e])}),[...n,...Array.from(s.values())]}applyFilter(e,t,s){const n=e.toLowerCase();t.forEach(e=>this.applyFilterToParent(n,e)),s.forEach(e=>this.applyFilterToContainer(n,e))}applyFilterToParent(e,t){t.forEach(t=>this.applyFilterToGroupedChildren(e,t))}applyFilterToGroupedChildren(e,t){let s=!1;t.forEach(t=>{var n;t.hasAttribute(V.NoFilter)||s||(s=(null!==(n=t.innerText)&&void 0!==n?n:"").toLowerCase().indexOf(e)>=0)}),t.forEach(e=>{s?e.removeAttribute(V.NoMatch):e.attributes.setNamedItem(document.createAttribute(V.NoMatch))})}applyFilterToContainer(e,t){let s=!1;Array.from(t.children).forEach(t=>{var n;return s||(s=(null!==(n=t.innerText)&&void 0!==n?n:"").toLowerCase().indexOf(e)>=0)}),s?t.removeAttribute(V.NoMatch):t.attributes.setNamedItem(document.createAttribute(V.NoMatch))}addStyle(){const e=document.createElement("style");e.innerHTML=`[${V.NoMatch}] { display: none !important; }`,document.head.appendChild(e)}}B.s_styledAdded=!1,function(e){e.Type="data-uf-toggle-type",e.Property="data-uf-toggle-property",e.Selector="data-uf-toggle-selector",e.Change="data-uf-toggle-change",e.Classes="data-uf-toggle-classes",e.ClassesMatch="data-uf-toggle-classes-match",e.Condition="data-uf-toggle-condition",e.Value="data-uf-toggle-value",e.Values="data-uf-toggle-values",e.ValuesSeparator="data-uf-toggle-values-separator",e.Required="data-uf-toggle-required",e.Target="data-uf-toggle-target",e.Compare="data-uf-toggle-compare"}(q||(q={})),function(e){e[e.Auto=0]="Auto",e[e.Value=1]="Value",e[e.Valid=2]="Valid",e[e.Property=3]="Property"}(R||(R={})),function(e){e[e.Auto=0]="Auto",e[e.None=1]="None",e[e.Enable=2]="Enable",e[e.Visible=3]="Visible",e[e.Required=4]="Required",e[e.NotRequired=5]="NotRequired"}(z||(z={})),function(e){e[e.Any=0]="Any",e[e.All=1]="All",e[e.None=2]="None"}(j||(j={})),function(e){e[e.None=0]="None",e[e.Match=1]="Match",e[e.NoMatch=2]="NoMatch"}(W||(W={})),function(e){e[e.Equal=0]="Equal",e[e.Contain=1]="Contain",e[e.Inside=2]="Inside",e[e.LessThan=3]="LessThan",e[e.LessThanOrEqual=4]="LessThanOrEqual",e[e.GreaterThan=5]="GreaterThan",e[e.GreaterThanOrEqual=6]="GreaterThanOrEqual"}(U||(U={}));const K=`\n  [${q.Type}], \n  [${q.Selector}], \n  [${q.Change}], \n  [${q.Classes}], \n  [${q.ClassesMatch}], \n  [${q.Condition}],\n  [${q.Compare}]\n`;class J extends P{constructor(){super(...arguments),this.m_radioGroups=new r}scan(){A.instance.removeAllForGroup(q.Type),this.m_radioGroups.clear();document.querySelectorAll(K).forEach(e=>{const t=this.buildToggleData(e);t&&(t.formElements.forEach(s=>this.initializeFormElement(s,e,t)),this.updateToggleElement(e,t))}),this.installRadioGroupFix()}getToggleType(e){switch(h.getAttribute(e,q.Type)){case"value":return R.Value;case"valid":return R.Valid;case"property":return R.Property;default:return R.Auto}}getToggleChange(e){switch(h.getAttribute(e,q.Change)){case"enable":return z.Enable;case"visible":return z.Visible;case"none":return z.None;case"required":return z.Required;case"not-required":return z.NotRequired;default:return z.Auto}}getToggleCondition(e){switch(h.getAttribute(e,q.Condition)){case"any":return j.Any;case"none":return j.None;default:return j.All}}getToggleCompare(e){switch(h.getAttribute(e,q.Compare)){case"contain":return U.Contain;case"inside":return U.Inside;case"lt":return U.LessThan;case"lte":return U.LessThanOrEqual;case"gt":return U.GreaterThan;case"gte":return U.GreaterThanOrEqual;default:return U.Equal}}getToggleRequired(e){switch(h.getAttribute(e,q.Required)){case"match":return W.Match;case"no-match":return W.NoMatch;default:return W.None}}getFormElements(e){const t=h.getAttribute(e,q.Selector)||"";if(""===t){const t=e.closest("form");return t?[t]:[]}return[...document.querySelectorAll(t)]}buildToggleData(e){const t=this.getFormElements(e);if(!t.length)return null;const s=t[0],n=s.tagName,i="FORM"===n,r="INPUT"===n&&["checkbox","radio"].includes(s.type),o="INPUT"===n&&"file"===s.type,a="IMG"===n;let l=this.getToggleType(e),c=this.getToggleChange(e);const u=this.getToggleRequired(e),m=h.getAttribute(e,q.Classes),d=h.getAttribute(e,q.ClassesMatch),p=this.getToggleCondition(e),g=this.getToggleCompare(e),f=h.getAttribute(e,q.Property,"checked"),E=h.getAttribute(e,q.ValuesSeparator,","),_=h.getAttribute(e,q.Values)||h.getAttribute(e,q.Value)||"",v=_.length>0?_.split(E):[];if(r&&0===v.length&&v.push("true"),c===z.Auto)if(m.length+d.length>0)c=z.None;else switch(e.tagName){case"INPUT":case"BUTTON":case"SELECT":c=z.Enable;break;default:c=z.Visible}i?l=R.Valid:l===R.Auto&&(l=r?R.Property:v.length>0||o?R.Value:R.Valid);return{type:l,property:f,change:c,cssClassesMatch:d,cssClassesNoMatch:m,condition:p,compare:g,required:u,isForm:i,isImage:a,formElements:t,values:v,target:h.getAttribute(e,q.Target)}}isValidToggleTarget(t){if(t.isForm)return t.formElements[0].checkValidity();let s=t.condition!==j.Any;return t.formElements.every(n=>{let i=null,r="";switch(t.type){case R.Valid:i=n.checkValidity();break;case R.Property:r=e.getAs(n,t.property,"").toString();break;default:r=e.getAs(n,t.isImage?"src":"value","")}switch(null===i&&(i=this.isValidValue(r,t)),t.condition){case j.Any:if(i)return s=!0,!1;break;case j.All:if(!i)return s=!1,!1;break;case j.None:if(i)return s=!1,!1}return!0}),s}isValidValue(e,t){if(0==t.values.length||t.isImage)return e.length>0;if(t.compare==U.Equal)return t.values.indexOf(e)>=0;const s=e.toString().toLowerCase();if(t.compare==U.Inside)return t.values.some(e=>s.includes(e.toString().toLowerCase()));if(t.compare==U.Contain)return t.values.some(e=>e.toString().toLowerCase().includes(s));const n=parseFloat(s);return!isNaN(n)&&(t.compare==U.LessThan?t.values.some(e=>n<parseFloat(e)):t.compare==U.LessThanOrEqual?t.values.some(e=>n<=parseFloat(e)):t.compare==U.GreaterThan?t.values.some(e=>n>parseFloat(e)):t.compare==U.GreaterThanOrEqual&&t.values.some(e=>n>=parseFloat(e)))}updateToggleElement(e,t){const s=this.isValidToggleTarget(t);this.getTargetElements(e,t.target).forEach(e=>this.updateToggleTargetElement(e,t,s))}updateToggleTargetElement(t,s,n){switch(s.cssClassesMatch.length&&h.toggleClasses(t,s.cssClassesMatch,n),s.cssClassesNoMatch.length&&h.toggleClasses(t,s.cssClassesNoMatch,!n),s.change){case z.Enable:e.set(t,"disabled",!n);break;case z.Visible:this.showElement(t,n)}switch(s.required){case W.Match:e.set(t,"required",n);break;case W.NoMatch:e.set(t,"required",!n)}}initializeFormElement(e,t,s){A.instance.addListenerForGroup(q.Type,e,"click keyup keydown input change",()=>this.updateToggleElement(t,s)),"INPUT"==e.tagName&&this.checkRadioGroup(e)}checkRadioGroup(e){if("radio"===e.type){const t=e.name;t&&this.m_radioGroups.add(t,e)}}installRadioGroupFix(){this.m_radioGroups.getKeys().forEach(e=>{const t=document.querySelectorAll(`input[name="${e}"][type="radio"]`),s=this.m_radioGroups.get(e);t.forEach(e=>{A.instance.addListenerForGroup(q.Type,e,"change",()=>this.dispatchChangeEvent(s,e))})})}dispatchChangeEvent(e,t){t.checked&&e.forEach(e=>{t==e||e.checked||e.dispatchEvent(new Event("change"))})}}class Q{setObject(e,t){this.setString(e,JSON.stringify(t))}getObject(e,t){try{return this.has(e)?JSON.parse(this.getString(e,"")):t}catch(e){return t}}setNumber(e,t){this.setString(e,""+t)}getNumber(e,t){if(this.has(e)){const s=parseFloat(this.getString(e,""));return isNaN(s)?t:s}return t}setInteger(e,t){this.setString(e,""+t)}getInteger(e,t){if(this.has(e)){const s=parseInt(this.getString(e,""),10);return isNaN(s)?t:s}return t}setBoolean(e,t){this.setString(e,t?"1":"0")}getBoolean(e,t){return this.has(e)?"1"===this.getString(e,""):t}}class Z extends Q{setString(e,t){try{window.localStorage.setItem(e,t)}catch(e){}}getString(e,t){if(!e||0===e.length)return t;try{return window.localStorage.hasOwnProperty(e)?window.localStorage.getItem(e):t}catch(e){}return t}remove(e){try{window.localStorage.removeItem(e)}catch(e){}}has(e){try{return e in window.localStorage}catch(e){}return!1}clear(){try{window.localStorage.clear()}catch(e){}}}var ee,te;!function(e){e.Sorting="data-uf-grid-sorting",e.SortControl="data-uf-sort-control",e.SortButton="data-uf-sort-button",e.SortKey="data-uf-sort-key",e.GroupSize="data-uf-group-size",e.ItemContainer="data-uf-item-container",e.ItemGroup="data-uf-item-group",e.SortValue="data-uf-sort-value",e.SortAscending="data-uf-sort-ascending",e.SortDescending="data-uf-sort-descending",e.StorageId="data-uf-storage-id",e.GridBody="data-uf-grid-body"}(ee||(ee={})),function(e){e[e.None=0]="None",e[e.Number=1]="Number",e[e.Text=2]="Text",e[e.Date=3]="Date"}(te||(te={}));const se=`:scope > :not([${ee.ItemContainer}],[${ee.ItemGroup}],[${ee.SortControl}])`;function ne(e){switch(h.getAttribute(e,ee.SortControl)){case"number":return te.Number;case"text":return te.Text;case"date":return te.Date;default:return te.None}}class ie extends P{constructor(){super(...arguments),this.m_localStorage=new Z,this.m_grids=new Map}scan(){A.instance.removeAllForGroup(ee.Sorting),this.m_grids.clear();h.findAllForAttribute(ee.Sorting).forEach(e=>this.initGrid(e))}resort(e){this.m_grids.has(e)&&this.sortGrid(this.m_grids.get(e))}initGrid(e){const t=this.getControls(e);if(!t.length)return;const s=parseInt(h.getAttribute(e,ee.GroupSize,t.length.toString())),n=this.getContainers(e),i=this.getGroups(e),r=this.groupItems(e,s);if(n.length+i.length+r.length==0)return;const o={grid:e,controls:t,sortInfo:this.getSortInfo(e,t),itemContainers:n,itemGroups:i,groupedItems:r,ascendingClasses:h.getAttribute(e,ee.SortAscending),descendingClasses:h.getAttribute(e,ee.SortDescending)};this.m_grids.set(e,o),t.filter(e=>e.type!=te.None).forEach(e=>A.instance.addListenerForGroup(ee.Sorting,e.button,"click",()=>this.handleControlClick(e,o))),this.addClasses(o),this.sortGrid(o)}getControls(e){const t=h.findAllForAttribute(ee.SortControl,null,e);return Array.from(t).map((e,t)=>{var s;return{control:e,key:h.getAttribute(e,ee.SortKey,t.toString()),button:null!==(s=h.findForAttribute(ee.SortButton,null,e))&&void 0!==s?s:e,type:ne(e)}})}getContainers(e){const t=h.findAllForAttribute(ee.ItemContainer,null,e);return Array.from(t).map(e=>({containerElement:e,items:this.getDataItems(Array.from(e.children))}))}getDataItems(e){return e.filter(e=>e instanceof HTMLElement).map((e,t)=>({element:e,key:h.getAttribute(e,ee.SortKey,t.toString())}))}getGroups(e){const t=new Map;h.findAllForAttribute(ee.ItemGroup,null,e).forEach(e=>{const s=h.getAttribute(e,ee.ItemGroup,"");""!=s&&(t.has(s)||t.set(s,[]),t.get(s).push(e))});return Array.from(t.values()).map(e=>({items:this.getDataItems(e)}))}groupItems(e,t){var s;const n=null!==(s=h.findForAttribute(ee.GridBody,null,e))&&void 0!==s?s:e,i=Array.from(n.querySelectorAll(se)),r=[];for(let e=0;e<i.length;e+=t){const s=i.slice(e,e+t);r.push({items:this.getDataItems(s)})}return r}getSortInfo(e,t){const s={key:t[0].key,descending:!1},n=h.getAttribute(e,ee.StorageId);if(!n||!this.m_localStorage.has(n))return s;const i=this.m_localStorage.getObject(n,s);for(const e of t)if(e.key==i.key)return i;return s}saveSortInfo(e,t){const s=h.getAttribute(e,ee.StorageId);s&&this.m_localStorage.setObject(s,t)}addClasses(e){const t=this.getControl(e.sortInfo.key,e.controls);h.addClasses(t.control,e.sortInfo.descending?e.descendingClasses:e.ascendingClasses)}removeClasses(e){const t=this.getControl(e.sortInfo.key,e.controls);h.removeClasses(t.control,e.sortInfo.descending?e.descendingClasses:e.ascendingClasses)}getControl(e,t){for(const s of t)if(s.key===e)return s;throw new Error(`Can not find control for ${e}`)}sortGrid(e){const t=this.getControl(e.sortInfo.key,e.controls),s=e.sortInfo.descending?-1:1;e.itemContainers.sort((e,n)=>s*this.compareGroup(e,n,t)),e.itemGroups.sort((e,n)=>s*this.compareGroup(e,n,t)),e.groupedItems.sort((e,n)=>s*this.compareGroup(e,n,t)),this.reorderContainers(e.itemContainers),this.reorderGroups(e.itemGroups,`[${ee.ItemGroup}]`),this.reorderGroups(e.groupedItems,se)}findDataItem(e,t){for(const s of t)if(s.key==e)return s;return null}getValue(e){var t;return null==e?null:null!==(t=e.element.getAttribute(ee.SortValue))&&void 0!==t?t:e.element.innerText}compareGroup(e,t,s){const n=this.findDataItem(s.key,e.items),i=this.findDataItem(s.key,t.items),r=this.getValue(n),o=this.getValue(i);switch(s.type){case te.Text:return this.compareText(r,o);case te.Number:return this.compareNumber(r,o);case te.Date:return this.compareDate(r,o);default:return 0}}compareText(e,t){return e===t?0:null===e?1:null===t?-1:e.localeCompare(t)}compareNumber(e,t){if(e===t)return 0;if(null===e)return 1;if(null===t)return-1;const s=parseFloat(e),n=parseFloat(t);return this.compareParsedNumbers(s,n)}compareParsedNumbers(e,t){const s=Number.isNaN(e),n=Number.isNaN(t);return s&&n?0:s?-1:n?1:e-t}compareDate(e,t){if(e===t)return 0;if(null===e)return-1;if(null===t)return 1;const s=Date.parse(e),n=Date.parse(t);return this.compareParsedNumbers(s,n)}reorderContainers(e){this.reorderElements(e.map(e=>e.containerElement),new Map,`[${ee.ItemContainer}]`)}reorderGroups(e,t){const s=new Map;for(const n of e)this.reorderElements(n.items.map(e=>e.element),s,t)}reorderElements(e,t,s){for(const n of e){const e=n.parentElement;if(null!=e){if(t.has(e))h.insertAfter(e,n,t.get(e));else{const t=e.querySelector(s);if(null==t)continue;e.insertBefore(t,n)}t.set(e,n)}}}handleControlClick(e,t){this.removeClasses(t),t.sortInfo.key==e.key?t.sortInfo.descending=!t.sortInfo.descending:(t.sortInfo.key=e.key,t.sortInfo.descending=!1),this.addClasses(t),this.sortGrid(t),this.saveSortInfo(t.grid,t.sortInfo),t.grid.dispatchEvent(new Event(ie.SortedEvent))}}var re,oe,ae,le,ce,he,ue;ie.SortedEvent="sorted",function(e){e.PopupContent="data-uf-popup-content",e.PopupPosition="data-uf-popup-position",e.PopupHide="data-uf-popup-hide",e.PopupTransition="data-uf-popup-transition",e.PopupDeltaX="data-uf-popup-delta-x",e.PopupDeltaY="data-uf-popup-delta-y"}(re||(re={})),function(e){e.Vertical="vertical",e.Horizontal="horizontal",e.Overlap="overlap"}(oe||(oe={})),function(e){e.Tree="tree",e.Always="always"}(ae||(ae={}));class me extends P{scan(){document.querySelectorAll("["+re.PopupContent+"]").forEach(e=>{this.initializePopup(e)})}initializePopup(e){const t=document.querySelectorAll(e.getAttribute(re.PopupContent)),s=e.getAttribute(re.PopupHide)||ae.Always,n=e.getAttribute(re.PopupPosition)||oe.Horizontal,i={element:Array.from(t),autoHide:s==ae.Tree?E.Tree:E.Always,content:e,transition:e.getAttribute(re.PopupTransition)||_.None,elementX:parseInt(e.getAttribute(re.PopupDeltaX)||"0"),elementY:parseInt(e.getAttribute(re.PopupDeltaY)||"0")};switch(n){case oe.Vertical:i.positionX=g.Adjacent,i.positionY=g.Overlap;break;case oe.Horizontal:i.positionX=g.Overlap,i.positionY=g.Adjacent;break;case oe.Overlap:i.positionX=g.Overlap,i.positionY=g.Overlap}new y(i),e.removeAttribute(re.PopupContent)}}!function(e){e.SelectUrl="data-uf-select-url"}(le||(le={}));class de extends P{scan(){A.instance.removeAllForGroup(le.SelectUrl);document.querySelectorAll("["+le.SelectUrl+"]").forEach(e=>A.instance.addListenerForGroup(le.SelectUrl,e,"change",()=>this.handleSelectUrl(e)))}handleSelectUrl(e){const t=h.getAttribute(e,le.SelectUrl);t&&(window.location.href=t.replace(/\$value\$/g,e.value))}}!function(e){e.ShareHover="data-uf-share-hover"}(ce||(ce={}));class pe extends P{scan(){A.instance.removeAllForGroup(ce.ShareHover);document.querySelectorAll("["+ce.ShareHover+"]").forEach(e=>{A.instance.addListenerForGroup(ce.ShareHover,e,"mouseover",()=>this.handleShareHover(e,!0)),A.instance.addListenerForGroup(ce.ShareHover,e,"mouseout",()=>this.handleShareHover(e,!1))})}handleShareHover(e,t){const s=h.getAttribute(e,"href");if(!s)return;document.querySelectorAll(`[data-${ce.ShareHover}][href="${s}"]`).forEach(e=>{const s=h.getAttribute(e,ce.ShareHover);s&&(t?h.addClasses(e,s):h.removeClasses(e,s))})}}!function(e){e.PageRefresh="data-uf-page-refresh"}(he||(he={}));class ge extends P{scan(){A.instance.removeAllForGroup(he.PageRefresh);document.querySelectorAll("["+he.PageRefresh+"]").forEach(e=>A.instance.addListenerForGroup(he.PageRefresh,e,"click",()=>this.handleClick(e)))}handleClick(e){const t=parseInt(h.getAttribute(e,he.PageRefresh));setTimeout(()=>{window.location.replace(window.location.href)},Math.max(1,t))}}!function(e){e.ManageSubmit="data-uf-manage-submit"}(ue||(ue={}));class fe extends P{scan(){A.instance.removeAllForGroup(ue.ManageSubmit);document.querySelectorAll("["+ue.ManageSubmit+"]").forEach(e=>this.addElementsListener(e.querySelectorAll("input, select, textarea"),e))}addElementsListener(e,t){e.forEach(e=>this.addElementListener(e,t)),this.handleFormChange(t)}addElementListener(e,t){A.instance.addListenerForGroup(ue.ManageSubmit,e,"click keyup keydown input change",()=>this.handleFormChange(t))}setElementsDisabled(e,t){e.forEach(e=>this.setElementDisabled(e,t))}setElementDisabled(e,t){e.disabled=t}handleFormChange(e){const t=e.checkValidity();this.setElementsDisabled(e.querySelectorAll("input[type=submit]"),!t),this.setElementsDisabled(e.querySelectorAll("button[type=submit]"),!t),this.setElementsDisabled(e.querySelectorAll("button:not([type])"),!t)}}class Ee extends P{constructor(){super(),this.m_helpers=[],this.registerHelper(new H),this.registerHelper(new Y),this.registerHelper(new de),this.registerHelper(new pe),this.registerHelper(new ge),this.registerHelper(new fe),this.registerHelper(new J),this.registerHelper(new M),this.registerHelper(new me),this.registerHelper(new X),this.registerHelper(new N),this.registerHelper(new B),this.registerHelper(this.m_gridSortHelper=new ie)}static get instance(){return null===Ee.m_instance&&(Ee.m_instance=new Ee),Ee.m_instance}init(e=[]){e.forEach(e=>{this.registerHelper(e)}),super.init()}resortGrid(e){this.m_gridSortHelper&&this.m_gridSortHelper.resort(e)}scan(){this.m_helpers.forEach(e=>{e.scan()})}registerHelper(e){this.m_helpers.push(e)}}var _e,ve;Ee.m_instance=null,function(e){e[e.Contain=0]="Contain",e[e.Cover=1]="Cover",e[e.Stretch=2]="Stretch"}(_e||(_e={})),function(e){e.Png="image/png",e.Jpeg="image/jpeg"}(ve||(ve={}));var ye;!function(e){e.Get="GET",e.Post="POST",e.Put="PUT",e.Patch="PATCH",e.Delete="DELETE"}(ye||(ye={}));var we=function(e,t,s,n){return new(s||(s=Promise))(function(i,r){function o(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((n=n.apply(e,t||[])).next())})};class be{constructor(e){this.m_element=h.get(e)}get element(){return this.m_element}show(){return we(this,void 0,void 0,function*(){this.m_element.dispatchEvent(new Event(be.ShowStartedEvent)),yield this.performShow(),this.m_element.dispatchEvent(new Event(be.ShowDoneEvent))})}hide(){return we(this,void 0,void 0,function*(){this.m_element.dispatchEvent(new Event(be.HideStartedEvent)),yield this.performHide(),this.m_element.dispatchEvent(new Event(be.HideDoneEvent))})}performShow(){return we(this,void 0,void 0,function*(){h.fadeIn(this.element,500),yield l.delay(500)})}performHide(){return we(this,void 0,void 0,function*(){h.fadeOut(this.element,500),yield l.delay(500)})}}be.ShowStartedEvent="uf-showable-show-started",be.ShowDoneEvent="uf-showable-show-done",be.HideStartedEvent="uf-showable-hide-started",be.HideDoneEvent="uf-showable-hide-done";Ee.instance.init(),lib={}})();